function KT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ax={exports:{}},vd={},lx={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=Symbol.for("react.element"),QT=Symbol.for("react.portal"),YT=Symbol.for("react.fragment"),JT=Symbol.for("react.strict_mode"),XT=Symbol.for("react.profiler"),ek=Symbol.for("react.provider"),tk=Symbol.for("react.context"),nk=Symbol.for("react.forward_ref"),rk=Symbol.for("react.suspense"),ik=Symbol.for("react.memo"),sk=Symbol.for("react.lazy"),g_=Symbol.iterator;function ok(t){return t===null||typeof t!="object"?null:(t=g_&&t[g_]||t["@@iterator"],typeof t=="function"?t:null)}var ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cx=Object.assign,hx={};function _a(t,e,n){this.props=t,this.context=e,this.refs=hx,this.updater=n||ux}_a.prototype.isReactComponent={};_a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dx(){}dx.prototype=_a.prototype;function $m(t,e,n){this.props=t,this.context=e,this.refs=hx,this.updater=n||ux}var Wm=$m.prototype=new dx;Wm.constructor=$m;cx(Wm,_a.prototype);Wm.isPureReactComponent=!0;var v_=Array.isArray,fx=Object.prototype.hasOwnProperty,Hm={current:null},px={key:!0,ref:!0,__self:!0,__source:!0};function mx(t,e,n){var r,i={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)fx.call(e,r)&&!px.hasOwnProperty(r)&&(i[r]=e[r]);var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){for(var f=Array(h),p=0;p<h;p++)f[p]=arguments[p+2];i.children=f}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)i[r]===void 0&&(i[r]=h[r]);return{$$typeof:Nu,type:t,key:o,ref:l,props:i,_owner:Hm.current}}function ak(t,e){return{$$typeof:Nu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nu}function lk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var __=/\/+/g;function bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lk(""+t.key):e.toString(36)}function rh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Nu:case QT:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+bf(l,0):r,v_(i)?(n="",t!=null&&(n=t.replace(__,"$&/")+"/"),rh(i,e,n,"",function(p){return p})):i!=null&&(qm(i)&&(i=ak(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(__,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",v_(t))for(var h=0;h<t.length;h++){o=t[h];var f=r+bf(o,h);l+=rh(o,e,n,f,i)}else if(f=ok(t),typeof f=="function")for(t=f.call(t),h=0;!(o=t.next()).done;)o=o.value,f=r+bf(o,h++),l+=rh(o,e,n,f,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Rc(t,e,n){if(t==null)return t;var r=[],i=0;return rh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function uk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},ih={transition:null},ck={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:ih,ReactCurrentOwner:Hm};function gx(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Rc,forEach:function(t,e,n){Rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rc(t,function(){e++}),e},toArray:function(t){return Rc(t,function(e){return e})||[]},only:function(t){if(!qm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=_a;Te.Fragment=YT;Te.Profiler=XT;Te.PureComponent=$m;Te.StrictMode=JT;Te.Suspense=rk;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ck;Te.act=gx;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cx({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Hm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in e)fx.call(e,f)&&!px.hasOwnProperty(f)&&(r[f]=e[f]===void 0&&h!==void 0?h[f]:e[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){h=Array(f);for(var p=0;p<f;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:Nu,type:t.type,key:i,ref:o,props:r,_owner:l}};Te.createContext=function(t){return t={$$typeof:tk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ek,_context:t},t.Consumer=t};Te.createElement=mx;Te.createFactory=function(t){var e=mx.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:nk,render:t}};Te.isValidElement=qm;Te.lazy=function(t){return{$$typeof:sk,_payload:{_status:-1,_result:t},_init:uk}};Te.memo=function(t,e){return{$$typeof:ik,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=ih.transition;ih.transition={};try{t()}finally{ih.transition=e}};Te.unstable_act=gx;Te.useCallback=function(t,e){return Jt.current.useCallback(t,e)};Te.useContext=function(t){return Jt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Jt.current.useEffect(t,e)};Te.useId=function(){return Jt.current.useId()};Te.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Jt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};Te.useRef=function(t){return Jt.current.useRef(t)};Te.useState=function(t){return Jt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Jt.current.useTransition()};Te.version="18.3.1";lx.exports=Te;var F=lx.exports;const nn=gd(F),hk=KT({__proto__:null,default:nn},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dk=F,fk=Symbol.for("react.element"),pk=Symbol.for("react.fragment"),mk=Object.prototype.hasOwnProperty,gk=dk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vk={key:!0,ref:!0,__self:!0,__source:!0};function vx(t,e,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)mk.call(e,r)&&!vk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fk,type:t,key:o,ref:l,props:i,_owner:gk.current}}vd.Fragment=pk;vd.jsx=vx;vd.jsxs=vx;ax.exports=vd;var u=ax.exports,cp={},_x={exports:{}},xn={},yx={exports:{}},xx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,he){var X=Z.length;Z.push(he);e:for(;0<X;){var fe=X-1>>>1,xe=Z[fe];if(0<i(xe,he))Z[fe]=he,Z[X]=xe,X=fe;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var he=Z[0],X=Z.pop();if(X!==he){Z[0]=X;e:for(var fe=0,xe=Z.length,ke=xe>>>1;fe<ke;){var De=2*(fe+1)-1,we=Z[De],ge=De+1,gt=Z[ge];if(0>i(we,X))ge<xe&&0>i(gt,we)?(Z[fe]=gt,Z[ge]=X,fe=ge):(Z[fe]=we,Z[De]=X,fe=De);else if(ge<xe&&0>i(gt,X))Z[fe]=gt,Z[ge]=X,fe=ge;else break e}}return he}function i(Z,he){var X=Z.sortIndex-he.sortIndex;return X!==0?X:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var f=[],p=[],v=1,y=null,w=3,E=!1,j=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Z){for(var he=n(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=Z)r(p),he.sortIndex=he.expirationTime,e(f,he);else break;he=n(p)}}function U(Z){if(S=!1,R(Z),!j)if(n(f)!==null)j=!0,We(q);else{var he=n(p);he!==null&&Ht(U,he.startTime-Z)}}function q(Z,he){j=!1,S&&(S=!1,C(T),T=-1),E=!0;var X=w;try{for(R(he),y=n(f);y!==null&&(!(y.expirationTime>he)||Z&&!V());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,w=y.priorityLevel;var xe=fe(y.expirationTime<=he);he=t.unstable_now(),typeof xe=="function"?y.callback=xe:y===n(f)&&r(f),R(he)}else r(f);y=n(f)}if(y!==null)var ke=!0;else{var De=n(p);De!==null&&Ht(U,De.startTime-he),ke=!1}return ke}finally{y=null,w=X,E=!1}}var G=!1,k=null,T=-1,A=5,P=-1;function V(){return!(t.unstable_now()-P<A)}function O(){if(k!==null){var Z=t.unstable_now();P=Z;var he=!0;try{he=k(!0,Z)}finally{he?D():(G=!1,k=null)}}else G=!1}var D;if(typeof N=="function")D=function(){N(O)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,cn=Ae.port2;Ae.port1.onmessage=O,D=function(){cn.postMessage(null)}}else D=function(){M(O,0)};function We(Z){k=Z,G||(G=!0,D())}function Ht(Z,he){T=M(function(){Z(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){j||E||(j=!0,We(q))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var X=w;w=he;try{return Z()}finally{w=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var X=w;w=Z;try{return he()}finally{w=X}},t.unstable_scheduleCallback=function(Z,he,X){var fe=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?fe+X:fe):X=fe,Z){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=X+xe,Z={id:v++,callback:he,priorityLevel:Z,startTime:X,expirationTime:xe,sortIndex:-1},X>fe?(Z.sortIndex=X,e(p,Z),n(f)===null&&Z===n(p)&&(S?(C(T),T=-1):S=!0,Ht(U,X-fe))):(Z.sortIndex=xe,e(f,Z),j||E||(j=!0,We(q))),Z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Z){var he=w;return function(){var X=w;w=he;try{return Z.apply(this,arguments)}finally{w=X}}}})(xx);yx.exports=xx;var _k=yx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk=F,yn=_k;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wx=new Set,Hl={};function $s(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(Hl[t]=e,t=0;t<e.length;t++)wx.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hp=Object.prototype.hasOwnProperty,xk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y_={},x_={};function wk(t){return hp.call(x_,t)?!0:hp.call(y_,t)?!1:xk.test(t)?x_[t]=!0:(y_[t]=!0,!1)}function bk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ek(t,e,n,r){if(e===null||typeof e>"u"||bk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gm=/[\-:]([a-z])/g;function Zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gm,Zm);Lt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gm,Zm);Lt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gm,Zm);Lt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Km(t,e,n,r){var i=Lt.hasOwnProperty(e)?Lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ek(e,n,i,r)&&(n=null),r||i===null?wk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jc=Symbol.for("react.element"),Co=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),Qm=Symbol.for("react.strict_mode"),dp=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),fp=Symbol.for("react.suspense"),pp=Symbol.for("react.suspense_list"),Jm=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),Tx=Symbol.for("react.offscreen"),w_=Symbol.iterator;function dl(t){return t===null||typeof t!="object"?null:(t=w_&&t[w_]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,Ef;function wl(t){if(Ef===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ef=e&&e[1]||""}return`
`+Ef+t}var Tf=!1;function kf(t,e){if(!t||Tf)return"";Tf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,h=o.length-1;1<=l&&0<=h&&i[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(i[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||i[l]!==o[h]){var f=`
`+i[l].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=l&&0<=h);break}}}finally{Tf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wl(t):""}function Tk(t){switch(t.tag){case 5:return wl(t.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return t=kf(t.type,!1),t;case 11:return t=kf(t.type.render,!1),t;case 1:return t=kf(t.type,!0),t;default:return""}}function mp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ao:return"Fragment";case Co:return"Portal";case dp:return"Profiler";case Qm:return"StrictMode";case fp:return"Suspense";case pp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ex:return(t.displayName||"Context")+".Consumer";case bx:return(t._context.displayName||"Context")+".Provider";case Ym:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jm:return e=t.displayName||null,e!==null?e:mp(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return mp(t(e))}catch{}}return null}function kk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mp(e);case 8:return e===Qm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nk(t){var e=kx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lc(t){t._valueTracker||(t._valueTracker=Nk(t))}function Nx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gp(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function b_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ix(t,e){e=e.checked,e!=null&&Km(t,"checked",e,!1)}function vp(t,e){Ix(t,e);var n=Fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_p(t,e.type,n):e.hasOwnProperty("defaultValue")&&_p(t,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function E_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _p(t,e,n){(e!=="number"||Nh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bl=Array.isArray;function Bo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(bl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fi(n)}}function Sx(t,e){var n=Fi(e.value),r=Fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function k_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Px(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Px(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dc,Cx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dc=Dc||document.createElement("div"),Dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ql(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ik=["Webkit","ms","Moz","O"];Object.keys(Al).forEach(function(t){Ik.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Al[e]=Al[t]})});function Ax(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Al.hasOwnProperty(t)&&Al[t]?(""+e).trim():e+"px"}function Rx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ax(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Sk=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wp(t,e){if(e){if(Sk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function bp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ep=null;function Xm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tp=null,$o=null,Wo=null;function N_(t){if(t=Pu(t)){if(typeof Tp!="function")throw Error(J(280));var e=t.stateNode;e&&(e=bd(e),Tp(t.stateNode,t.type,e))}}function jx(t){$o?Wo?Wo.push(t):Wo=[t]:$o=t}function Lx(){if($o){var t=$o,e=Wo;if(Wo=$o=null,N_(t),e)for(t=0;t<e.length;t++)N_(e[t])}}function Dx(t,e){return t(e)}function Ox(){}var Nf=!1;function Mx(t,e,n){if(Nf)return t(e,n);Nf=!0;try{return Dx(t,e,n)}finally{Nf=!1,($o!==null||Wo!==null)&&(Ox(),Lx())}}function Gl(t,e){var n=t.stateNode;if(n===null)return null;var r=bd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var kp=!1;if($r)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){kp=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{kp=!1}function Pk(t,e,n,r,i,o,l,h,f){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var Rl=!1,Ih=null,Sh=!1,Np=null,Ck={onError:function(t){Rl=!0,Ih=t}};function Ak(t,e,n,r,i,o,l,h,f){Rl=!1,Ih=null,Pk.apply(Ck,arguments)}function Rk(t,e,n,r,i,o,l,h,f){if(Ak.apply(this,arguments),Rl){if(Rl){var p=Ih;Rl=!1,Ih=null}else throw Error(J(198));Sh||(Sh=!0,Np=p)}}function Ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I_(t){if(Ws(t)!==t)throw Error(J(188))}function jk(t){var e=t.alternate;if(!e){if(e=Ws(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return I_(i),t;if(o===r)return I_(i),e;o=o.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,h=i.child;h;){if(h===n){l=!0,n=i,r=o;break}if(h===r){l=!0,r=i,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,r=i;break}if(h===r){l=!0,r=o,n=i;break}h=h.sibling}if(!l)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function zx(t){return t=jk(t),t!==null?Fx(t):null}function Fx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fx(t);if(e!==null)return e;t=t.sibling}return null}var Ux=yn.unstable_scheduleCallback,S_=yn.unstable_cancelCallback,Lk=yn.unstable_shouldYield,Dk=yn.unstable_requestPaint,ut=yn.unstable_now,Ok=yn.unstable_getCurrentPriorityLevel,eg=yn.unstable_ImmediatePriority,Bx=yn.unstable_UserBlockingPriority,Ph=yn.unstable_NormalPriority,Mk=yn.unstable_LowPriority,$x=yn.unstable_IdlePriority,_d=null,ur=null;function Vk(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(_d,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Uk,zk=Math.log,Fk=Math.LN2;function Uk(t){return t>>>=0,t===0?32:31-(zk(t)/Fk|0)|0}var Oc=64,Mc=4194304;function El(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ch(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~i;h!==0?r=El(h):(o&=l,o!==0&&(r=El(o)))}else l=n&~i,l!==0?r=El(l):o!==0&&(r=El(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),i=1<<n,r|=t[n],e&=~i;return r}function Bk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $k(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Kn(o),h=1<<l,f=i[l];f===-1?(!(h&n)||h&r)&&(i[l]=Bk(h,e)):f<=e&&(t.expiredLanes|=h),o&=~h}}function Ip(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wx(){var t=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),t}function If(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function Wk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function Hx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qx,ng,Gx,Zx,Kx,Sp=!1,Vc=[],Ii=null,Si=null,Pi=null,Zl=new Map,Kl=new Map,_i=[],Hk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P_(t,e){switch(t){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Zl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(e.pointerId)}}function pl(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Pu(e),e!==null&&ng(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qk(t,e,n,r,i){switch(e){case"focusin":return Ii=pl(Ii,t,e,n,r,i),!0;case"dragenter":return Si=pl(Si,t,e,n,r,i),!0;case"mouseover":return Pi=pl(Pi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Zl.set(o,pl(Zl.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Kl.set(o,pl(Kl.get(o)||null,t,e,n,r,i)),!0}return!1}function Qx(t){var e=xs(t.target);if(e!==null){var n=Ws(e);if(n!==null){if(e=n.tag,e===13){if(e=Vx(n),e!==null){t.blockedOn=e,Kx(t.priority,function(){Gx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ep=r,n.target.dispatchEvent(r),Ep=null}else return e=Pu(n),e!==null&&ng(e),t.blockedOn=n,!1;e.shift()}return!0}function C_(t,e,n){sh(t)&&n.delete(e)}function Gk(){Sp=!1,Ii!==null&&sh(Ii)&&(Ii=null),Si!==null&&sh(Si)&&(Si=null),Pi!==null&&sh(Pi)&&(Pi=null),Zl.forEach(C_),Kl.forEach(C_)}function ml(t,e){t.blockedOn===e&&(t.blockedOn=null,Sp||(Sp=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,Gk)))}function Ql(t){function e(i){return ml(i,t)}if(0<Vc.length){ml(Vc[0],t);for(var n=1;n<Vc.length;n++){var r=Vc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ii!==null&&ml(Ii,t),Si!==null&&ml(Si,t),Pi!==null&&ml(Pi,t),Zl.forEach(e),Kl.forEach(e),n=0;n<_i.length;n++)r=_i[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)Qx(n),n.blockedOn===null&&_i.shift()}var Ho=Jr.ReactCurrentBatchConfig,Ah=!0;function Zk(t,e,n,r){var i=Me,o=Ho.transition;Ho.transition=null;try{Me=1,rg(t,e,n,r)}finally{Me=i,Ho.transition=o}}function Kk(t,e,n,r){var i=Me,o=Ho.transition;Ho.transition=null;try{Me=4,rg(t,e,n,r)}finally{Me=i,Ho.transition=o}}function rg(t,e,n,r){if(Ah){var i=Pp(t,e,n,r);if(i===null)Mf(t,e,r,Rh,n),P_(t,r);else if(qk(i,t,e,n,r))r.stopPropagation();else if(P_(t,r),e&4&&-1<Hk.indexOf(t)){for(;i!==null;){var o=Pu(i);if(o!==null&&qx(o),o=Pp(t,e,n,r),o===null&&Mf(t,e,r,Rh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Mf(t,e,r,null,n)}}var Rh=null;function Pp(t,e,n,r){if(Rh=null,t=Xm(r),t=xs(t),t!==null)if(e=Ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rh=t,null}function Yx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ok()){case eg:return 1;case Bx:return 4;case Ph:case Mk:return 16;case $x:return 536870912;default:return 16}default:return 16}}var Ei=null,ig=null,oh=null;function Jx(){if(oh)return oh;var t,e=ig,n=e.length,r,i="value"in Ei?Ei.value:Ei.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[o-r];r++);return oh=i.slice(t,1<r?1-r:void 0)}function ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zc(){return!0}function A_(){return!1}function wn(t){function e(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zc:A_,this.isPropagationStopped=A_,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zc)},persist:function(){},isPersistent:zc}),e}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=wn(ya),Su=nt({},ya,{view:0,detail:0}),Qk=wn(Su),Sf,Pf,gl,yd=nt({},Su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:og,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gl&&(gl&&t.type==="mousemove"?(Sf=t.screenX-gl.screenX,Pf=t.screenY-gl.screenY):Pf=Sf=0,gl=t),Sf)},movementY:function(t){return"movementY"in t?t.movementY:Pf}}),R_=wn(yd),Yk=nt({},yd,{dataTransfer:0}),Jk=wn(Yk),Xk=nt({},Su,{relatedTarget:0}),Cf=wn(Xk),eN=nt({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),tN=wn(eN),nN=nt({},ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rN=wn(nN),iN=nt({},ya,{data:0}),j_=wn(iN),sN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aN[t])?!!e[t]:!1}function og(){return lN}var uN=nt({},Su,{key:function(t){if(t.key){var e=sN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:og,charCode:function(t){return t.type==="keypress"?ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cN=wn(uN),hN=nt({},yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L_=wn(hN),dN=nt({},Su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:og}),fN=wn(dN),pN=nt({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),mN=wn(pN),gN=nt({},yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vN=wn(gN),_N=[9,13,27,32],ag=$r&&"CompositionEvent"in window,jl=null;$r&&"documentMode"in document&&(jl=document.documentMode);var yN=$r&&"TextEvent"in window&&!jl,Xx=$r&&(!ag||jl&&8<jl&&11>=jl),D_=" ",O_=!1;function ew(t,e){switch(t){case"keyup":return _N.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ro=!1;function xN(t,e){switch(t){case"compositionend":return tw(e);case"keypress":return e.which!==32?null:(O_=!0,D_);case"textInput":return t=e.data,t===D_&&O_?null:t;default:return null}}function wN(t,e){if(Ro)return t==="compositionend"||!ag&&ew(t,e)?(t=Jx(),oh=ig=Ei=null,Ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xx&&e.locale!=="ko"?null:e.data;default:return null}}var bN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bN[t.type]:e==="textarea"}function nw(t,e,n,r){jx(r),e=jh(e,"onChange"),0<e.length&&(n=new sg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ll=null,Yl=null;function EN(t){fw(t,0)}function xd(t){var e=Do(t);if(Nx(e))return t}function TN(t,e){if(t==="change")return e}var rw=!1;if($r){var Af;if($r){var Rf="oninput"in document;if(!Rf){var V_=document.createElement("div");V_.setAttribute("oninput","return;"),Rf=typeof V_.oninput=="function"}Af=Rf}else Af=!1;rw=Af&&(!document.documentMode||9<document.documentMode)}function z_(){Ll&&(Ll.detachEvent("onpropertychange",iw),Yl=Ll=null)}function iw(t){if(t.propertyName==="value"&&xd(Yl)){var e=[];nw(e,Yl,t,Xm(t)),Mx(EN,e)}}function kN(t,e,n){t==="focusin"?(z_(),Ll=e,Yl=n,Ll.attachEvent("onpropertychange",iw)):t==="focusout"&&z_()}function NN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xd(Yl)}function IN(t,e){if(t==="click")return xd(e)}function SN(t,e){if(t==="input"||t==="change")return xd(e)}function PN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:PN;function Jl(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hp.call(e,i)||!Jn(t[i],e[i]))return!1}return!0}function F_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function U_(t,e){var n=F_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=F_(n)}}function sw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ow(){for(var t=window,e=Nh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nh(t.document)}return e}function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CN(t){var e=ow(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sw(n.ownerDocument.documentElement,n)){if(r!==null&&lg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=U_(n,o);var l=U_(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AN=$r&&"documentMode"in document&&11>=document.documentMode,jo=null,Cp=null,Dl=null,Ap=!1;function B_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ap||jo==null||jo!==Nh(r)||(r=jo,"selectionStart"in r&&lg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dl&&Jl(Dl,r)||(Dl=r,r=jh(Cp,"onSelect"),0<r.length&&(e=new sg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jo)))}function Fc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lo={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},jf={},aw={};$r&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function wd(t){if(jf[t])return jf[t];if(!Lo[t])return t;var e=Lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aw)return jf[t]=e[n];return t}var lw=wd("animationend"),uw=wd("animationiteration"),cw=wd("animationstart"),hw=wd("transitionend"),dw=new Map,$_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(t,e){dw.set(t,e),$s(e,[t])}for(var Lf=0;Lf<$_.length;Lf++){var Df=$_[Lf],RN=Df.toLowerCase(),jN=Df[0].toUpperCase()+Df.slice(1);Zi(RN,"on"+jN)}Zi(lw,"onAnimationEnd");Zi(uw,"onAnimationIteration");Zi(cw,"onAnimationStart");Zi("dblclick","onDoubleClick");Zi("focusin","onFocus");Zi("focusout","onBlur");Zi(hw,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tl));function W_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rk(r,e,void 0,t),t.currentTarget=null}function fw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var h=r[l],f=h.instance,p=h.currentTarget;if(h=h.listener,f!==o&&i.isPropagationStopped())break e;W_(i,h,p),o=f}else for(l=0;l<r.length;l++){if(h=r[l],f=h.instance,p=h.currentTarget,h=h.listener,f!==o&&i.isPropagationStopped())break e;W_(i,h,p),o=f}}}if(Sh)throw t=Np,Sh=!1,Np=null,t}function He(t,e){var n=e[Op];n===void 0&&(n=e[Op]=new Set);var r=t+"__bubble";n.has(r)||(pw(e,t,2,!1),n.add(r))}function Of(t,e,n){var r=0;e&&(r|=4),pw(n,t,r,e)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Xl(t){if(!t[Uc]){t[Uc]=!0,wx.forEach(function(n){n!=="selectionchange"&&(LN.has(n)||Of(n,!1,t),Of(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uc]||(e[Uc]=!0,Of("selectionchange",!1,e))}}function pw(t,e,n,r){switch(Yx(e)){case 1:var i=Zk;break;case 4:i=Kk;break;default:i=rg}n=i.bind(null,e,n,t),i=void 0,!kp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Mf(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var h=r.stateNode.containerInfo;if(h===i||h.nodeType===8&&h.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===i||f.nodeType===8&&f.parentNode===i))return;l=l.return}for(;h!==null;){if(l=xs(h),l===null)return;if(f=l.tag,f===5||f===6){r=o=l;continue e}h=h.parentNode}}r=r.return}Mx(function(){var p=o,v=Xm(n),y=[];e:{var w=dw.get(t);if(w!==void 0){var E=sg,j=t;switch(t){case"keypress":if(ah(n)===0)break e;case"keydown":case"keyup":E=cN;break;case"focusin":j="focus",E=Cf;break;case"focusout":j="blur",E=Cf;break;case"beforeblur":case"afterblur":E=Cf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=R_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=fN;break;case lw:case uw:case cw:E=tN;break;case hw:E=mN;break;case"scroll":E=Qk;break;case"wheel":E=vN;break;case"copy":case"cut":case"paste":E=rN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=L_}var S=(e&4)!==0,M=!S&&t==="scroll",C=S?w!==null?w+"Capture":null:w;S=[];for(var N=p,R;N!==null;){R=N;var U=R.stateNode;if(R.tag===5&&U!==null&&(R=U,C!==null&&(U=Gl(N,C),U!=null&&S.push(eu(N,U,R)))),M)break;N=N.return}0<S.length&&(w=new E(w,j,null,n,v),y.push({event:w,listeners:S}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",w&&n!==Ep&&(j=n.relatedTarget||n.fromElement)&&(xs(j)||j[Wr]))break e;if((E||w)&&(w=v.window===v?v:(w=v.ownerDocument)?w.defaultView||w.parentWindow:window,E?(j=n.relatedTarget||n.toElement,E=p,j=j?xs(j):null,j!==null&&(M=Ws(j),j!==M||j.tag!==5&&j.tag!==6)&&(j=null)):(E=null,j=p),E!==j)){if(S=R_,U="onMouseLeave",C="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(S=L_,U="onPointerLeave",C="onPointerEnter",N="pointer"),M=E==null?w:Do(E),R=j==null?w:Do(j),w=new S(U,N+"leave",E,n,v),w.target=M,w.relatedTarget=R,U=null,xs(v)===p&&(S=new S(C,N+"enter",j,n,v),S.target=R,S.relatedTarget=M,U=S),M=U,E&&j)t:{for(S=E,C=j,N=0,R=S;R;R=No(R))N++;for(R=0,U=C;U;U=No(U))R++;for(;0<N-R;)S=No(S),N--;for(;0<R-N;)C=No(C),R--;for(;N--;){if(S===C||C!==null&&S===C.alternate)break t;S=No(S),C=No(C)}S=null}else S=null;E!==null&&H_(y,w,E,S,!1),j!==null&&M!==null&&H_(y,M,j,S,!0)}}e:{if(w=p?Do(p):window,E=w.nodeName&&w.nodeName.toLowerCase(),E==="select"||E==="input"&&w.type==="file")var q=TN;else if(M_(w))if(rw)q=SN;else{q=NN;var G=kN}else(E=w.nodeName)&&E.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(q=IN);if(q&&(q=q(t,p))){nw(y,q,n,v);break e}G&&G(t,w,p),t==="focusout"&&(G=w._wrapperState)&&G.controlled&&w.type==="number"&&_p(w,"number",w.value)}switch(G=p?Do(p):window,t){case"focusin":(M_(G)||G.contentEditable==="true")&&(jo=G,Cp=p,Dl=null);break;case"focusout":Dl=Cp=jo=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,B_(y,n,v);break;case"selectionchange":if(AN)break;case"keydown":case"keyup":B_(y,n,v)}var k;if(ag)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ro?ew(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Xx&&n.locale!=="ko"&&(Ro||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ro&&(k=Jx()):(Ei=v,ig="value"in Ei?Ei.value:Ei.textContent,Ro=!0)),G=jh(p,T),0<G.length&&(T=new j_(T,t,null,n,v),y.push({event:T,listeners:G}),k?T.data=k:(k=tw(n),k!==null&&(T.data=k)))),(k=yN?xN(t,n):wN(t,n))&&(p=jh(p,"onBeforeInput"),0<p.length&&(v=new j_("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=k))}fw(y,e)})}function eu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Gl(t,n),o!=null&&r.unshift(eu(t,o,i)),o=Gl(t,e),o!=null&&r.push(eu(t,o,i))),t=t.return}return r}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function H_(t,e,n,r,i){for(var o=e._reactName,l=[];n!==null&&n!==r;){var h=n,f=h.alternate,p=h.stateNode;if(f!==null&&f===r)break;h.tag===5&&p!==null&&(h=p,i?(f=Gl(n,o),f!=null&&l.unshift(eu(n,f,h))):i||(f=Gl(n,o),f!=null&&l.push(eu(n,f,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var DN=/\r\n?/g,ON=/\u0000|\uFFFD/g;function q_(t){return(typeof t=="string"?t:""+t).replace(DN,`
`).replace(ON,"")}function Bc(t,e,n){if(e=q_(e),q_(t)!==e&&n)throw Error(J(425))}function Lh(){}var Rp=null,jp=null;function Lp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dp=typeof setTimeout=="function"?setTimeout:void 0,MN=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,VN=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(t){return G_.resolve(null).then(t).catch(zN)}:Dp;function zN(t){setTimeout(function(){throw t})}function Vf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ql(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ql(e)}function Ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Z_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xa=Math.random().toString(36).slice(2),ar="__reactFiber$"+xa,tu="__reactProps$"+xa,Wr="__reactContainer$"+xa,Op="__reactEvents$"+xa,FN="__reactListeners$"+xa,UN="__reactHandles$"+xa;function xs(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z_(t);t!==null;){if(n=t[ar])return n;t=Z_(t)}return e}t=n,n=t.parentNode}return null}function Pu(t){return t=t[ar]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function bd(t){return t[tu]||null}var Mp=[],Oo=-1;function Ki(t){return{current:t}}function Ge(t){0>Oo||(t.current=Mp[Oo],Mp[Oo]=null,Oo--)}function $e(t,e){Oo++,Mp[Oo]=t.current,t.current=e}var Ui={},$t=Ki(Ui),an=Ki(!1),Cs=Ui;function ta(t,e){var n=t.type.contextTypes;if(!n)return Ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function Dh(){Ge(an),Ge($t)}function K_(t,e,n){if($t.current!==Ui)throw Error(J(168));$e($t,e),$e(an,n)}function mw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,kk(t)||"Unknown",i));return nt({},n,r)}function Oh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ui,Cs=$t.current,$e($t,t),$e(an,an.current),!0}function Q_(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=mw(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,Ge(an),Ge($t),$e($t,t)):Ge(an),$e(an,n)}var Rr=null,Ed=!1,zf=!1;function gw(t){Rr===null?Rr=[t]:Rr.push(t)}function BN(t){Ed=!0,gw(t)}function Qi(){if(!zf&&Rr!==null){zf=!0;var t=0,e=Me;try{var n=Rr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rr=null,Ed=!1}catch(i){throw Rr!==null&&(Rr=Rr.slice(t+1)),Ux(eg,Qi),i}finally{Me=e,zf=!1}}return null}var Mo=[],Vo=0,Mh=null,Vh=0,Cn=[],An=0,As=null,Dr=1,Or="";function gs(t,e){Mo[Vo++]=Vh,Mo[Vo++]=Mh,Mh=t,Vh=e}function vw(t,e,n){Cn[An++]=Dr,Cn[An++]=Or,Cn[An++]=As,As=t;var r=Dr;t=Or;var i=32-Kn(r)-1;r&=~(1<<i),n+=1;var o=32-Kn(e)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Dr=1<<32-Kn(e)+i|n<<i|r,Or=o+t}else Dr=1<<o|n<<i|r,Or=t}function ug(t){t.return!==null&&(gs(t,1),vw(t,1,0))}function cg(t){for(;t===Mh;)Mh=Mo[--Vo],Mo[Vo]=null,Vh=Mo[--Vo],Mo[Vo]=null;for(;t===As;)As=Cn[--An],Cn[An]=null,Or=Cn[--An],Cn[An]=null,Dr=Cn[--An],Cn[An]=null}var _n=null,gn=null,Qe=!1,Gn=null;function _w(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Y_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,gn=Ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:Dr,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,gn=null,!0):!1;default:return!1}}function Vp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zp(t){if(Qe){var e=gn;if(e){var n=e;if(!Y_(t,e)){if(Vp(t))throw Error(J(418));e=Ci(n.nextSibling);var r=_n;e&&Y_(t,e)?_w(r,n):(t.flags=t.flags&-4097|2,Qe=!1,_n=t)}}else{if(Vp(t))throw Error(J(418));t.flags=t.flags&-4097|2,Qe=!1,_n=t}}}function J_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function $c(t){if(t!==_n)return!1;if(!Qe)return J_(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lp(t.type,t.memoizedProps)),e&&(e=gn)){if(Vp(t))throw yw(),Error(J(418));for(;e;)_w(t,e),e=Ci(e.nextSibling)}if(J_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=Ci(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=_n?Ci(t.stateNode.nextSibling):null;return!0}function yw(){for(var t=gn;t;)t=Ci(t.nextSibling)}function na(){gn=_n=null,Qe=!1}function hg(t){Gn===null?Gn=[t]:Gn.push(t)}var $N=Jr.ReactCurrentBatchConfig;function vl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=i.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Wc(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X_(t){var e=t._init;return e(t._payload)}function xw(t){function e(C,N){if(t){var R=C.deletions;R===null?(C.deletions=[N],C.flags|=16):R.push(N)}}function n(C,N){if(!t)return null;for(;N!==null;)e(C,N),N=N.sibling;return null}function r(C,N){for(C=new Map;N!==null;)N.key!==null?C.set(N.key,N):C.set(N.index,N),N=N.sibling;return C}function i(C,N){return C=Li(C,N),C.index=0,C.sibling=null,C}function o(C,N,R){return C.index=R,t?(R=C.alternate,R!==null?(R=R.index,R<N?(C.flags|=2,N):R):(C.flags|=2,N)):(C.flags|=1048576,N)}function l(C){return t&&C.alternate===null&&(C.flags|=2),C}function h(C,N,R,U){return N===null||N.tag!==6?(N=qf(R,C.mode,U),N.return=C,N):(N=i(N,R),N.return=C,N)}function f(C,N,R,U){var q=R.type;return q===Ao?v(C,N,R.props.children,U,R.key):N!==null&&(N.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===gi&&X_(q)===N.type)?(U=i(N,R.props),U.ref=vl(C,N,R),U.return=C,U):(U=ph(R.type,R.key,R.props,null,C.mode,U),U.ref=vl(C,N,R),U.return=C,U)}function p(C,N,R,U){return N===null||N.tag!==4||N.stateNode.containerInfo!==R.containerInfo||N.stateNode.implementation!==R.implementation?(N=Gf(R,C.mode,U),N.return=C,N):(N=i(N,R.children||[]),N.return=C,N)}function v(C,N,R,U,q){return N===null||N.tag!==7?(N=Ns(R,C.mode,U,q),N.return=C,N):(N=i(N,R),N.return=C,N)}function y(C,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return N=qf(""+N,C.mode,R),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case jc:return R=ph(N.type,N.key,N.props,null,C.mode,R),R.ref=vl(C,null,N),R.return=C,R;case Co:return N=Gf(N,C.mode,R),N.return=C,N;case gi:var U=N._init;return y(C,U(N._payload),R)}if(bl(N)||dl(N))return N=Ns(N,C.mode,R,null),N.return=C,N;Wc(C,N)}return null}function w(C,N,R,U){var q=N!==null?N.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return q!==null?null:h(C,N,""+R,U);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case jc:return R.key===q?f(C,N,R,U):null;case Co:return R.key===q?p(C,N,R,U):null;case gi:return q=R._init,w(C,N,q(R._payload),U)}if(bl(R)||dl(R))return q!==null?null:v(C,N,R,U,null);Wc(C,R)}return null}function E(C,N,R,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return C=C.get(R)||null,h(N,C,""+U,q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case jc:return C=C.get(U.key===null?R:U.key)||null,f(N,C,U,q);case Co:return C=C.get(U.key===null?R:U.key)||null,p(N,C,U,q);case gi:var G=U._init;return E(C,N,R,G(U._payload),q)}if(bl(U)||dl(U))return C=C.get(R)||null,v(N,C,U,q,null);Wc(N,U)}return null}function j(C,N,R,U){for(var q=null,G=null,k=N,T=N=0,A=null;k!==null&&T<R.length;T++){k.index>T?(A=k,k=null):A=k.sibling;var P=w(C,k,R[T],U);if(P===null){k===null&&(k=A);break}t&&k&&P.alternate===null&&e(C,k),N=o(P,N,T),G===null?q=P:G.sibling=P,G=P,k=A}if(T===R.length)return n(C,k),Qe&&gs(C,T),q;if(k===null){for(;T<R.length;T++)k=y(C,R[T],U),k!==null&&(N=o(k,N,T),G===null?q=k:G.sibling=k,G=k);return Qe&&gs(C,T),q}for(k=r(C,k);T<R.length;T++)A=E(k,C,T,R[T],U),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?T:A.key),N=o(A,N,T),G===null?q=A:G.sibling=A,G=A);return t&&k.forEach(function(V){return e(C,V)}),Qe&&gs(C,T),q}function S(C,N,R,U){var q=dl(R);if(typeof q!="function")throw Error(J(150));if(R=q.call(R),R==null)throw Error(J(151));for(var G=q=null,k=N,T=N=0,A=null,P=R.next();k!==null&&!P.done;T++,P=R.next()){k.index>T?(A=k,k=null):A=k.sibling;var V=w(C,k,P.value,U);if(V===null){k===null&&(k=A);break}t&&k&&V.alternate===null&&e(C,k),N=o(V,N,T),G===null?q=V:G.sibling=V,G=V,k=A}if(P.done)return n(C,k),Qe&&gs(C,T),q;if(k===null){for(;!P.done;T++,P=R.next())P=y(C,P.value,U),P!==null&&(N=o(P,N,T),G===null?q=P:G.sibling=P,G=P);return Qe&&gs(C,T),q}for(k=r(C,k);!P.done;T++,P=R.next())P=E(k,C,T,P.value,U),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?T:P.key),N=o(P,N,T),G===null?q=P:G.sibling=P,G=P);return t&&k.forEach(function(O){return e(C,O)}),Qe&&gs(C,T),q}function M(C,N,R,U){if(typeof R=="object"&&R!==null&&R.type===Ao&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case jc:e:{for(var q=R.key,G=N;G!==null;){if(G.key===q){if(q=R.type,q===Ao){if(G.tag===7){n(C,G.sibling),N=i(G,R.props.children),N.return=C,C=N;break e}}else if(G.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===gi&&X_(q)===G.type){n(C,G.sibling),N=i(G,R.props),N.ref=vl(C,G,R),N.return=C,C=N;break e}n(C,G);break}else e(C,G);G=G.sibling}R.type===Ao?(N=Ns(R.props.children,C.mode,U,R.key),N.return=C,C=N):(U=ph(R.type,R.key,R.props,null,C.mode,U),U.ref=vl(C,N,R),U.return=C,C=U)}return l(C);case Co:e:{for(G=R.key;N!==null;){if(N.key===G)if(N.tag===4&&N.stateNode.containerInfo===R.containerInfo&&N.stateNode.implementation===R.implementation){n(C,N.sibling),N=i(N,R.children||[]),N.return=C,C=N;break e}else{n(C,N);break}else e(C,N);N=N.sibling}N=Gf(R,C.mode,U),N.return=C,C=N}return l(C);case gi:return G=R._init,M(C,N,G(R._payload),U)}if(bl(R))return j(C,N,R,U);if(dl(R))return S(C,N,R,U);Wc(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,N!==null&&N.tag===6?(n(C,N.sibling),N=i(N,R),N.return=C,C=N):(n(C,N),N=qf(R,C.mode,U),N.return=C,C=N),l(C)):n(C,N)}return M}var ra=xw(!0),ww=xw(!1),zh=Ki(null),Fh=null,zo=null,dg=null;function fg(){dg=zo=Fh=null}function pg(t){var e=zh.current;Ge(zh),t._currentValue=e}function Fp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){Fh=t,dg=zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(dg!==t)if(t={context:t,memoizedValue:e,next:null},zo===null){if(Fh===null)throw Error(J(308));zo=t,Fh.dependencies={lanes:0,firstContext:t}}else zo=zo.next=t;return e}var ws=null;function mg(t){ws===null?ws=[t]:ws.push(t)}function bw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Hr(t,r)}function Hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vi=!1;function gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ew(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Hr(t,n)}return i=r.interleaved,i===null?(e.next=e,mg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Hr(t,n)}function lh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}function ey(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uh(t,e,n,r){var i=t.updateQueue;vi=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var f=h,p=f.next;f.next=null,l===null?o=p:l.next=p,l=f;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=f))}if(o!==null){var y=i.baseState;l=0,v=p=f=null,h=o;do{var w=h.lane,E=h.eventTime;if((r&w)===w){v!==null&&(v=v.next={eventTime:E,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var j=t,S=h;switch(w=e,E=n,S.tag){case 1:if(j=S.payload,typeof j=="function"){y=j.call(E,y,w);break e}y=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=S.payload,w=typeof j=="function"?j.call(E,y,w):j,w==null)break e;y=nt({},y,w);break e;case 2:vi=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[h]:w.push(h))}else E={eventTime:E,lane:w,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(p=v=E,f=y):v=v.next=E,l|=w;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;w=h,h=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(v===null&&(f=y),i.baseState=f,i.firstBaseUpdate=p,i.lastBaseUpdate=v,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);js|=l,t.lanes=l,t.memoizedState=y}}function ty(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Cu={},cr=Ki(Cu),nu=Ki(Cu),ru=Ki(Cu);function bs(t){if(t===Cu)throw Error(J(174));return t}function vg(t,e){switch($e(ru,e),$e(nu,t),$e(cr,Cu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xp(e,t)}Ge(cr),$e(cr,e)}function ia(){Ge(cr),Ge(nu),Ge(ru)}function Tw(t){bs(ru.current);var e=bs(cr.current),n=xp(e,t.type);e!==n&&($e(nu,t),$e(cr,n))}function _g(t){nu.current===t&&(Ge(cr),Ge(nu))}var Xe=Ki(0);function Bh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ff=[];function yg(){for(var t=0;t<Ff.length;t++)Ff[t]._workInProgressVersionPrimary=null;Ff.length=0}var uh=Jr.ReactCurrentDispatcher,Uf=Jr.ReactCurrentBatchConfig,Rs=0,tt=null,vt=null,kt=null,$h=!1,Ol=!1,iu=0,WN=0;function Ot(){throw Error(J(321))}function xg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function wg(t,e,n,r,i,o){if(Rs=o,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uh.current=t===null||t.memoizedState===null?ZN:KN,t=n(r,i),Ol){o=0;do{if(Ol=!1,iu=0,25<=o)throw Error(J(301));o+=1,kt=vt=null,e.updateQueue=null,uh.current=QN,t=n(r,i)}while(Ol)}if(uh.current=Wh,e=vt!==null&&vt.next!==null,Rs=0,kt=vt=tt=null,$h=!1,e)throw Error(J(300));return t}function bg(){var t=iu!==0;return iu=0,t}function or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?tt.memoizedState=kt=t:kt=kt.next=t,kt}function On(){if(vt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=kt===null?tt.memoizedState:kt.next;if(e!==null)kt=e,vt=t;else{if(t===null)throw Error(J(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},kt===null?tt.memoizedState=kt=t:kt=kt.next=t}return kt}function su(t,e){return typeof e=="function"?e(t):e}function Bf(t){var e=On(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var h=l=null,f=null,p=o;do{var v=p.lane;if((Rs&v)===v)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(h=f=y,l=r):f=f.next=y,tt.lanes|=v,js|=v}p=p.next}while(p!==null&&p!==o);f===null?l=r:f.next=h,Jn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=f,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,tt.lanes|=o,js|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $f(t){var e=On(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);Jn(o,e.memoizedState)||(on=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function kw(){}function Nw(t,e){var n=tt,r=On(),i=e(),o=!Jn(r.memoizedState,i);if(o&&(r.memoizedState=i,on=!0),r=r.queue,Eg(Pw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,ou(9,Sw.bind(null,n,r,i,e),void 0,null),Nt===null)throw Error(J(349));Rs&30||Iw(n,e,i)}return i}function Iw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sw(t,e,n,r){e.value=n,e.getSnapshot=r,Cw(e)&&Aw(t)}function Pw(t,e,n){return n(function(){Cw(e)&&Aw(t)})}function Cw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function Aw(t){var e=Hr(t,1);e!==null&&Qn(e,t,1,-1)}function ny(t){var e=or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:t},e.queue=t,t=t.dispatch=GN.bind(null,tt,t),[e.memoizedState,t]}function ou(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rw(){return On().memoizedState}function ch(t,e,n,r){var i=or();tt.flags|=t,i.memoizedState=ou(1|e,n,void 0,r===void 0?null:r)}function Td(t,e,n,r){var i=On();r=r===void 0?null:r;var o=void 0;if(vt!==null){var l=vt.memoizedState;if(o=l.destroy,r!==null&&xg(r,l.deps)){i.memoizedState=ou(e,n,o,r);return}}tt.flags|=t,i.memoizedState=ou(1|e,n,o,r)}function ry(t,e){return ch(8390656,8,t,e)}function Eg(t,e){return Td(2048,8,t,e)}function jw(t,e){return Td(4,2,t,e)}function Lw(t,e){return Td(4,4,t,e)}function Dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ow(t,e,n){return n=n!=null?n.concat([t]):null,Td(4,4,Dw.bind(null,e,t),n)}function Tg(){}function Mw(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vw(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zw(t,e,n){return Rs&21?(Jn(n,e)||(n=Wx(),tt.lanes|=n,js|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function HN(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Uf.transition;Uf.transition={};try{t(!1),e()}finally{Me=n,Uf.transition=r}}function Fw(){return On().memoizedState}function qN(t,e,n){var r=ji(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uw(t))Bw(e,n);else if(n=bw(t,e,n,r),n!==null){var i=Kt();Qn(n,t,r,i),$w(n,e,r)}}function GN(t,e,n){var r=ji(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uw(t))Bw(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(i.hasEagerState=!0,i.eagerState=h,Jn(h,l)){var f=e.interleaved;f===null?(i.next=i,mg(e)):(i.next=f.next,f.next=i),e.interleaved=i;return}}catch{}finally{}n=bw(t,e,i,r),n!==null&&(i=Kt(),Qn(n,t,r,i),$w(n,e,r))}}function Uw(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function Bw(t,e){Ol=$h=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $w(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}var Wh={readContext:Dn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},ZN={readContext:Dn,useCallback:function(t,e){return or().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:ry,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ch(4194308,4,Dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ch(4194308,4,t,e)},useInsertionEffect:function(t,e){return ch(4,2,t,e)},useMemo:function(t,e){var n=or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qN.bind(null,tt,t),[r.memoizedState,t]},useRef:function(t){var e=or();return t={current:t},e.memoizedState=t},useState:ny,useDebugValue:Tg,useDeferredValue:function(t){return or().memoizedState=t},useTransition:function(){var t=ny(!1),e=t[0];return t=HN.bind(null,t[1]),or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tt,i=or();if(Qe){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Nt===null)throw Error(J(349));Rs&30||Iw(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,ry(Pw.bind(null,r,o,t),[t]),r.flags|=2048,ou(9,Sw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=or(),e=Nt.identifierPrefix;if(Qe){var n=Or,r=Dr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=iu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KN={readContext:Dn,useCallback:Mw,useContext:Dn,useEffect:Eg,useImperativeHandle:Ow,useInsertionEffect:jw,useLayoutEffect:Lw,useMemo:Vw,useReducer:Bf,useRef:Rw,useState:function(){return Bf(su)},useDebugValue:Tg,useDeferredValue:function(t){var e=On();return zw(e,vt.memoizedState,t)},useTransition:function(){var t=Bf(su)[0],e=On().memoizedState;return[t,e]},useMutableSource:kw,useSyncExternalStore:Nw,useId:Fw,unstable_isNewReconciler:!1},QN={readContext:Dn,useCallback:Mw,useContext:Dn,useEffect:Eg,useImperativeHandle:Ow,useInsertionEffect:jw,useLayoutEffect:Lw,useMemo:Vw,useReducer:$f,useRef:Rw,useState:function(){return $f(su)},useDebugValue:Tg,useDeferredValue:function(t){var e=On();return vt===null?e.memoizedState=t:zw(e,vt.memoizedState,t)},useTransition:function(){var t=$f(su)[0],e=On().memoizedState;return[t,e]},useMutableSource:kw,useSyncExternalStore:Nw,useId:Fw,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Up(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kd={isMounted:function(t){return(t=t._reactInternals)?Ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=ji(t),o=Fr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ai(t,o,i),e!==null&&(Qn(e,t,i,r),lh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=ji(t),o=Fr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ai(t,o,i),e!==null&&(Qn(e,t,i,r),lh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=ji(t),i=Fr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ai(t,i,r),e!==null&&(Qn(e,t,r,n),lh(e,t,r))}};function iy(t,e,n,r,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!Jl(n,r)||!Jl(i,o):!0}function Ww(t,e,n){var r=!1,i=Ui,o=e.contextType;return typeof o=="object"&&o!==null?o=Dn(o):(i=ln(e)?Cs:$t.current,r=e.contextTypes,o=(r=r!=null)?ta(t,i):Ui),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function sy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kd.enqueueReplaceState(e,e.state,null)}function Bp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Dn(o):(o=ln(e)?Cs:$t.current,i.context=ta(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Up(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kd.enqueueReplaceState(i,i.state,null),Uh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",r=e;do n+=Tk(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Wf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $p(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YN=typeof WeakMap=="function"?WeakMap:Map;function Hw(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qh||(qh=!0,Xp=r),$p(t,e)},n}function qw(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$p(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$p(t,e),typeof r!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function oy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=hI.bind(null,t,e,n),e.then(t,t))}function ay(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ly(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,Ai(n,e,1))),n.lanes|=1),t)}var JN=Jr.ReactCurrentOwner,on=!1;function Zt(t,e,n,r){e.child=t===null?ww(e,null,n,r):ra(e,t.child,n,r)}function uy(t,e,n,r,i){n=n.render;var o=e.ref;return qo(e,i),r=wg(t,e,n,r,o,i),n=bg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qr(t,e,i)):(Qe&&n&&ug(e),e.flags|=1,Zt(t,e,r,i),e.child)}function cy(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Rg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Gw(t,e,o,r,i)):(t=ph(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Jl,n(l,r)&&t.ref===e.ref)return qr(t,e,i)}return e.flags|=1,t=Li(o,r),t.ref=e.ref,t.return=e,e.child=t}function Gw(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Jl(o,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,qr(t,e,i)}return Wp(t,e,n,r,i)}function Zw(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Uo,mn),mn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Uo,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,$e(Uo,mn),mn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,$e(Uo,mn),mn|=r;return Zt(t,e,i,n),e.child}function Kw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wp(t,e,n,r,i){var o=ln(n)?Cs:$t.current;return o=ta(e,o),qo(e,i),n=wg(t,e,n,r,o,i),r=bg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qr(t,e,i)):(Qe&&r&&ug(e),e.flags|=1,Zt(t,e,n,i),e.child)}function hy(t,e,n,r,i){if(ln(n)){var o=!0;Oh(e)}else o=!1;if(qo(e,i),e.stateNode===null)hh(t,e),Ww(e,n,r),Bp(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var f=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=Dn(p):(p=ln(n)?Cs:$t.current,p=ta(e,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==r||f!==p)&&sy(e,l,r,p),vi=!1;var w=e.memoizedState;l.state=w,Uh(e,r,l,i),f=e.memoizedState,h!==r||w!==f||an.current||vi?(typeof v=="function"&&(Up(e,n,v,r),f=e.memoizedState),(h=vi||iy(e,n,h,r,w,f,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),l.props=r,l.state=f,l.context=p,r=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Ew(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Wn(e.type,h),l.props=p,y=e.pendingProps,w=l.context,f=n.contextType,typeof f=="object"&&f!==null?f=Dn(f):(f=ln(n)?Cs:$t.current,f=ta(e,f));var E=n.getDerivedStateFromProps;(v=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||w!==f)&&sy(e,l,r,f),vi=!1,w=e.memoizedState,l.state=w,Uh(e,r,l,i);var j=e.memoizedState;h!==y||w!==j||an.current||vi?(typeof E=="function"&&(Up(e,n,E,r),j=e.memoizedState),(p=vi||iy(e,n,p,r,w,j,f)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,j,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,j,f)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),l.props=r,l.state=j,l.context=f,r=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Hp(t,e,n,r,o,i)}function Hp(t,e,n,r,i,o){Kw(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Q_(e,n,!1),qr(t,e,o);r=e.stateNode,JN.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=ra(e,t.child,null,o),e.child=ra(e,null,h,o)):Zt(t,e,h,o),e.memoizedState=r.state,i&&Q_(e,n,!0),e.child}function Qw(t){var e=t.stateNode;e.pendingContext?K_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&K_(t,e.context,!1),vg(t,e.containerInfo)}function dy(t,e,n,r,i){return na(),hg(i),e.flags|=256,Zt(t,e,n,r),e.child}var qp={dehydrated:null,treeContext:null,retryLane:0};function Gp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var r=e.pendingProps,i=Xe.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(i&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(Xe,i&1),t===null)return zp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Sd(l,r,0,null),t=Ns(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Gp(n),e.memoizedState=qp,t):kg(e,l));if(i=t.memoizedState,i!==null&&(h=i.dehydrated,h!==null))return XN(t,e,l,r,h,i,n);if(o){o=r.fallback,l=e.mode,i=t.child,h=i.sibling;var f={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=f,e.deletions=null):(r=Li(i,f),r.subtreeFlags=i.subtreeFlags&14680064),h!==null?o=Li(h,o):(o=Ns(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?Gp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=qp,r}return o=t.child,t=o.sibling,r=Li(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kg(t,e){return e=Sd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hc(t,e,n,r){return r!==null&&hg(r),ra(e,t.child,null,n),t=kg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XN(t,e,n,r,i,o,l){if(n)return e.flags&256?(e.flags&=-257,r=Wf(Error(J(422))),Hc(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Sd({mode:"visible",children:r.children},i,0,null),o=Ns(o,i,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ra(e,t.child,null,l),e.child.memoizedState=Gp(l),e.memoizedState=qp,o);if(!(e.mode&1))return Hc(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(J(419)),r=Wf(o,r,void 0),Hc(t,e,l,r)}if(h=(l&t.childLanes)!==0,on||h){if(r=Nt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Hr(t,i),Qn(r,t,i,-1))}return Ag(),r=Wf(Error(J(421))),Hc(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dI.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,gn=Ci(i.nextSibling),_n=e,Qe=!0,Gn=null,t!==null&&(Cn[An++]=Dr,Cn[An++]=Or,Cn[An++]=As,Dr=t.id,Or=t.overflow,As=e),e=kg(e,r.children),e.flags|=4096,e)}function fy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fp(t.return,e,n)}function Hf(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Jw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Zt(t,e,r.children,n),r=Xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,n,e);else if(t.tag===19)fy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hf(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hf(e,!0,n,null,o);break;case"together":Hf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),js|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eI(t,e,n){switch(e.tag){case 3:Qw(e),na();break;case 5:Tw(e);break;case 1:ln(e.type)&&Oh(e);break;case 4:vg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$e(zh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):($e(Xe,Xe.current&1),t=qr(t,e,n),t!==null?t.sibling:null);$e(Xe,Xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(Xe,Xe.current),r)break;return null;case 22:case 23:return e.lanes=0,Zw(t,e,n)}return qr(t,e,n)}var Xw,Zp,eb,tb;Xw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zp=function(){};eb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bs(cr.current);var o=null;switch(n){case"input":i=gp(t,i),r=gp(t,r),o=[];break;case"select":i=nt({},i,{value:void 0}),r=nt({},r,{value:void 0}),o=[];break;case"textarea":i=yp(t,i),r=yp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lh)}wp(n,r);var l;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var h=i[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Hl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var f=r[p];if(h=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&f!==h&&(f!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in f)f.hasOwnProperty(l)&&h[l]!==f[l]&&(n||(n={}),n[l]=f[l])}else n||(o||(o=[]),o.push(p,n)),n=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(o=o||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Hl.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&He("scroll",t),o||h===f||(o=[])):(o=o||[]).push(p,f))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};tb=function(t,e,n,r){n!==r&&(e.flags|=4)};function _l(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tI(t,e,n){var r=e.pendingProps;switch(cg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return ln(e.type)&&Dh(),Mt(e),null;case 3:return r=e.stateNode,ia(),Ge(an),Ge($t),yg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($c(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(nm(Gn),Gn=null))),Zp(t,e),Mt(e),null;case 5:_g(e);var i=bs(ru.current);if(n=e.type,t!==null&&e.stateNode!=null)eb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Mt(e),null}if(t=bs(cr.current),$c(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ar]=e,r[tu]=o,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<Tl.length;i++)He(Tl[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":b_(r,o),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},He("invalid",r);break;case"textarea":T_(r,o),He("invalid",r)}wp(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&Bc(r.textContent,h,t),i=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&Bc(r.textContent,h,t),i=["children",""+h]):Hl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&He("scroll",r)}switch(n){case"input":Lc(r),E_(r,o,!0);break;case"textarea":Lc(r),k_(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Lh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Px(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[ar]=e,t[tu]=r,Xw(t,e,!1,!1),e.stateNode=t;e:{switch(l=bp(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<Tl.length;i++)He(Tl[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":b_(t,r),i=gp(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=nt({},r,{value:void 0}),He("invalid",t);break;case"textarea":T_(t,r),i=yp(t,r),He("invalid",t);break;default:i=r}wp(n,i),h=i;for(o in h)if(h.hasOwnProperty(o)){var f=h[o];o==="style"?Rx(t,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Cx(t,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&ql(t,f):typeof f=="number"&&ql(t,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hl.hasOwnProperty(o)?f!=null&&o==="onScroll"&&He("scroll",t):f!=null&&Km(t,o,f,l))}switch(n){case"input":Lc(t),E_(t,r,!1);break;case"textarea":Lc(t),k_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Bo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Bo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Lh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)tb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=bs(ru.current),bs(cr.current),$c(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(o=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:Bc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ge(Xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&gn!==null&&e.mode&1&&!(e.flags&128))yw(),na(),e.flags|=98560,o=!1;else if(o=$c(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[ar]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),o=!1}else Gn!==null&&(nm(Gn),Gn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?_t===0&&(_t=3):Ag())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return ia(),Zp(t,e),t===null&&Xl(e.stateNode.containerInfo),Mt(e),null;case 10:return pg(e.type._context),Mt(e),null;case 17:return ln(e.type)&&Dh(),Mt(e),null;case 19:if(Ge(Xe),o=e.memoizedState,o===null)return Mt(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)_l(o,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Bh(t),l!==null){for(e.flags|=128,_l(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Xe,Xe.current&1|2),e.child}t=t.sibling}o.tail!==null&&ut()>oa&&(e.flags|=128,r=!0,_l(o,!1),e.lanes=4194304)}else{if(!r)if(t=Bh(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_l(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Qe)return Mt(e),null}else 2*ut()-o.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,r=!0,_l(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ut(),e.sibling=null,n=Xe.current,$e(Xe,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return Cg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function nI(t,e){switch(cg(e),e.tag){case 1:return ln(e.type)&&Dh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ia(),Ge(an),Ge($t),yg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _g(e),null;case 13:if(Ge(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Xe),null;case 4:return ia(),null;case 10:return pg(e.type._context),null;case 22:case 23:return Cg(),null;case 24:return null;default:return null}}var qc=!1,Ft=!1,rI=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Fo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function Kp(t,e,n){try{n()}catch(r){st(t,e,r)}}var py=!1;function iI(t,e){if(Rp=Ah,t=ow(),lg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,f=-1,p=0,v=0,y=t,w=null;t:for(;;){for(var E;y!==n||i!==0&&y.nodeType!==3||(h=l+i),y!==o||r!==0&&y.nodeType!==3||(f=l+r),y.nodeType===3&&(l+=y.nodeValue.length),(E=y.firstChild)!==null;)w=y,y=E;for(;;){if(y===t)break t;if(w===n&&++p===i&&(h=l),w===o&&++v===r&&(f=l),(E=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=E}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(jp={focusedElem:t,selectionRange:n},Ah=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var S=j.memoizedProps,M=j.memoizedState,C=e.stateNode,N=C.getSnapshotBeforeUpdate(e.elementType===e.type?S:Wn(e.type,S),M);C.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(U){st(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return j=py,py=!1,j}function Ml(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Kp(e,n,o)}i=i.next}while(i!==r)}}function Nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nb(t){var e=t.alternate;e!==null&&(t.alternate=null,nb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[tu],delete e[Op],delete e[FN],delete e[UN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rb(t){return t.tag===5||t.tag===3||t.tag===4}function my(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lh));else if(r!==4&&(t=t.child,t!==null))for(Yp(t,e,n),t=t.sibling;t!==null;)Yp(t,e,n),t=t.sibling}function Jp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jp(t,e,n),t=t.sibling;t!==null;)Jp(t,e,n),t=t.sibling}var St=null,qn=!1;function fi(t,e,n){for(n=n.child;n!==null;)ib(t,e,n),n=n.sibling}function ib(t,e,n){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(_d,n)}catch{}switch(n.tag){case 5:Ft||Fo(n,e);case 6:var r=St,i=qn;St=null,fi(t,e,n),St=r,qn=i,St!==null&&(qn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(qn?(t=St,n=n.stateNode,t.nodeType===8?Vf(t.parentNode,n):t.nodeType===1&&Vf(t,n),Ql(t)):Vf(St,n.stateNode));break;case 4:r=St,i=qn,St=n.stateNode.containerInfo,qn=!0,fi(t,e,n),St=r,qn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Kp(n,e,l),i=i.next}while(i!==r)}fi(t,e,n);break;case 1:if(!Ft&&(Fo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){st(n,e,h)}fi(t,e,n);break;case 21:fi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,fi(t,e,n),Ft=r):fi(t,e,n);break;default:fi(t,e,n)}}function gy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rI),e.forEach(function(r){var i=fI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:St=h.stateNode,qn=!1;break e;case 3:St=h.stateNode.containerInfo,qn=!0;break e;case 4:St=h.stateNode.containerInfo,qn=!0;break e}h=h.return}if(St===null)throw Error(J(160));ib(o,l,i),St=null,qn=!1;var f=i.alternate;f!==null&&(f.return=null),i.return=null}catch(p){st(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sb(e,t),e=e.sibling}function sb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),sr(t),r&4){try{Ml(3,t,t.return),Nd(3,t)}catch(S){st(t,t.return,S)}try{Ml(5,t,t.return)}catch(S){st(t,t.return,S)}}break;case 1:$n(e,t),sr(t),r&512&&n!==null&&Fo(n,n.return);break;case 5:if($n(e,t),sr(t),r&512&&n!==null&&Fo(n,n.return),t.flags&32){var i=t.stateNode;try{ql(i,"")}catch(S){st(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Ix(i,o),bp(h,l);var p=bp(h,o);for(l=0;l<f.length;l+=2){var v=f[l],y=f[l+1];v==="style"?Rx(i,y):v==="dangerouslySetInnerHTML"?Cx(i,y):v==="children"?ql(i,y):Km(i,v,y,p)}switch(h){case"input":vp(i,o);break;case"textarea":Sx(i,o);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Bo(i,!!o.multiple,E,!1):w!==!!o.multiple&&(o.defaultValue!=null?Bo(i,!!o.multiple,o.defaultValue,!0):Bo(i,!!o.multiple,o.multiple?[]:"",!1))}i[tu]=o}catch(S){st(t,t.return,S)}}break;case 6:if($n(e,t),sr(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(S){st(t,t.return,S)}}break;case 3:if($n(e,t),sr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ql(e.containerInfo)}catch(S){st(t,t.return,S)}break;case 4:$n(e,t),sr(t);break;case 13:$n(e,t),sr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Sg=ut())),r&4&&gy(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(p=Ft)||v,$n(e,t),Ft=p):$n(e,t),sr(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(ie=t,v=t.child;v!==null;){for(y=ie=v;ie!==null;){switch(w=ie,E=w.child,w.tag){case 0:case 11:case 14:case 15:Ml(4,w,w.return);break;case 1:Fo(w,w.return);var j=w.stateNode;if(typeof j.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(S){st(r,n,S)}}break;case 5:Fo(w,w.return);break;case 22:if(w.memoizedState!==null){_y(y);continue}}E!==null?(E.return=w,ie=E):_y(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{i=y.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,f=y.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=Ax("display",l))}catch(S){st(t,t.return,S)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(S){st(t,t.return,S)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:$n(e,t),sr(t),r&4&&gy(t);break;case 21:break;default:$n(e,t),sr(t)}}function sr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rb(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ql(i,""),r.flags&=-33);var o=my(t);Jp(t,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,h=my(t);Yp(t,h,l);break;default:throw Error(J(161))}}catch(f){st(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sI(t,e,n){ie=t,ob(t)}function ob(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||qc;if(!l){var h=i.alternate,f=h!==null&&h.memoizedState!==null||Ft;h=qc;var p=Ft;if(qc=l,(Ft=f)&&!p)for(ie=i;ie!==null;)l=ie,f=l.child,l.tag===22&&l.memoizedState!==null?yy(i):f!==null?(f.return=l,ie=f):yy(i);for(;o!==null;)ie=o,ob(o),o=o.sibling;ie=i,qc=h,Ft=p}vy(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ie=o):vy(t)}}function vy(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Nd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ty(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ty(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&Ql(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Ft||e.flags&512&&Qp(e)}catch(w){st(e,e.return,w)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function _y(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function yy(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nd(4,e)}catch(f){st(e,n,f)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(f){st(e,i,f)}}var o=e.return;try{Qp(e)}catch(f){st(e,o,f)}break;case 5:var l=e.return;try{Qp(e)}catch(f){st(e,l,f)}}}catch(f){st(e,e.return,f)}if(e===t){ie=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ie=h;break}ie=e.return}}var oI=Math.ceil,Hh=Jr.ReactCurrentDispatcher,Ng=Jr.ReactCurrentOwner,Ln=Jr.ReactCurrentBatchConfig,Re=0,Nt=null,pt=null,Rt=0,mn=0,Uo=Ki(0),_t=0,au=null,js=0,Id=0,Ig=0,Vl=null,rn=null,Sg=0,oa=1/0,Ar=null,qh=!1,Xp=null,Ri=null,Gc=!1,Ti=null,Gh=0,zl=0,em=null,dh=-1,fh=0;function Kt(){return Re&6?ut():dh!==-1?dh:dh=ut()}function ji(t){return t.mode&1?Re&2&&Rt!==0?Rt&-Rt:$N.transition!==null?(fh===0&&(fh=Wx()),fh):(t=Me,t!==0||(t=window.event,t=t===void 0?16:Yx(t.type)),t):1}function Qn(t,e,n,r){if(50<zl)throw zl=0,em=null,Error(J(185));Iu(t,n,r),(!(Re&2)||t!==Nt)&&(t===Nt&&(!(Re&2)&&(Id|=n),_t===4&&yi(t,Rt)),un(t,r),n===1&&Re===0&&!(e.mode&1)&&(oa=ut()+500,Ed&&Qi()))}function un(t,e){var n=t.callbackNode;$k(t,e);var r=Ch(t,t===Nt?Rt:0);if(r===0)n!==null&&S_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&S_(n),e===1)t.tag===0?BN(xy.bind(null,t)):gw(xy.bind(null,t)),VN(function(){!(Re&6)&&Qi()}),n=null;else{switch(Hx(r)){case 1:n=eg;break;case 4:n=Bx;break;case 16:n=Ph;break;case 536870912:n=$x;break;default:n=Ph}n=pb(n,ab.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ab(t,e){if(dh=-1,fh=0,Re&6)throw Error(J(327));var n=t.callbackNode;if(Go()&&t.callbackNode!==n)return null;var r=Ch(t,t===Nt?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zh(t,r);else{e=r;var i=Re;Re|=2;var o=ub();(Nt!==t||Rt!==e)&&(Ar=null,oa=ut()+500,ks(t,e));do try{uI();break}catch(h){lb(t,h)}while(!0);fg(),Hh.current=o,Re=i,pt!==null?e=0:(Nt=null,Rt=0,e=_t)}if(e!==0){if(e===2&&(i=Ip(t),i!==0&&(r=i,e=tm(t,i))),e===1)throw n=au,ks(t,0),yi(t,r),un(t,ut()),n;if(e===6)yi(t,r);else{if(i=t.current.alternate,!(r&30)&&!aI(i)&&(e=Zh(t,r),e===2&&(o=Ip(t),o!==0&&(r=o,e=tm(t,o))),e===1))throw n=au,ks(t,0),yi(t,r),un(t,ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:vs(t,rn,Ar);break;case 3:if(yi(t,r),(r&130023424)===r&&(e=Sg+500-ut(),10<e)){if(Ch(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Dp(vs.bind(null,t,rn,Ar),e);break}vs(t,rn,Ar);break;case 4:if(yi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Kn(r);o=1<<l,l=e[l],l>i&&(i=l),r&=~o}if(r=i,r=ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oI(r/1960))-r,10<r){t.timeoutHandle=Dp(vs.bind(null,t,rn,Ar),r);break}vs(t,rn,Ar);break;case 5:vs(t,rn,Ar);break;default:throw Error(J(329))}}}return un(t,ut()),t.callbackNode===n?ab.bind(null,t):null}function tm(t,e){var n=Vl;return t.current.memoizedState.isDehydrated&&(ks(t,e).flags|=256),t=Zh(t,e),t!==2&&(e=rn,rn=n,e!==null&&nm(e)),t}function nm(t){rn===null?rn=t:rn.push.apply(rn,t)}function aI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Jn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yi(t,e){for(e&=~Ig,e&=~Id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function xy(t){if(Re&6)throw Error(J(327));Go();var e=Ch(t,0);if(!(e&1))return un(t,ut()),null;var n=Zh(t,e);if(t.tag!==0&&n===2){var r=Ip(t);r!==0&&(e=r,n=tm(t,r))}if(n===1)throw n=au,ks(t,0),yi(t,e),un(t,ut()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vs(t,rn,Ar),un(t,ut()),null}function Pg(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(oa=ut()+500,Ed&&Qi())}}function Ls(t){Ti!==null&&Ti.tag===0&&!(Re&6)&&Go();var e=Re;Re|=1;var n=Ln.transition,r=Me;try{if(Ln.transition=null,Me=1,t)return t()}finally{Me=r,Ln.transition=n,Re=e,!(Re&6)&&Qi()}}function Cg(){mn=Uo.current,Ge(Uo)}function ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MN(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(cg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dh();break;case 3:ia(),Ge(an),Ge($t),yg();break;case 5:_g(r);break;case 4:ia();break;case 13:Ge(Xe);break;case 19:Ge(Xe);break;case 10:pg(r.type._context);break;case 22:case 23:Cg()}n=n.return}if(Nt=t,pt=t=Li(t.current,null),Rt=mn=e,_t=0,au=null,Ig=Id=js=0,rn=Vl=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}ws=null}return t}function lb(t,e){do{var n=pt;try{if(fg(),uh.current=Wh,$h){for(var r=tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$h=!1}if(Rs=0,kt=vt=tt=null,Ol=!1,iu=0,Ng.current=null,n===null||n.return===null){_t=1,au=e,pt=null;break}e:{var o=t,l=n.return,h=n,f=e;if(e=Rt,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var w=v.alternate;w?(v.updateQueue=w.updateQueue,v.memoizedState=w.memoizedState,v.lanes=w.lanes):(v.updateQueue=null,v.memoizedState=null)}var E=ay(l);if(E!==null){E.flags&=-257,ly(E,l,h,o,e),E.mode&1&&oy(o,p,e),e=E,f=p;var j=e.updateQueue;if(j===null){var S=new Set;S.add(f),e.updateQueue=S}else j.add(f);break e}else{if(!(e&1)){oy(o,p,e),Ag();break e}f=Error(J(426))}}else if(Qe&&h.mode&1){var M=ay(l);if(M!==null){!(M.flags&65536)&&(M.flags|=256),ly(M,l,h,o,e),hg(sa(f,h));break e}}o=f=sa(f,h),_t!==4&&(_t=2),Vl===null?Vl=[o]:Vl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=Hw(o,f,e);ey(o,C);break e;case 1:h=f;var N=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof N.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Ri===null||!Ri.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var U=qw(o,h,e);ey(o,U);break e}}o=o.return}while(o!==null)}hb(n)}catch(q){e=q,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function ub(){var t=Hh.current;return Hh.current=Wh,t===null?Wh:t}function Ag(){(_t===0||_t===3||_t===2)&&(_t=4),Nt===null||!(js&268435455)&&!(Id&268435455)||yi(Nt,Rt)}function Zh(t,e){var n=Re;Re|=2;var r=ub();(Nt!==t||Rt!==e)&&(Ar=null,ks(t,e));do try{lI();break}catch(i){lb(t,i)}while(!0);if(fg(),Re=n,Hh.current=r,pt!==null)throw Error(J(261));return Nt=null,Rt=0,_t}function lI(){for(;pt!==null;)cb(pt)}function uI(){for(;pt!==null&&!Lk();)cb(pt)}function cb(t){var e=fb(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?hb(t):pt=e,Ng.current=null}function hb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nI(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,pt=null;return}}else if(n=tI(n,e,mn),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);_t===0&&(_t=5)}function vs(t,e,n){var r=Me,i=Ln.transition;try{Ln.transition=null,Me=1,cI(t,e,n,r)}finally{Ln.transition=i,Me=r}return null}function cI(t,e,n,r){do Go();while(Ti!==null);if(Re&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Wk(t,o),t===Nt&&(pt=Nt=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gc||(Gc=!0,pb(Ph,function(){return Go(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ln.transition,Ln.transition=null;var l=Me;Me=1;var h=Re;Re|=4,Ng.current=null,iI(t,n),sb(n,t),CN(jp),Ah=!!Rp,jp=Rp=null,t.current=n,sI(n),Dk(),Re=h,Me=l,Ln.transition=o}else t.current=n;if(Gc&&(Gc=!1,Ti=t,Gh=i),o=t.pendingLanes,o===0&&(Ri=null),Vk(n.stateNode),un(t,ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qh)throw qh=!1,t=Xp,Xp=null,t;return Gh&1&&t.tag!==0&&Go(),o=t.pendingLanes,o&1?t===em?zl++:(zl=0,em=t):zl=0,Qi(),null}function Go(){if(Ti!==null){var t=Hx(Gh),e=Ln.transition,n=Me;try{if(Ln.transition=null,Me=16>t?16:t,Ti===null)var r=!1;else{if(t=Ti,Ti=null,Gh=0,Re&6)throw Error(J(331));var i=Re;for(Re|=4,ie=t.current;ie!==null;){var o=ie,l=o.child;if(ie.flags&16){var h=o.deletions;if(h!==null){for(var f=0;f<h.length;f++){var p=h[f];for(ie=p;ie!==null;){var v=ie;switch(v.tag){case 0:case 11:case 15:Ml(8,v,o)}var y=v.child;if(y!==null)y.return=v,ie=y;else for(;ie!==null;){v=ie;var w=v.sibling,E=v.return;if(nb(v),v===p){ie=null;break}if(w!==null){w.return=E,ie=w;break}ie=E}}}var j=o.alternate;if(j!==null){var S=j.child;if(S!==null){j.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}ie=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ie=l;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ml(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,ie=C;break e}ie=o.return}}var N=t.current;for(ie=N;ie!==null;){l=ie;var R=l.child;if(l.subtreeFlags&2064&&R!==null)R.return=l,ie=R;else e:for(l=N;ie!==null;){if(h=ie,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Nd(9,h)}}catch(q){st(h,h.return,q)}if(h===l){ie=null;break e}var U=h.sibling;if(U!==null){U.return=h.return,ie=U;break e}ie=h.return}}if(Re=i,Qi(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(_d,t)}catch{}r=!0}return r}finally{Me=n,Ln.transition=e}}return!1}function wy(t,e,n){e=sa(n,e),e=Hw(t,e,1),t=Ai(t,e,1),e=Kt(),t!==null&&(Iu(t,1,e),un(t,e))}function st(t,e,n){if(t.tag===3)wy(t,t,n);else for(;e!==null;){if(e.tag===3){wy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ri===null||!Ri.has(r))){t=sa(n,t),t=qw(e,t,1),e=Ai(e,t,1),t=Kt(),e!==null&&(Iu(e,1,t),un(e,t));break}}e=e.return}}function hI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(Rt&n)===n&&(_t===4||_t===3&&(Rt&130023424)===Rt&&500>ut()-Sg?ks(t,0):Ig|=n),un(t,e)}function db(t,e){e===0&&(t.mode&1?(e=Mc,Mc<<=1,!(Mc&130023424)&&(Mc=4194304)):e=1);var n=Kt();t=Hr(t,e),t!==null&&(Iu(t,e,n),un(t,n))}function dI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),db(t,n)}function fI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),db(t,n)}var fb;fb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,eI(t,e,n);on=!!(t.flags&131072)}else on=!1,Qe&&e.flags&1048576&&vw(e,Vh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hh(t,e),t=e.pendingProps;var i=ta(e,$t.current);qo(e,n),i=wg(null,e,r,t,i,n);var o=bg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(o=!0,Oh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gg(e),i.updater=kd,e.stateNode=i,i._reactInternals=e,Bp(e,r,t,n),e=Hp(null,e,r,!0,o,n)):(e.tag=0,Qe&&o&&ug(e),Zt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mI(r),t=Wn(r,t),i){case 0:e=Wp(null,e,r,t,n);break e;case 1:e=hy(null,e,r,t,n);break e;case 11:e=uy(null,e,r,t,n);break e;case 14:e=cy(null,e,r,Wn(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),Wp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),hy(t,e,r,i,n);case 3:e:{if(Qw(e),t===null)throw Error(J(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Ew(t,e),Uh(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=sa(Error(J(423)),e),e=dy(t,e,r,n,i);break e}else if(r!==i){i=sa(Error(J(424)),e),e=dy(t,e,r,n,i);break e}else for(gn=Ci(e.stateNode.containerInfo.firstChild),_n=e,Qe=!0,Gn=null,n=ww(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),r===i){e=qr(t,e,n);break e}Zt(t,e,r,n)}e=e.child}return e;case 5:return Tw(e),t===null&&zp(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,Lp(r,i)?l=null:o!==null&&Lp(r,o)&&(e.flags|=32),Kw(t,e),Zt(t,e,l,n),e.child;case 6:return t===null&&zp(e),null;case 13:return Yw(t,e,n);case 4:return vg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ra(e,null,r,n):Zt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),uy(t,e,r,i,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,$e(zh,r._currentValue),r._currentValue=l,o!==null)if(Jn(o.value,l)){if(o.children===i.children&&!an.current){e=qr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var f=h.firstContext;f!==null;){if(f.context===r){if(o.tag===1){f=Fr(-1,n&-n),f.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?f.next=f:(f.next=v.next,v.next=f),p.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),Fp(o.return,n,e),h.lanes|=n;break}f=f.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(J(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Fp(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Zt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qo(e,n),i=Dn(i),r=r(i),e.flags|=1,Zt(t,e,r,n),e.child;case 14:return r=e.type,i=Wn(r,e.pendingProps),i=Wn(r.type,i),cy(t,e,r,i,n);case 15:return Gw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),hh(t,e),e.tag=1,ln(r)?(t=!0,Oh(e)):t=!1,qo(e,n),Ww(e,r,i),Bp(e,r,i,n),Hp(null,e,r,!0,t,n);case 19:return Jw(t,e,n);case 22:return Zw(t,e,n)}throw Error(J(156,e.tag))};function pb(t,e){return Ux(t,e)}function pI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new pI(t,e,n,r)}function Rg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mI(t){if(typeof t=="function")return Rg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ym)return 11;if(t===Jm)return 14}return 2}function Li(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ph(t,e,n,r,i,o){var l=2;if(r=t,typeof t=="function")Rg(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ao:return Ns(n.children,i,o,e);case Qm:l=8,i|=8;break;case dp:return t=Rn(12,n,e,i|2),t.elementType=dp,t.lanes=o,t;case fp:return t=Rn(13,n,e,i),t.elementType=fp,t.lanes=o,t;case pp:return t=Rn(19,n,e,i),t.elementType=pp,t.lanes=o,t;case Tx:return Sd(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bx:l=10;break e;case Ex:l=9;break e;case Ym:l=11;break e;case Jm:l=14;break e;case gi:l=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Rn(l,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ns(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function Sd(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=Tx,t.lanes=n,t.stateNode={isHidden:!1},t}function qf(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function Gf(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=If(0),this.expirationTimes=If(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=If(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jg(t,e,n,r,i,o,l,h,f){return t=new gI(t,e,n,h,f),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Rn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gg(o),t}function vI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mb(t){if(!t)return Ui;t=t._reactInternals;e:{if(Ws(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(ln(n))return mw(t,n,e)}return e}function gb(t,e,n,r,i,o,l,h,f){return t=jg(n,r,!0,t,i,o,l,h,f),t.context=mb(null),n=t.current,r=Kt(),i=ji(n),o=Fr(r,i),o.callback=e??null,Ai(n,o,i),t.current.lanes=i,Iu(t,i,r),un(t,r),t}function Pd(t,e,n,r){var i=e.current,o=Kt(),l=ji(i);return n=mb(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ai(i,e,l),t!==null&&(Qn(t,i,l,o),lh(t,i,l)),l}function Kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function by(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lg(t,e){by(t,e),(t=t.alternate)&&by(t,e)}function _I(){return null}var vb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dg(t){this._internalRoot=t}Cd.prototype.render=Dg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Pd(t,e,null,null)};Cd.prototype.unmount=Dg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){Pd(null,t,null,null)}),e[Wr]=null}};function Cd(t){this._internalRoot=t}Cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_i.length&&e!==0&&e<_i[n].priority;n++);_i.splice(n,0,t),n===0&&Qx(t)}};function Og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ey(){}function yI(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var p=Kh(l);o.call(p)}}var l=gb(e,r,t,0,null,!1,!1,"",Ey);return t._reactRootContainer=l,t[Wr]=l.current,Xl(t.nodeType===8?t.parentNode:t),Ls(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var h=r;r=function(){var p=Kh(f);h.call(p)}}var f=jg(t,0,!1,null,null,!1,!1,"",Ey);return t._reactRootContainer=f,t[Wr]=f.current,Xl(t.nodeType===8?t.parentNode:t),Ls(function(){Pd(e,f,n,r)}),f}function Rd(t,e,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var h=i;i=function(){var f=Kh(l);h.call(f)}}Pd(e,l,t,i)}else l=yI(n,e,t,i,r);return Kh(l)}qx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=El(e.pendingLanes);n!==0&&(tg(e,n|1),un(e,ut()),!(Re&6)&&(oa=ut()+500,Qi()))}break;case 13:Ls(function(){var r=Hr(t,1);if(r!==null){var i=Kt();Qn(r,t,1,i)}}),Lg(t,1)}};ng=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var n=Kt();Qn(e,t,134217728,n)}Lg(t,134217728)}};Gx=function(t){if(t.tag===13){var e=ji(t),n=Hr(t,e);if(n!==null){var r=Kt();Qn(n,t,e,r)}Lg(t,e)}};Zx=function(){return Me};Kx=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Tp=function(t,e,n){switch(e){case"input":if(vp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=bd(r);if(!i)throw Error(J(90));Nx(r),vp(r,i)}}}break;case"textarea":Sx(t,n);break;case"select":e=n.value,e!=null&&Bo(t,!!n.multiple,e,!1)}};Dx=Pg;Ox=Ls;var xI={usingClientEntryPoint:!1,Events:[Pu,Do,bd,jx,Lx,Pg]},yl={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wI={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zx(t),t===null?null:t.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||_I,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{_d=Zc.inject(wI),ur=Zc}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xI;xn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Og(e))throw Error(J(200));return vI(t,e,null,n)};xn.createRoot=function(t,e){if(!Og(t))throw Error(J(299));var n=!1,r="",i=vb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jg(t,1,!1,null,null,n,!1,r,i),t[Wr]=e.current,Xl(t.nodeType===8?t.parentNode:t),new Dg(e)};xn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=zx(e),t=t===null?null:t.stateNode,t};xn.flushSync=function(t){return Ls(t)};xn.hydrate=function(t,e,n){if(!Ad(e))throw Error(J(200));return Rd(null,t,e,!0,n)};xn.hydrateRoot=function(t,e,n){if(!Og(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=vb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=gb(e,null,t,1,n??null,i,!1,o,l),t[Wr]=e.current,Xl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cd(e)};xn.render=function(t,e,n){if(!Ad(e))throw Error(J(200));return Rd(null,t,e,!1,n)};xn.unmountComponentAtNode=function(t){if(!Ad(t))throw Error(J(40));return t._reactRootContainer?(Ls(function(){Rd(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};xn.unstable_batchedUpdates=Pg;xn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ad(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Rd(t,e,n,!1,r)};xn.version="18.3.1-next-f1338f8080-20240426";function _b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_b)}catch(t){console.error(t)}}_b(),_x.exports=xn;var yb=_x.exports,Ty=yb;cp.createRoot=Ty.createRoot,cp.hydrateRoot=Ty.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lu.apply(this,arguments)}var ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ki||(ki={}));const ky="popstate";function bI(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:l,hash:h}=r.location;return rm("",{pathname:o,search:l,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:xb(i)}return TI(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EI(){return Math.random().toString(36).substr(2,8)}function Ny(t,e){return{usr:t.state,key:t.key,idx:e}}function rm(t,e,n,r){return n===void 0&&(n=null),lu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wa(e):e,{state:n,key:e&&e.key||r||EI()})}function xb(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function TI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,h=ki.Pop,f=null,p=v();p==null&&(p=0,l.replaceState(lu({},l.state,{idx:p}),""));function v(){return(l.state||{idx:null}).idx}function y(){h=ki.Pop;let M=v(),C=M==null?null:M-p;p=M,f&&f({action:h,location:S.location,delta:C})}function w(M,C){h=ki.Push;let N=rm(S.location,M,C);p=v()+1;let R=Ny(N,p),U=S.createHref(N);try{l.pushState(R,"",U)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(U)}o&&f&&f({action:h,location:S.location,delta:1})}function E(M,C){h=ki.Replace;let N=rm(S.location,M,C);p=v();let R=Ny(N,p),U=S.createHref(N);l.replaceState(R,"",U),o&&f&&f({action:h,location:S.location,delta:0})}function j(M){let C=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof M=="string"?M:xb(M);return N=N.replace(/ $/,"%20"),yt(C,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,C)}let S={get action(){return h},get location(){return t(i,l)},listen(M){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(ky,y),f=M,()=>{i.removeEventListener(ky,y),f=null}},createHref(M){return e(i,M)},createURL:j,encodeLocation(M){let C=j(M);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:E,go(M){return l.go(M)}};return S}var Iy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Iy||(Iy={}));function kI(t,e,n){return n===void 0&&(n="/"),NI(t,e,n)}function NI(t,e,n,r){let i=typeof e=="string"?wa(e):e,o=Eb(i.pathname||"/",n);if(o==null)return null;let l=wb(t);II(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let p=zI(o);h=OI(l[f],p)}return h}function wb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};f.relativePath.startsWith("/")&&(yt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=Is([r,f.relativePath]),v=n.concat(f);o.children&&o.children.length>0&&(yt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),wb(o.children,e,v,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:LI(p,o.index),routesMeta:v})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,l);else for(let f of bb(o.path))i(o,l,f)}),e}function bb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=bb(r.join("/")),h=[];return h.push(...l.map(f=>f===""?o:[o,f].join("/"))),i&&h.push(...l),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function II(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SI=/^:[\w-]+$/,PI=3,CI=2,AI=1,RI=10,jI=-2,Sy=t=>t==="*";function LI(t,e){let n=t.split("/"),r=n.length;return n.some(Sy)&&(r+=jI),e&&(r+=CI),n.filter(i=>!Sy(i)).reduce((i,o)=>i+(SI.test(o)?PI:o===""?AI:RI),r)}function DI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function OI(t,e,n){let{routesMeta:r}=t,i={},o="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,v=o==="/"?e:e.slice(o.length)||"/",y=MI({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),w=f.route;if(!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Is([o,y.pathname]),pathnameBase:qI(Is([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=Is([o,y.pathnameBase]))}return l}function MI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((p,v,y)=>{let{paramName:w,isOptional:E}=v;if(w==="*"){let S=h[y]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const j=h[y];return E&&!j?p[w]=void 0:p[w]=(j||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function VI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Eb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const FI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UI=t=>FI.test(t);function BI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?wa(t):t,o;if(n)if(UI(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Mg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=Py(n.substring(1),"/"):o=Py(n,e)}else o=e;return{pathname:o,search:GI(r),hash:ZI(i)}}function Py(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $I(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function WI(t,e){let n=$I(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function HI(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=wa(t):(i=lu({},t),yt(!i.pathname||!i.pathname.includes("?"),Zf("?","pathname","search",i)),yt(!i.pathname||!i.pathname.includes("#"),Zf("#","pathname","hash",i)),yt(!i.search||!i.search.includes("#"),Zf("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,h;if(l==null)h=n;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;i.pathname=w.join("/")}h=y>=0?e[y]:"/"}let f=BI(i,h),p=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}const Is=t=>t.join("/").replace(/\/\/+/g,"/"),qI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Tb=["post","put","patch","delete"];new Set(Tb);const QI=["get",...Tb];new Set(QI);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uu.apply(this,arguments)}const Vg=F.createContext(null),YI=F.createContext(null),jd=F.createContext(null),Ld=F.createContext(null),Hs=F.createContext({outlet:null,matches:[],isDataRoute:!1}),kb=F.createContext(null);function Dd(){return F.useContext(Ld)!=null}function Nb(){return Dd()||yt(!1),F.useContext(Ld).location}function Ib(t){F.useContext(jd).static||F.useLayoutEffect(t)}function JI(){let{isDataRoute:t}=F.useContext(Hs);return t?d2():XI()}function XI(){Dd()||yt(!1);let t=F.useContext(Vg),{basename:e,future:n,navigator:r}=F.useContext(jd),{matches:i}=F.useContext(Hs),{pathname:o}=Nb(),l=JSON.stringify(WI(i,n.v7_relativeSplatPath)),h=F.useRef(!1);return Ib(()=>{h.current=!0}),F.useCallback(function(p,v){if(v===void 0&&(v={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let y=HI(p,JSON.parse(l),o,v.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Is([e,y.pathname])),(v.replace?r.replace:r.push)(y,v.state,v)},[e,r,l,o,t])}function e2(){let{matches:t}=F.useContext(Hs),e=t[t.length-1];return e?e.params:{}}function t2(t,e){return n2(t,e)}function n2(t,e,n,r){Dd()||yt(!1);let{navigator:i}=F.useContext(jd),{matches:o}=F.useContext(Hs),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let p=Nb(),v;if(e){var y;let M=typeof e=="string"?wa(e):e;f==="/"||(y=M.pathname)!=null&&y.startsWith(f)||yt(!1),v=M}else v=p;let w=v.pathname||"/",E=w;if(f!=="/"){let M=f.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(M.length).join("/")}let j=kI(t,{pathname:E}),S=a2(j&&j.map(M=>Object.assign({},M,{params:Object.assign({},h,M.params),pathname:Is([f,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?f:Is([f,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,n,r);return e&&S?F.createElement(Ld.Provider,{value:{location:uu({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ki.Pop}},S):S}function r2(){let t=h2(),e=KI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,null)}const i2=F.createElement(r2,null);class s2 extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(Hs.Provider,{value:this.props.routeContext},F.createElement(kb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function o2(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(Vg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Hs.Provider,{value:e},r)}function a2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(i=n)==null?void 0:i.errors;if(h!=null){let v=l.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||yt(!1),l=l.slice(0,Math.min(l.length,v+1))}let f=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let v=0;v<l.length;v++){let y=l[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=v),y.route.id){let{loaderData:w,errors:E}=n,j=y.route.loader&&w[y.route.id]===void 0&&(!E||E[y.route.id]===void 0);if(y.route.lazy||j){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((v,y,w)=>{let E,j=!1,S=null,M=null;n&&(E=h&&y.route.id?h[y.route.id]:void 0,S=y.route.errorElement||i2,f&&(p<0&&w===0?(f2("route-fallback"),j=!0,M=null):p===w&&(j=!0,M=y.route.hydrateFallbackElement||null)));let C=e.concat(l.slice(0,w+1)),N=()=>{let R;return E?R=S:j?R=M:y.route.Component?R=F.createElement(y.route.Component,null):y.route.element?R=y.route.element:R=v,F.createElement(o2,{match:y,routeContext:{outlet:v,matches:C,isDataRoute:n!=null},children:R})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?F.createElement(s2,{location:n.location,revalidation:n.revalidation,component:S,error:E,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):N()},null)}var Sb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Sb||{}),Pb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pb||{});function l2(t){let e=F.useContext(Vg);return e||yt(!1),e}function u2(t){let e=F.useContext(YI);return e||yt(!1),e}function c2(t){let e=F.useContext(Hs);return e||yt(!1),e}function Cb(t){let e=c2(),n=e.matches[e.matches.length-1];return n.route.id||yt(!1),n.route.id}function h2(){var t;let e=F.useContext(kb),n=u2(),r=Cb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function d2(){let{router:t}=l2(Sb.UseNavigateStable),e=Cb(Pb.UseNavigateStable),n=F.useRef(!1);return Ib(()=>{n.current=!0}),F.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,uu({fromRouteId:e},o)))},[t,e])}const Cy={};function f2(t,e,n){Cy[t]||(Cy[t]=!0)}function p2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mh(t){yt(!1)}function m2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ki.Pop,navigator:o,static:l=!1,future:h}=t;Dd()&&yt(!1);let f=e.replace(/^\/*/,"/"),p=F.useMemo(()=>({basename:f,navigator:o,static:l,future:uu({v7_relativeSplatPath:!1},h)}),[f,h,o,l]);typeof r=="string"&&(r=wa(r));let{pathname:v="/",search:y="",hash:w="",state:E=null,key:j="default"}=r,S=F.useMemo(()=>{let M=Eb(v,f);return M==null?null:{location:{pathname:M,search:y,hash:w,state:E,key:j},navigationType:i}},[f,v,y,w,E,j,i]);return S==null?null:F.createElement(jd.Provider,{value:p},F.createElement(Ld.Provider,{children:n,value:S}))}function g2(t){let{children:e,location:n}=t;return t2(im(e),n)}new Promise(()=>{});function im(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let o=[...e,i];if(r.type===F.Fragment){n.push.apply(n,im(r.props.children,o));return}r.type!==mh&&yt(!1),!r.props.index||!r.props.children||yt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=im(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const v2="6";try{window.__reactRouterVersion=v2}catch{}const _2="startTransition",Ay=hk[_2];function y2(t){let{basename:e,children:n,future:r,window:i}=t,o=F.useRef();o.current==null&&(o.current=bI({window:i,v5Compat:!0}));let l=o.current,[h,f]=F.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},v=F.useCallback(y=>{p&&Ay?Ay(()=>f(y)):f(y)},[f,p]);return F.useLayoutEffect(()=>l.listen(v),[l,v]),F.useEffect(()=>p2(r),[r]),F.createElement(m2,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}var Ry;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ry||(Ry={}));var jy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jy||(jy={}));var x2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const w2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),le=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:h,...f},p)=>F.createElement("svg",{ref:p,...x2,width:i,height:i,stroke:r,strokeWidth:l?Number(o)*24/Number(i):o,className:`lucide lucide-${w2(t)}`,...f},[...e.map(([v,y])=>F.createElement(v,y)),...(Array.isArray(h)?h:[h])||[]]));return n.displayName=`${t}`,n},b2=le("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Od=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Md=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Zo=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),E2=le("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ly=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),ys=le("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),cu=le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Ab=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),mr=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Rb=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ko=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),zg=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vd=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Fg=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),aa=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),T2=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),sm=le("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),k2=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),N2=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Ug=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),I2=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),jb=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),S2=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),om=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),hr=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),P2=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Bg=le("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),C2=le("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]),Bi=le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),A2=le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Dy=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),R2=le("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]),j2=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),$i=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),L2=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Wi=le("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),D2=le("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),O2=le("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),M2=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),V2=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),z2=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),At=le("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),Lb=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),F2=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ds=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hu=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),U2=le("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Au=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Db=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Oy=({label:t,items:e})=>u.jsxs("div",{className:"relative group",children:[u.jsxs("button",{className:"flex items-center space-x-1 hover:text-primary transition-colors py-2 font-bold uppercase tracking-wide",children:[u.jsx("span",{children:t}),u.jsx(Ko,{className:"w-3 h-3 transition-transform group-hover:rotate-180"})]}),u.jsx("div",{className:"absolute top-full left-0 pt-2 w-80 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2 z-50",children:u.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-slate-100 p-2 overflow-hidden",children:e.map((n,r)=>u.jsxs("a",{href:n.href||"#",onClick:i=>{n.action&&(i.preventDefault(),n.action())},className:"flex items-start space-x-3 px-4 py-3 rounded-lg hover:bg-slate-50 transition-colors group/item",children:[n.icon&&u.jsx("div",{className:"mt-0.5 text-blue-500 group-hover/item:text-blue-600",children:n.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-slate-900 group-hover/item:text-primary transition-colors mb-0.5",children:n.label}),n.desc&&u.jsx("div",{className:"text-xs text-slate-500 font-medium leading-tight",children:n.desc})]})]},r))})})]}),B2=({onSelectRole:t})=>{const e=n=>{const r=document.getElementById(n);r&&r.scrollIntoView({behavior:"smooth"})};return u.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans selection:bg-primary/20",children:[u.jsx("nav",{className:"sticky top-0 z-50 glass-effect border-b border-slate-200/50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3 group cursor-pointer",children:[u.jsx("div",{className:"bg-primary p-2 rounded-2xl shadow-lg shadow-primary/20 group-hover:scale-110 transition-transform duration-500",children:u.jsx(At,{className:"w-6 h-6 text-white"})}),u.jsxs("span",{className:"text-2xl font-black tracking-tighter uppercase",children:["Auto",u.jsx("span",{className:"text-primary",children:"Direct"})]})]}),u.jsxs("div",{className:"hidden md:flex items-center space-x-8 text-sm pt-1",children:[u.jsx(Oy,{label:"Solutions",items:[{label:"Route Optimization",desc:"Smarter paths, lower costs",icon:u.jsx(R2,{className:"w-5 h-5"}),action:()=>e("features")},{label:"Real-time Tracking",desc:"GPS accuracy for every load",icon:u.jsx(Bg,{className:"w-5 h-5"}),action:()=>e("features")},{label:"Secure Payments",desc:"Instant payouts on delivery",icon:u.jsx(jb,{className:"w-5 h-5"}),action:()=>e("features")}]}),u.jsx(Oy,{label:"Company",items:[{label:"About Us",desc:"Our mission & vision",icon:u.jsx(Wi,{className:"w-5 h-5"}),action:()=>e("resources")},{label:"Press & Media",desc:"Latest news from AutoDirect",icon:u.jsx(C2,{className:"w-5 h-5"}),href:"#"}]})]}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("button",{onClick:()=>window.location.href="/track",className:"hidden sm:flex items-center text-sm font-bold text-slate-500 hover:text-primary transition-all",children:[u.jsx($i,{className:"w-4 h-4 mr-2"})," Track Shipment"]}),u.jsx("button",{onClick:()=>document.getElementById("get-started").scrollIntoView({behavior:"smooth"}),className:"bg-slate-900 hover:bg-black text-white px-8 py-3 rounded-2xl font-bold text-sm shadow-xl shadow-slate-900/10 transition-all hover:scale-105 active:scale-95",children:"Get Started"})]})]})}),u.jsxs("div",{className:"relative pt-24 pb-32 overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] bg-gradient-to-b from-blue-50/50 to-transparent -z-10"}),u.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[600px] h-[600px] bg-blue-400/10 rounded-full blur-[120px] -z-10 animate-pulse-slow"}),u.jsx("div",{className:"absolute top-[20%] left-[-5%] w-[400px] h-[400px] bg-indigo-400/10 rounded-full blur-[100px] -z-10"}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-20 items-center",children:[u.jsxs("div",{className:"space-y-10 text-center lg:text-left",children:[u.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-white border border-slate-200 shadow-sm text-primary text-[10px] font-black uppercase tracking-[0.2em]",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-primary mr-3 animate-ping"}),"Live Logistics Network"]}),u.jsxs("h1",{className:"text-6xl sm:text-8xl font-black tracking-tighter text-slate-900 leading-[0.9] lg:leading-[1]",children:["The Future of ",u.jsx("br",{}),u.jsx("span",{className:"gradient-text",children:"Direct Delivery."})]}),u.jsx("p",{className:"text-xl text-slate-500 max-w-lg mx-auto lg:mx-0 leading-relaxed font-medium",children:"Connect directly with the world's most reliable transport network. No brokers. No delays. Just direct movement."}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-5",children:[u.jsxs("button",{onClick:()=>document.getElementById("get-started").scrollIntoView({behavior:"smooth"}),className:"w-full sm:w-auto px-10 py-5 bg-primary text-white rounded-[1.5rem] font-bold text-lg shadow-2xl shadow-primary/30 hover:bg-primary-hover hover:-translate-y-1 transition-all flex items-center justify-center group",children:["Get Started Now ",u.jsx(Zo,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]}),u.jsx("button",{onClick:()=>window.location.href="/track",className:"w-full sm:w-auto px-10 py-5 bg-white text-slate-700 border border-slate-200 rounded-[1.5rem] font-bold text-lg hover:border-slate-300 hover:bg-slate-50 hover:-translate-y-1 transition-all flex items-center justify-center",children:"Track Order"})]}),u.jsxs("div",{className:"pt-10 flex items-center justify-center lg:justify-start space-x-10 text-slate-400 opacity-60",children:[u.jsxs("span",{className:"font-black text-2xl tracking-tighter",children:["logistics",u.jsx("span",{className:"font-light",children:"OS"})]}),u.jsxs("span",{className:"font-black text-2xl tracking-tighter uppercase opacity-50",children:["Secure",u.jsx("span",{className:"text-primary/50",children:"Pay"})]})]})]}),u.jsx("div",{className:"relative lg:h-[700px] flex items-center justify-center",children:u.jsxs("div",{className:"relative w-full max-w-lg aspect-square",children:[u.jsx("div",{className:"absolute inset-0 border-[3px] border-slate-200/50 rounded-[3rem] animate-[spin_30s_linear_infinite]"}),u.jsx("div",{className:"absolute inset-[10%] border-2 border-dashed border-slate-300/30 rounded-[2.5rem] animate-[spin_20s_linear_infinite_reverse]"}),u.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[90%] glass-effect rounded-[2.5rem] p-10 rotate-[-2deg] hover:rotate-0 transition-all duration-700 z-10 animate-float shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"font-black text-slate-900 text-sm tracking-widest uppercase",children:"Network Activity"}),u.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:"Live Updates"})]}),u.jsxs("span",{className:"relative flex h-3 w-3",children:[u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),u.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between group cursor-pointer hover:bg-slate-50 p-2 rounded-lg transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-full flex items-center justify-center text-blue-500",children:u.jsx(hr,{className:"w-4 h-4"})}),u.jsxs("div",{className:"text-sm font-bold text-slate-700",children:["Harare ",u.jsx("span",{className:"text-slate-300 mx-1",children:""})," Bulawayo"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded-full uppercase tracking-wide mb-1",children:"Delivered"}),u.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:"2m ago"})]})]}),u.jsxs("div",{className:"flex items-center justify-between group cursor-pointer hover:bg-slate-50 p-2 rounded-lg transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-amber-50 rounded-full flex items-center justify-center text-amber-500",children:u.jsx(hr,{className:"w-4 h-4"})}),u.jsxs("div",{className:"text-sm font-bold text-slate-700",children:["Mutare ",u.jsx("span",{className:"text-slate-300 mx-1",children:""})," Gweru"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full uppercase tracking-wide mb-1",children:"En Route"}),u.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:"15m ago"})]})]}),u.jsxs("div",{className:"flex items-center justify-between group cursor-pointer hover:bg-slate-50 p-2 rounded-lg transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-50 rounded-full flex items-center justify-center text-slate-400",children:u.jsx(hr,{className:"w-4 h-4"})}),u.jsxs("div",{className:"text-sm font-bold text-slate-700",children:["Vic Falls ",u.jsx("span",{className:"text-slate-300 mx-1",children:""})," Hwange"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full uppercase tracking-wide mb-1",children:"Booked"}),u.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:"1h ago"})]})]})]})]})]})})]})]}),u.jsx("div",{id:"features",className:"py-24 bg-white relative z-10",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("span",{className:"text-primary font-black uppercase tracking-widest text-xs mb-2 block",children:"Why AutoDirect?"}),u.jsx("h2",{className:"text-4xl font-black text-slate-900 mb-4",children:"Features built for modern logistics."}),u.jsx("p",{className:"text-slate-500 max-w-2xl mx-auto text-lg leading-relaxed",children:"We bridge the gap between heavy shippers and reliable independent haulers efficiently."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:border-primary/20 hover:shadow-xl hover:shadow-blue-500/5 transition-all duration-300",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center text-primary mb-6",children:u.jsx($i,{className:"w-6 h-6"})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Live Load Board"}),u.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Access thousands of active shipments instantly. Filter by route, weight, and vehicle type to find the perfect match."})]}),u.jsxs("div",{className:"p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:border-primary/20 hover:shadow-xl hover:shadow-blue-500/5 transition-all duration-300",children:[u.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center text-amber-600 mb-6",children:u.jsx(Wi,{className:"w-6 h-6"})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Verified Partners"}),u.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Every hauler and shipper is vetted. We ensure compliance, insurance, and identity verification for peace of mind."})]}),u.jsxs("div",{className:"p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:border-primary/20 hover:shadow-xl hover:shadow-blue-500/5 transition-all duration-300",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-2xl flex items-center justify-center text-green-600 mb-6",children:u.jsx(At,{className:"w-6 h-6"})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Direct Dispatch"}),u.jsx("p",{className:"text-slate-500 leading-relaxed",children:"Cut out the broker. Communicate directly with drivers, track shipments in real-time, and pay instantly."})]})]})]})}),u.jsxs("div",{id:"resources",className:"py-24 bg-slate-50 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-white rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 opacity-60"}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center relative z-10",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-primary font-black uppercase tracking-widest text-xs mb-2 block",children:"Our Mission"}),u.jsx("h2",{className:"text-4xl font-black text-slate-900 mb-6",children:"Empowering the supply chain."}),u.jsxs("div",{className:"space-y-6 text-slate-500 text-lg leading-relaxed",children:[u.jsxs("p",{children:["At ",u.jsx("strong",{className:"text-slate-900",children:"AutoDirect"}),", we believe logistics should be simple, transparent, and profitable for everyone involved."]}),u.jsx("p",{children:"We provide the resources you need to succeed:"}),u.jsxs("ul",{className:"space-y-3 mt-4",children:[u.jsxs("li",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),u.jsx("span",{children:"24/7 Support for Haulers & Shippers"})]}),u.jsxs("li",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),u.jsx("span",{children:"Automated Invoicing & Proof of Delivery"})]}),u.jsxs("li",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),u.jsx("span",{children:"Real-time Market Rate Insights"})]})]})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"aspect-video bg-slate-200 rounded-3xl overflow-hidden shadow-2xl shadow-slate-200 border-4 border-white",children:u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-5xl font-black text-white mb-2",children:"10k+"}),u.jsx("div",{className:"text-blue-400 font-bold uppercase tracking-widest",children:"Active Loads"})]})})}),u.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white p-6 rounded-2xl shadow-xl border border-slate-100 max-w-xs",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 italic",children:`"AutoDirect changed how we move freight. It's simply faster."`}),u.jsx("p",{className:"text-xs text-slate-400 mt-2 font-bold uppercase",children:"- Global Logistics Co."})]})]})]})]}),u.jsxs("div",{id:"get-started",className:"py-32 bg-slate-900 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_30%_50%,rgba(37,99,235,0.1),transparent)] pointer-events-none"}),u.jsxs("div",{className:"max-w-5xl mx-auto px-6 text-center relative z-10",children:[u.jsx("h2",{className:"text-5xl font-black text-white mb-6 tracking-tighter",children:"Start Your Journey"}),u.jsx("p",{className:"text-slate-400 mb-20 text-xl font-medium",children:"Ready to transform your logistics? Choose your path below."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:[u.jsxs("button",{onClick:()=>t("supplier"),className:"group p-10 rounded-[2.5rem] bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-500 hover:-translate-y-2 relative overflow-hidden",children:[u.jsx("div",{className:"absolute -bottom-10 -right-10 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:u.jsx(Bi,{className:"w-64 h-64 -rotate-12 text-primary"})}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"w-16 h-16 bg-primary rounded-2xl shadow-xl shadow-primary/20 flex items-center justify-center mb-8 group-hover:scale-110 transition-transform",children:u.jsx(Bi,{className:"w-8 h-8 text-white"})}),u.jsx("h3",{className:"text-3xl font-black text-white mb-4",children:"I am a Supplier"}),u.jsx("p",{className:"text-slate-400 mb-10 text-lg leading-relaxed font-medium",children:"Post loads, manage complex shipments, and track your goods across the globe in real-time."}),u.jsxs("div",{className:"inline-flex items-center font-bold text-primary group-hover:translate-x-2 transition-transform bg-primary/10 px-6 py-3 rounded-xl",children:["Continue as Supplier ",u.jsx(Zo,{className:"w-5 h-5 ml-2"})]})]})]}),u.jsxs("button",{onClick:()=>t("hauler"),className:"group p-10 rounded-[2.5rem] bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-500 hover:-translate-y-2 relative overflow-hidden",children:[u.jsx("div",{className:"absolute -bottom-10 -right-10 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:u.jsx(At,{className:"w-64 h-64 -rotate-12 text-amber-500"})}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"w-16 h-16 bg-amber-500 rounded-2xl shadow-xl shadow-amber-500/20 flex items-center justify-center mb-8 group-hover:scale-110 transition-transform",children:u.jsx(At,{className:"w-8 h-8 text-white"})}),u.jsx("h3",{className:"text-3xl font-black text-white mb-4",children:"I am a Hauler"}),u.jsx("p",{className:"text-slate-400 mb-10 text-lg leading-relaxed font-medium",children:"Find high-paying loads, optimize your routes, and get paid instantly with our secure payment system."}),u.jsxs("div",{className:"inline-flex items-center font-bold text-amber-500 group-hover:translate-x-2 transition-transform bg-amber-500/10 px-6 py-3 rounded-xl",children:["Continue as Hauler ",u.jsx(Zo,{className:"w-5 h-5 ml-2"})]})]})]})]})]})]}),u.jsx("div",{id:"contact",className:"py-20 bg-slate-900 text-white",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[u.jsx("h2",{className:"text-3xl font-black mb-6",children:"We're here to help."}),u.jsx("p",{className:"text-slate-400 mb-8 max-w-xl mx-auto",children:"Have questions? Need a custom logistics solution? Reach out to our team directly."}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6",children:[u.jsxs("div",{className:"bg-white/5 backdrop-blur border border-white/10 px-8 py-4 rounded-2xl",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Email Us"}),u.jsx("p",{className:"text-xl font-bold",children:"autodirect@gmail.com"})]}),u.jsxs("div",{className:"bg-white/5 backdrop-blur border border-white/10 px-8 py-4 rounded-2xl",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Call Us"}),u.jsx("p",{className:"text-xl font-bold",children:"0781312079"})]})]})]})}),u.jsx("footer",{className:"bg-slate-50 py-12 border-t border-slate-200",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center text-slate-400 text-sm font-medium",children:[u.jsx("p",{children:" 2024 AutoDirect Logistics. All rights reserved."}),u.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[u.jsx("a",{href:"#",className:"hover:text-slate-600",children:"Privacy"}),u.jsx("a",{href:"#",className:"hover:text-slate-600",children:"Terms"}),u.jsx("a",{href:"#",className:"hover:text-slate-600",children:"Support"})]})]})})]})},am=({icon:t,title:e,desc:n})=>u.jsxs("div",{className:"py-20 text-center flex flex-col items-center justify-center space-y-3 opacity-60",children:[u.jsx("div",{className:"w-16 h-16 bg-surface rounded-3xl flex items-center justify-center text-white/20 border border-white/5",children:u.jsx(t,{className:"w-8 h-8"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"font-black text-white uppercase",children:e}),u.jsx("p",{className:"text-xs text-text-muted font-bold uppercase tracking-tight",children:n})]})]}),Hn=({label:t,icon:e,value:n,onChange:r,placeholder:i,type:o="text"})=>u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[10px] font-black text-text-muted uppercase",children:t}),u.jsxs("div",{className:"relative",children:[u.jsx(e,{className:"absolute left-3 top-3.5 w-4 h-4 text-text-muted"}),u.jsx("input",{required:!0,type:o,placeholder:i,className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary outline-none transition-all font-bold text-sm text-slate-900 placeholder:text-slate-400",value:n,onChange:l=>r(l.target.value)})]})]});function Ob(t,e){const n=F.useRef(e);F.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const $2=1;function W2(t){return Object.freeze({__version:$2,map:t})}function Mb(t,e){return Object.freeze({...t,...e})}const Vb=F.createContext(null),zb=Vb.Provider;function zd(){const t=F.useContext(Vb);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Fb(t){function e(n,r){const{instance:i,context:o}=t(n).current;return F.useImperativeHandle(r,()=>i),n.children==null?null:nn.createElement(zb,{value:o},n.children)}return F.forwardRef(e)}function H2(t){function e(n,r){const[i,o]=F.useState(!1),{instance:l}=t(n,o).current;F.useImperativeHandle(r,()=>l),F.useEffect(function(){i&&l.update()},[l,i,n.children]);const h=l._contentNode;return h?yb.createPortal(n.children,h):null}return F.forwardRef(e)}function q2(t){function e(n,r){const{instance:i}=t(n).current;return F.useImperativeHandle(r,()=>i),null}return F.forwardRef(e)}function $g(t,e){const n=F.useRef();F.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Fd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function G2(t,e){return function(r,i){const o=zd(),l=t(Fd(r,o),o);return Ob(o.map,r.attribution),$g(l.current,r.eventHandlers),e(l.current,o,r,i),l}}var lm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(ox,function(n){var r="1.9.4";function i(s){var a,d,m,_;for(d=1,m=arguments.length;d<m;d++){_=arguments[d];for(a in _)s[a]=_[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var m=d.call(arguments,2);return function(){return s.apply(a,m.length?m.concat(d.call(arguments)):arguments)}}var h=0;function f(s){return"_leaflet_id"in s||(s._leaflet_id=++h),s._leaflet_id}function p(s,a,d){var m,_,b,z;return z=function(){m=!1,_&&(b.apply(d,_),_=!1)},b=function(){m?_=arguments:(s.apply(d,arguments),setTimeout(z,a),m=!0)},b}function v(s,a,d){var m=a[1],_=a[0],b=m-_;return s===m&&d?s:((s-_)%b+b)%b+_}function y(){return!1}function w(s,a){if(a===!1)return s;var d=Math.pow(10,a===void 0?6:a);return Math.round(s*d)/d}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function j(s){return E(s).split(/\s+/)}function S(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in a)s.options[d]=a[d];return s.options}function M(s,a,d){var m=[];for(var _ in s)m.push(encodeURIComponent(d?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!a||a.indexOf("?")===-1?"?":"&")+m.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function N(s,a){return s.replace(C,function(d,m){var _=a[m];if(_===void 0)throw new Error("No value provided for variable "+d);return typeof _=="function"&&(_=_(a)),_})}var R=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function U(s,a){for(var d=0;d<s.length;d++)if(s[d]===a)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var k=0;function T(s){var a=+new Date,d=Math.max(0,16-(a-k));return k=a+d,window.setTimeout(s,d)}var A=window.requestAnimationFrame||G("RequestAnimationFrame")||T,P=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,a,d){if(d&&A===T)s.call(a);else return A.call(window,l(s,a))}function O(s){s&&P.call(window,s)}var D={__proto__:null,extend:i,create:o,bind:l,get lastId(){return h},stamp:f,throttle:p,wrapNum:v,falseFn:y,formatNum:w,trim:E,splitWords:j,setOptions:S,getParamString:M,template:N,isArray:R,indexOf:U,emptyImageUrl:q,requestFn:A,cancelFn:P,requestAnimFrame:V,cancelAnimFrame:O};function Ae(){}Ae.extend=function(s){var a=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=a.__super__=this.prototype,m=o(d);m.constructor=a,a.prototype=m;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(a[_]=this[_]);return s.statics&&i(a,s.statics),s.includes&&(cn(s.includes),i.apply(null,[m].concat(s.includes))),i(m,s),delete m.statics,delete m.includes,m.options&&(m.options=d.options?o(d.options):{},i(m.options,s.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,z=m._initHooks.length;b<z;b++)m._initHooks[b].call(this)}},a},Ae.include=function(s){var a=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Ae.mergeOptions=function(s){return i(this.prototype.options,s),this},Ae.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function cn(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=R(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var We={on:function(s,a,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],a);else{s=j(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],a,d)}return this},off:function(s,a,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var m in s)this._off(m,s[m],a);else{s=j(s);for(var _=arguments.length===1,b=0,z=s.length;b<z;b++)_?this._off(s[b]):this._off(s[b],a,d)}return this},_on:function(s,a,d,m){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,d)===!1){d===this&&(d=void 0);var _={fn:a,ctx:d};m&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,a,d){var m,_,b;if(this._events&&(m=this._events[s],!!m)){if(arguments.length===1){if(this._firingCount)for(_=0,b=m.length;_<b;_++)m[_].fn=y;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var z=this._listens(s,a,d);if(z!==!1){var $=m[z];this._firingCount&&($.fn=y,this._events[s]=m=m.slice()),m.splice(z,1)}}},fire:function(s,a,d){if(!this.listens(s,d))return this;var m=i({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var b=0,z=_.length;b<z;b++){var $=_[b],W=$.fn;$.once&&this.off(s,W,$.ctx),W.call($.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(s,a,d,m){typeof s!="string"&&console.warn('"string" type argument expected');var _=a;typeof a!="function"&&(m=!!a,_=void 0,d=void 0);var b=this._events&&this._events[s];if(b&&b.length&&this._listens(s,_,d)!==!1)return!0;if(m){for(var z in this._eventParents)if(this._eventParents[z].listens(s,a,d,m))return!0}return!1},_listens:function(s,a,d){if(!this._events)return!1;var m=this._events[s]||[];if(!a)return!!m.length;d===this&&(d=void 0);for(var _=0,b=m.length;_<b;_++)if(m[_].fn===a&&m[_].ctx===d)return _;return!1},once:function(s,a,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],a,!0);else{s=j(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],a,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[f(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[f(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};We.addEventListener=We.on,We.removeEventListener=We.clearAllEventListeners=We.off,We.addOneTimeEventListener=We.once,We.fireEvent=We.fire,We.hasEventListeners=We.listens;var Ht=Ae.extend(We);function Z(s,a,d){this.x=d?Math.round(s):s,this.y=d?Math.round(a):a}var he=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(s){s=X(s);var a=s.x-this.x,d=s.y-this.y;return Math.sqrt(a*a+d*d)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function X(s,a,d){return s instanceof Z?s:R(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,a,d)}function fe(s,a){if(s)for(var d=a?[s,a]:s,m=0,_=d.length;m<_;m++)this.extend(d[m])}fe.prototype={extend:function(s){var a,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)a=d=X(s);else if(s=xe(s),a=s.min,d=s.max,!a||!d)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=d.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,d;return typeof s[0]=="number"||s instanceof Z?s=X(s):s=xe(s),s instanceof fe?(a=s.min,d=s.max):a=d=s,a.x>=this.min.x&&d.x<=this.max.x&&a.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=xe(s);var a=this.min,d=this.max,m=s.min,_=s.max,b=_.x>=a.x&&m.x<=d.x,z=_.y>=a.y&&m.y<=d.y;return b&&z},overlaps:function(s){s=xe(s);var a=this.min,d=this.max,m=s.min,_=s.max,b=_.x>a.x&&m.x<d.x,z=_.y>a.y&&m.y<d.y;return b&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,d=this.max,m=Math.abs(a.x-d.x)*s,_=Math.abs(a.y-d.y)*s;return xe(X(a.x-m,a.y-_),X(d.x+m,d.y+_))},equals:function(s){return s?(s=xe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function xe(s,a){return!s||s instanceof fe?s:new fe(s,a)}function ke(s,a){if(s)for(var d=a?[s,a]:s,m=0,_=d.length;m<_;m++)this.extend(d[m])}ke.prototype={extend:function(s){var a=this._southWest,d=this._northEast,m,_;if(s instanceof we)m=s,_=s;else if(s instanceof ke){if(m=s._southWest,_=s._northEast,!m||!_)return this}else return s?this.extend(ge(s)||De(s)):this;return!a&&!d?(this._southWest=new we(m.lat,m.lng),this._northEast=new we(_.lat,_.lng)):(a.lat=Math.min(m.lat,a.lat),a.lng=Math.min(m.lng,a.lng),d.lat=Math.max(_.lat,d.lat),d.lng=Math.max(_.lng,d.lng)),this},pad:function(s){var a=this._southWest,d=this._northEast,m=Math.abs(a.lat-d.lat)*s,_=Math.abs(a.lng-d.lng)*s;return new ke(new we(a.lat-m,a.lng-_),new we(d.lat+m,d.lng+_))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=ge(s):s=De(s);var a=this._southWest,d=this._northEast,m,_;return s instanceof ke?(m=s.getSouthWest(),_=s.getNorthEast()):m=_=s,m.lat>=a.lat&&_.lat<=d.lat&&m.lng>=a.lng&&_.lng<=d.lng},intersects:function(s){s=De(s);var a=this._southWest,d=this._northEast,m=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>=a.lat&&m.lat<=d.lat,z=_.lng>=a.lng&&m.lng<=d.lng;return b&&z},overlaps:function(s){s=De(s);var a=this._southWest,d=this._northEast,m=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>a.lat&&m.lat<d.lat,z=_.lng>a.lng&&m.lng<d.lng;return b&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=De(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(s,a){return s instanceof ke?s:new ke(s,a)}function we(s,a,d){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,d!==void 0&&(this.alt=+d)}we.prototype={equals:function(s,a){if(!s)return!1;s=ge(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+w(this.lat,s)+", "+w(this.lng,s)+")"},distanceTo:function(s){return er.distance(this,ge(s))},wrap:function(){return er.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,d=a/Math.cos(Math.PI/180*this.lat);return De([this.lat-a,this.lng-d],[this.lat+a,this.lng+d])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function ge(s,a,d){return s instanceof we?s:R(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new we(s,a,d)}var gt={latLngToPoint:function(s,a){var d=this.projection.project(s),m=this.scale(a);return this.transformation._transform(d,m)},pointToLatLng:function(s,a){var d=this.scale(a),m=this.transformation.untransform(s,d);return this.projection.unproject(m)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,d=this.scale(s),m=this.transformation.transform(a.min,d),_=this.transformation.transform(a.max,d);return new fe(m,_)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?v(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?v(s.lat,this.wrapLat,!0):s.lat,m=s.alt;return new we(d,a,m)},wrapLatLngBounds:function(s){var a=s.getCenter(),d=this.wrapLatLng(a),m=a.lat-d.lat,_=a.lng-d.lng;if(m===0&&_===0)return s;var b=s.getSouthWest(),z=s.getNorthEast(),$=new we(b.lat-m,b.lng-_),W=new we(z.lat-m,z.lng-_);return new ke($,W)}},er=i({},gt,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var d=Math.PI/180,m=s.lat*d,_=a.lat*d,b=Math.sin((a.lat-s.lat)*d/2),z=Math.sin((a.lng-s.lng)*d/2),$=b*b+Math.cos(m)*Math.cos(_)*z*z,W=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*W}}),Qu=6378137,ni={R:Qu,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,s.lat),-d),_=Math.sin(m*a);return new Z(this.R*s.lng*a,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=Qu*Math.PI;return new fe([-s,-s],[s,s])}()};function ri(s,a,d,m){if(R(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=d,this._d=m}ri.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new Z((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function _r(s,a,d,m){return new ri(s,a,d,m)}var ns=i({},er,{code:"EPSG:3857",projection:ni,transformation:function(){var s=.5/(Math.PI*ni.R);return _r(s,.5,-s,.5)}()}),Ca=i({},ns,{code:"EPSG:900913"});function Zs(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Aa(s,a){var d="",m,_,b,z,$,W;for(m=0,b=s.length;m<b;m++){for($=s[m],_=0,z=$.length;_<z;_++)W=$[_],d+=(_?"L":"M")+W.x+" "+W.y;d+=a?oe.svg?"z":"x":""}return d||"M0 0"}var Ra=document.documentElement.style,Ks="ActiveXObject"in window,Yu=Ks&&!document.addEventListener,Qs="msLaunchUri"in navigator&&!("documentMode"in document),Ys=bn("webkit"),Ju=bn("android"),Js=bn("android 2")||bn("android 3"),ja=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xu=Ju&&bn("Google")&&ja<537&&!("AudioNode"in window),ct=!!window.opera,wt=!Qs&&bn("chrome"),rs=bn("gecko")&&!Ys&&!ct&&!Ks,ec=!wt&&bn("safari"),La=bn("phantom"),tc="OTransition"in Ra,is=navigator.platform.indexOf("Win")===0,Da=Ks&&"transition"in Ra,Xs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Js,eo="MozPerspective"in Ra,pf=!window.L_DISABLE_3D&&(Da||Xs||eo)&&!tc&&!La,ss=typeof orientation<"u"||bn("mobile"),Oa=ss&&Ys,nc=ss&&Xs,Ma=!window.PointerEvent&&window.MSPointerEvent,ii=!!(window.PointerEvent||Ma),to="ontouchstart"in window||!!window.TouchEvent,Va=!window.L_NO_TOUCH&&(to||ii),yr=ss&&ct,rc=ss&&rs,no=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ic=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return s}(),os=function(){return!!document.createElement("canvas").getContext}(),ro=!!(document.createElementNS&&Zs("svg").createSVGRect),It=!!ro&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),sc=!ro&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),as=navigator.platform.indexOf("Mac")===0,ls=navigator.platform.indexOf("Linux")===0;function bn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var oe={ie:Ks,ielt9:Yu,edge:Qs,webkit:Ys,android:Ju,android23:Js,androidStock:Xu,opera:ct,chrome:wt,gecko:rs,safari:ec,phantom:La,opera12:tc,win:is,ie3d:Da,webkit3d:Xs,gecko3d:eo,any3d:pf,mobile:ss,mobileWebkit:Oa,mobileWebkit3d:nc,msPointer:Ma,pointer:ii,touch:Va,touchNative:to,mobileOpera:yr,mobileGecko:rc,retina:no,passiveEvents:ic,canvas:os,svg:ro,vml:sc,inlineSvg:It,mac:as,linux:ls},xr=oe.msPointer?"MSPointerDown":"pointerdown",oc=oe.msPointer?"MSPointerMove":"pointermove",ac=oe.msPointer?"MSPointerUp":"pointerup",us=oe.msPointer?"MSPointerCancel":"pointercancel",io={touchstart:xr,touchmove:oc,touchend:ac,touchcancel:us},so={touchstart:ao,touchmove:oo,touchend:oo,touchcancel:oo},Vn={},zn=!1;function lc(s,a,d){return a==="touchstart"&&cc(),so[a]?(d=so[a].bind(this,d),s.addEventListener(io[a],d,!1),d):(console.warn("wrong event specified:",a),y)}function uc(s,a,d){if(!io[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(io[a],d,!1)}function za(s){Vn[s.pointerId]=s}function Fa(s){Vn[s.pointerId]&&(Vn[s.pointerId]=s)}function Ua(s){delete Vn[s.pointerId]}function cc(){zn||(document.addEventListener(xr,za,!0),document.addEventListener(oc,Fa,!0),document.addEventListener(ac,Ua,!0),document.addEventListener(us,Ua,!0),zn=!0)}function oo(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var d in Vn)a.touches.push(Vn[d]);a.changedTouches=[a],s(a)}}function ao(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&Ye(a),oo(s,a)}function hc(s){var a={},d,m;for(m in s)d=s[m],a[m]=d&&d.bind?d.bind(s):d;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ba=200;function cs(s,a){s.addEventListener("dblclick",a);var d=0,m;function _(b){if(b.detail!==1){m=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var z=el(b);if(!(z.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!z.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var $=Date.now();$-d<=Ba?(m++,m===2&&a(hc(b))):m=1,d=$}}}return s.addEventListener("click",_),{dblclick:a,simDblclick:_}}function wr(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var hs=Er(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ds=Er(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$a=ds==="webkitTransition"||ds==="OTransition"?ds+"End":"transitionend";function Wa(s){return typeof s=="string"?document.getElementById(s):s}function si(s,a){var d=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(s,null);d=m?m[a]:null}return d==="auto"?null:d}function Ne(s,a,d){var m=document.createElement(s);return m.className=a||"",d&&d.appendChild(m),m}function Ue(s){var a=s.parentNode;a&&a.removeChild(s)}function fs(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function br(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function oi(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function Ha(s,a){if(s.classList!==void 0)return s.classList.contains(a);var d=En(s);return d.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(d)}function ye(s,a){if(s.classList!==void 0)for(var d=j(a),m=0,_=d.length;m<_;m++)s.classList.add(d[m]);else if(!Ha(s,a)){var b=En(s);qa(s,(b?b+" ":"")+a)}}function Ze(s,a){s.classList!==void 0?s.classList.remove(a):qa(s,E((" "+En(s)+" ").replace(" "+a+" "," ")))}function qa(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function En(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function it(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&lo(s,a)}function lo(s,a){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(m)}catch{if(a===1)return}a=Math.round(a*100),d?(d.Enabled=a!==100,d.Opacity=a):s.style.filter+=" progid:"+m+"(opacity="+a+")"}function Er(s){for(var a=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in a)return s[d];return!1}function tr(s,a,d){var m=a||new Z(0,0);s.style[hs]=(oe.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function pe(s,a){s._leaflet_pos=a,oe.any3d?tr(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function Tn(s){return s._leaflet_pos||new Z(0,0)}var Fn,Un,Ga;if("onselectstart"in document)Fn=function(){ue(window,"selectstart",Ye)},Un=function(){ze(window,"selectstart",Ye)};else{var ai=Er(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Fn=function(){if(ai){var s=document.documentElement.style;Ga=s[ai],s[ai]="none"}},Un=function(){ai&&(document.documentElement.style[ai]=Ga,Ga=void 0)}}function Za(){ue(window,"dragstart",Ye)}function Ka(){ze(window,"dragstart",Ye)}var uo,Qa;function Tr(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(hn(),uo=s,Qa=s.style.outlineStyle,s.style.outlineStyle="none",ue(window,"keydown",hn))}function hn(){uo&&(uo.style.outlineStyle=Qa,uo=void 0,Qa=void 0,ze(window,"keydown",hn))}function Ya(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function co(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var dc={__proto__:null,TRANSFORM:hs,TRANSITION:ds,TRANSITION_END:$a,get:Wa,getStyle:si,create:Ne,remove:Ue,empty:fs,toFront:br,toBack:oi,hasClass:Ha,addClass:ye,removeClass:Ze,setClass:qa,getClass:En,setOpacity:it,testProp:Er,setTransform:tr,setPosition:pe,getPosition:Tn,get disableTextSelection(){return Fn},get enableTextSelection(){return Un},disableImageDrag:Za,enableImageDrag:Ka,preventOutline:Tr,restoreOutline:hn,getSizedParentNode:Ya,getScale:co};function ue(s,a,d,m){if(a&&typeof a=="object")for(var _ in a)Ja(s,_,a[_],d);else{a=j(a);for(var b=0,z=a.length;b<z;b++)Ja(s,a[b],d,m)}return this}var kn="_leaflet_events";function ze(s,a,d,m){if(arguments.length===1)fc(s),delete s[kn];else if(a&&typeof a=="object")for(var _ in a)Xa(s,_,a[_],d);else if(a=j(a),arguments.length===2)fc(s,function($){return U(a,$)!==-1});else for(var b=0,z=a.length;b<z;b++)Xa(s,a[b],d,m);return this}function fc(s,a){for(var d in s[kn]){var m=d.split(/\d/)[0];(!a||a(m))&&Xa(s,m,null,null,d)}}var Nn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ja(s,a,d,m){var _=a+f(d)+(m?"_"+f(m):"");if(s[kn]&&s[kn][_])return this;var b=function($){return d.call(m||s,$||window.event)},z=b;!oe.touchNative&&oe.pointer&&a.indexOf("touch")===0?b=lc(s,a,b):oe.touch&&a==="dblclick"?b=cs(s,b):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(Nn[a]||a,b,oe.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(b=function($){$=$||window.event,tl(s,$)&&z($)},s.addEventListener(Nn[a],b,!1)):s.addEventListener(a,z,!1):s.attachEvent("on"+a,b),s[kn]=s[kn]||{},s[kn][_]=b}function Xa(s,a,d,m,_){_=_||a+f(d)+(m?"_"+f(m):"");var b=s[kn]&&s[kn][_];if(!b)return this;!oe.touchNative&&oe.pointer&&a.indexOf("touch")===0?uc(s,a,b):oe.touch&&a==="dblclick"?wr(s,b):"removeEventListener"in s?s.removeEventListener(Nn[a]||a,b,!1):s.detachEvent("on"+a,b),s[kn][_]=null}function In(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function li(s){return Ja(s,"wheel",In),this}function ui(s){return ue(s,"mousedown touchstart dblclick contextmenu",In),s._leaflet_disable_click=!0,this}function Ye(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function dn(s){return Ye(s),In(s),this}function el(s){if(s.composedPath)return s.composedPath();for(var a=[],d=s.target;d;)a.push(d),d=d.parentNode;return a}function ho(s,a){if(!a)return new Z(s.clientX,s.clientY);var d=co(a),m=d.boundingClientRect;return new Z((s.clientX-m.left)/d.x-a.clientLeft,(s.clientY-m.top)/d.y-a.clientTop)}var Ke=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pc(s){return oe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Ke:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function tl(s,a){var d=a.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var mc={__proto__:null,on:ue,off:ze,stopPropagation:In,disableScrollPropagation:li,disableClickPropagation:ui,preventDefault:Ye,stop:dn,getPropagationPath:el,getMousePosition:ho,getWheelDelta:pc,isExternalTarget:tl,addListener:ue,removeListener:ze},nl=Ht.extend({run:function(s,a,d,m){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Tn(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,d=this._duration*1e3;a<d?this._runFrame(this._easeOut(a/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var d=this._startPos.add(this._offset.multiplyBy(s));a&&d._round(),pe(this._el,d),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ee=Ht.extend({options:{crs:ns,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=S(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ge(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ds&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ue(this._proxy,$a,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,d){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(ge(s),a,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=i({animate:d.animate},d.zoom),d.pan=i({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,d.zoom):this._tryAnimatedPan(s,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,d){var m=this.getZoomScale(a),_=this.getSize().divideBy(2),b=s instanceof Z?s:this.latLngToContainerPoint(s),z=b.subtract(_).multiplyBy(1-1/m),$=this.containerPointToLatLng(_.add(z));return this.setView($,a,{zoom:d})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():De(s);var d=X(a.paddingTopLeft||a.padding||[0,0]),m=X(a.paddingBottomRight||a.padding||[0,0]),_=this.getBoundsZoom(s,!1,d.add(m));if(_=typeof a.maxZoom=="number"?Math.min(a.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var b=m.subtract(d).divideBy(2),z=this.project(s.getSouthWest(),_),$=this.project(s.getNorthEast(),_),W=this.unproject(z.add($).divideBy(2).add(b),_);return{center:W,zoom:_}},fitBounds:function(s,a){if(s=De(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,a);return this.setView(d.center,d.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=X(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new nl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,d){if(d=d||{},d.animate===!1||!oe.any3d)return this.setView(s,a,d);this._stop();var m=this.project(this.getCenter()),_=this.project(s),b=this.getSize(),z=this._zoom;s=ge(s),a=a===void 0?z:a;var $=Math.max(b.x,b.y),W=$*this.getZoomScale(z,a),Q=_.distanceTo(m)||1,te=1.42,ce=te*te;function be(dt){var Ac=dt?-1:1,HT=dt?W:$,qT=W*W-$*$+Ac*ce*ce*Q*Q,GT=2*HT*ce*Q,wf=qT/GT,m_=Math.sqrt(wf*wf+1)-wf,ZT=m_<1e-9?-18:Math.log(m_);return ZT}function Gt(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function Et(dt){return(Math.exp(dt)+Math.exp(-dt))/2}function Pn(dt){return Gt(dt)/Et(dt)}var tn=be(0);function ko(dt){return $*(Et(tn)/Et(tn+te*dt))}function UT(dt){return $*(Et(tn)*Pn(tn+te*dt)-Gt(tn))/ce}function BT(dt){return 1-Math.pow(1-dt,1.5)}var $T=Date.now(),f_=(be(1)-tn)/te,WT=d.duration?1e3*d.duration:1e3*f_*.8;function p_(){var dt=(Date.now()-$T)/WT,Ac=BT(dt)*f_;dt<=1?(this._flyToFrame=V(p_,this),this._move(this.unproject(m.add(_.subtract(m).multiplyBy(UT(Ac)/Q)),z),this.getScaleZoom($/ko(Ac),z),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),p_.call(this),this},flyToBounds:function(s,a){var d=this._getBoundsCenterZoom(s,a);return this.flyTo(d.center,d.zoom,a)},setMaxBounds:function(s){return s=De(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,De(s));return d.equals(m)||this.panTo(m,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var d=X(a.paddingTopLeft||a.padding||[0,0]),m=X(a.paddingBottomRight||a.padding||[0,0]),_=this.project(this.getCenter()),b=this.project(s),z=this.getPixelBounds(),$=xe([z.min.add(d),z.max.subtract(m)]),W=$.getSize();if(!$.contains(b)){this._enforcingBounds=!0;var Q=b.subtract($.getCenter()),te=$.extend(b).getSize().subtract(W);_.x+=Q.x<0?-te.x:te.x,_.y+=Q.y<0?-te.y:te.y,this.panTo(this.unproject(_),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=a.divideBy(2).round(),_=d.divideBy(2).round(),b=m.subtract(_);return!b.x&&!b.y?this:(s.animate&&s.pan?this.panBy(b):(s.pan&&this._rawPanBy(b),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),d=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,d,s):navigator.geolocation.getCurrentPosition(a,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,d=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,d=s.coords.longitude,m=new we(a,d),_=m.toBounds(s.coords.accuracy*2),b=this._locateOptions;if(b.setView){var z=this.getBoundsZoom(_);this.setView(m,b.maxZoom?Math.min(z,b.maxZoom):z)}var $={latlng:m,bounds:_,timestamp:s.timestamp};for(var W in s.coords)typeof s.coords[W]=="number"&&($[W]=s.coords[W]);this.fire("locationfound",$)}},addHandler:function(s,a){if(!a)return this;var d=this[s]=new a(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ue(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),m=Ne("div",d,a||this._mapPane);return s&&(this._panes[s]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new ke(a,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,d){s=De(s),d=X(d||[0,0]);var m=this.getZoom()||0,_=this.getMinZoom(),b=this.getMaxZoom(),z=s.getNorthWest(),$=s.getSouthEast(),W=this.getSize().subtract(d),Q=xe(this.project($,m),this.project(z,m)).getSize(),te=oe.any3d?this.options.zoomSnap:1,ce=W.x/Q.x,be=W.y/Q.y,Gt=a?Math.max(ce,be):Math.min(ce,be);return m=this.getScaleZoom(Gt,m),te&&(m=Math.round(m/(te/100))*(te/100),m=a?Math.ceil(m/te)*te:Math.floor(m/te)*te),Math.max(_,Math.min(b,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var d=this._getTopLeftPoint(s,a);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var d=this.options.crs;return a=a===void 0?this._zoom:a,d.scale(s)/d.scale(a)},getScaleZoom:function(s,a){var d=this.options.crs;a=a===void 0?this._zoom:a;var m=d.zoom(s*d.scale(a));return isNaN(m)?1/0:m},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ge(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(s),a)},layerPointToLatLng:function(s){var a=X(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(ge(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ge(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(De(s))},distance:function(s,a){return this.options.crs.distance(ge(s),ge(a))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(s)))},mouseEventToContainerPoint:function(s){return ho(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Wa(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ue(a,"scroll",this._onScroll,this),this._containerId=f(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,ye(s,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=si(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(s.markerPane,"leaflet-zoom-hide"),ye(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,d){pe(this._mapPane,new Z(0,0));var m=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var _=this._zoom!==a;this._moveStart(_,d)._move(s,a)._moveEnd(_),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,d,m){a===void 0&&(a=this._zoom);var _=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),m?d&&d.pinch&&this.fire("zoom",d):((_||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){pe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[f(this._container)]=this;var a=s?ze:ue;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var d=[],m,_=a==="mouseout"||a==="mouseover",b=s.target||s.srcElement,z=!1;b;){if(m=this._targets[f(b)],m&&(a==="click"||a==="preclick")&&this._draggableMoved(m)){z=!0;break}if(m&&m.listens(a,!0)&&(_&&!tl(b,s)||(d.push(m),_))||b===this._container)break;b=b.parentNode}return!d.length&&!z&&!_&&this.listens(a,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var d=s.type;d==="mousedown"&&Tr(a),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,d){if(s.type==="click"){var m=i({},s);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var _=this._findEventTargets(s,a);if(d){for(var b=[],z=0;z<d.length;z++)d[z].listens(a,!0)&&b.push(d[z]);_=b.concat(_)}if(_.length){a==="contextmenu"&&Ye(s);var $=_[0],W={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=$.getLatLng&&(!$._radius||$._radius<=10);W.containerPoint=Q?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(s),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Q?$.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(z=0;z<_.length;z++)if(_[z].fire(a,W,!0),W.originalEvent._stopped||_[z].options.bubblingMouseEvents===!1&&U(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return Tn(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var d=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var d=this.getSize()._divideBy(2);return this.project(s,a)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,d){var m=this._getNewPixelOrigin(d,a);return this.project(s,a)._subtract(m)},_latLngBoundsToNewLayerBounds:function(s,a,d){var m=this._getNewPixelOrigin(d,a);return xe([this.project(s.getSouthWest(),a)._subtract(m),this.project(s.getNorthWest(),a)._subtract(m),this.project(s.getSouthEast(),a)._subtract(m),this.project(s.getNorthEast(),a)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,d){if(!d)return s;var m=this.project(s,a),_=this.getSize().divideBy(2),b=new fe(m.subtract(_),m.add(_)),z=this._getBoundsOffset(b,d,a);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?s:this.unproject(m.add(z),a)},_limitOffset:function(s,a){if(!a)return s;var d=this.getPixelBounds(),m=new fe(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(m,a))},_getBoundsOffset:function(s,a,d){var m=xe(this.project(a.getNorthEast(),d),this.project(a.getSouthWest(),d)),_=m.min.subtract(s.min),b=m.max.subtract(s.max),z=this._rebound(_.x,-b.x),$=this._rebound(_.y,-b.y);return new Z(z,$)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),d=this.getMaxZoom(),m=oe.any3d?this.options.zoomSnap:1;return m&&(s=Math.round(s/m)*m),Math.max(a,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var d=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,a),!0)},_createAnimProxy:function(){var s=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var d=hs,m=this._proxy.style[d];tr(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();tr(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(a),_=this._getCenterOffset(s)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(_)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fo(s,a){return new Ee(s,a)}var en=Ae.extend({options:{position:"topright"},initialize:function(s){S(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),d=this.getPosition(),m=s._controlCorners[d];return ye(a,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(a,m.firstChild):m.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),qt=function(s){return new en(s)};Ee.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",d=this._controlContainer=Ne("div",a+"control-container",this._container);function m(_,b){var z=a+_+" "+a+b;s[_+b]=Ne("div",z,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ue(this._controlCorners[s]);Ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rl=en.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,d,m){return d<m?-1:m<d?1:0}},initialize:function(s,a,d){S(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in s)this._addLayer(s[m],m);for(m in a)this._addLayer(a[m],m,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return en.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(f(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Ne("div",s),d=this.options.collapsed;a.setAttribute("aria-haspopup",!0),ui(a),li(a);var m=this._section=Ne("section",s+"-list");d&&(this._map.on("click",this.collapse,this),ue(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Ne("a",s+"-toggle",a);_.href="#",_.title="Layers",_.setAttribute("role","button"),ue(_,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){Ye(b),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ne("div",s+"-base",m),this._separator=Ne("div",s+"-separator",m),this._overlaysList=Ne("div",s+"-overlays",m),a.appendChild(m)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&f(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:d}),this.options.sortLayers&&this._layers.sort(l(function(m,_){return this.options.sortFunction(m.layer,_.layer,m.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fs(this._baseLayersList),fs(this._overlaysList),this._layerControlInputs=[];var s,a,d,m,_=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),a=a||m.overlay,s=s||!m.overlay,_+=m.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(f(s.target)),d=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,a)},_createRadioElement:function(s,a){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(s){var a=document.createElement("label"),d=this._map.hasLayer(s.layer),m;s.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+f(this),d),this._layerControlInputs.push(m),m.layerId=f(s.layer),ue(m,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var b=document.createElement("span");a.appendChild(b),b.appendChild(m),b.appendChild(_);var z=s.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,d,m=[],_=[];this._handlingClick=!0;for(var b=s.length-1;b>=0;b--)a=s[b],d=this._getLayer(a.layerId).layer,a.checked?m.push(d):a.checked||_.push(d);for(b=0;b<_.length;b++)this._map.hasLayer(_[b])&&this._map.removeLayer(_[b]);for(b=0;b<m.length;b++)this._map.hasLayer(m[b])||this._map.addLayer(m[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,d,m=this._map.getZoom(),_=s.length-1;_>=0;_--)a=s[_],d=this._getLayer(a.layerId).layer,a.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ue(s,"click",Ye),this.expand();var a=this;setTimeout(function(){ze(s,"click",Ye),a._preventClick=!1})}}),mf=function(s,a,d){return new rl(s,a,d)},kr=en.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",d=Ne("div",a+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,a+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,a+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,d,m,_){var b=Ne("a",d,m);return b.innerHTML=s,b.href="#",b.title=a,b.setAttribute("role","button"),b.setAttribute("aria-label",a),ui(b),ue(b,"click",dn),ue(b,"click",_,this),ue(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";Ze(this._zoomInButton,a),Ze(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ye(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ye(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new kr,this.addControl(this.zoomControl))});var gc=function(s){return new kr(s)},po=en.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",d=Ne("div",a),m=this.options;return this._addScales(m,a+"-line",d),s.on(m.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,d){s.metric&&(this._mScale=Ne("div",a,d)),s.imperial&&(this._iScale=Ne("div",a,d))},_update:function(){var s=this._map,a=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),d=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,d,a/s)},_updateImperial:function(s){var a=s*3.2808399,d,m,_;a>5280?(d=a/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(_=this._getRoundNum(a),this._updateScale(this._iScale,_+" ft",_/a))},_updateScale:function(s,a,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),d=s/a;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,a*d}}),mo=function(s){return new po(s)},vc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ci=en.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?vc+" ":"")+"Leaflet</a>"},initialize:function(s){S(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),ui(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new ci().addTo(this)});var gf=function(s){return new ci(s)};en.Layers=rl,en.Zoom=kr,en.Scale=po,en.Attribution=ci,qt.layers=mf,qt.zoom=gc,qt.scale=mo,qt.attribution=gf;var fn=Ae.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(s,a){return s.addHandler(a,this),this};var ps={Events:We},il=oe.touch?"touchstart mousedown":"mousedown",Bn=Ht.extend({options:{clickTolerance:3},initialize:function(s,a,d,m){S(this,m),this._element=s,this._dragStartTarget=a||s,this._preventOutline=d},enable:function(){this._enabled||(ue(this._dragStartTarget,il,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Bn._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,il,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ha(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Bn._dragging===this&&this.finishDrag();return}if(!(Bn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Bn._dragging=this,this._preventOutline&&Tr(this._element),Za(),Fn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,d=Ya(this._element);this._startPoint=new Z(a.clientX,a.clientY),this._startPos=Tn(this._element),this._parentScale=co(d);var m=s.type==="mousedown";ue(document,m?"mousemove":"touchmove",this._onMove,this),ue(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(a.clientX,a.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Ye(s),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),pe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),Ka(),Un();var a=this._moved&&this._moving;this._moving=!1,Bn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function go(s,a,d){var m,_=[1,4,2,8],b,z,$,W,Q,te,ce,be;for(b=0,te=s.length;b<te;b++)s[b]._code=nr(s[b],a);for($=0;$<4;$++){for(ce=_[$],m=[],b=0,te=s.length,z=te-1;b<te;z=b++)W=s[b],Q=s[z],W._code&ce?Q._code&ce||(be=bt(Q,W,ce,a,d),be._code=nr(be,a),m.push(be)):(Q._code&ce&&(be=bt(Q,W,ce,a,d),be._code=nr(be,a),m.push(be)),m.push(W));s=m}return s}function vo(s,a){var d,m,_,b,z,$,W,Q,te;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ce=ge([0,0]),be=De(s),Gt=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());Gt<1700&&(ce=_o(s));var Et=s.length,Pn=[];for(d=0;d<Et;d++){var tn=ge(s[d]);Pn.push(a.project(ge([tn.lat-ce.lat,tn.lng-ce.lng])))}for($=W=Q=0,d=0,m=Et-1;d<Et;m=d++)_=Pn[d],b=Pn[m],z=_.y*b.x-b.y*_.x,W+=(_.x+b.x)*z,Q+=(_.y+b.y)*z,$+=z*3;$===0?te=Pn[0]:te=[W/$,Q/$];var ko=a.unproject(X(te));return ge([ko.lat+ce.lat,ko.lng+ce.lng])}function _o(s){for(var a=0,d=0,m=0,_=0;_<s.length;_++){var b=ge(s[_]);a+=b.lat,d+=b.lng,m++}return ge([a/m,d/m])}var yo={__proto__:null,clipPolygon:go,polygonCenter:vo,centroid:_o};function sl(s,a){if(!a||!s.length)return s.slice();var d=a*a;return s=yc(s,d),s=_c(s,d),s}function ol(s,a,d){return Math.sqrt(Sn(s,a,d,!0))}function Nr(s,a,d){return Sn(s,a,d)}function _c(s,a){var d=s.length,m=typeof Uint8Array<"u"?Uint8Array:Array,_=new m(d);_[0]=_[d-1]=1,xo(s,_,a,0,d-1);var b,z=[];for(b=0;b<d;b++)_[b]&&z.push(s[b]);return z}function xo(s,a,d,m,_){var b=0,z,$,W;for($=m+1;$<=_-1;$++)W=Sn(s[$],s[m],s[_],!0),W>b&&(z=$,b=W);b>d&&(a[z]=1,xo(s,a,d,m,z),xo(s,a,d,z,_))}function yc(s,a){for(var d=[s[0]],m=1,_=0,b=s.length;m<b;m++)xc(s[m],s[_])>a&&(d.push(s[m]),_=m);return _<b-1&&d.push(s[b-1]),d}var al;function ms(s,a,d,m,_){var b=m?al:nr(s,d),z=nr(a,d),$,W,Q;for(al=z;;){if(!(b|z))return[s,a];if(b&z)return!1;$=b||z,W=bt(s,a,$,d,_),Q=nr(W,d),$===b?(s=W,b=Q):(a=W,z=Q)}}function bt(s,a,d,m,_){var b=a.x-s.x,z=a.y-s.y,$=m.min,W=m.max,Q,te;return d&8?(Q=s.x+b*(W.y-s.y)/z,te=W.y):d&4?(Q=s.x+b*($.y-s.y)/z,te=$.y):d&2?(Q=W.x,te=s.y+z*(W.x-s.x)/b):d&1&&(Q=$.x,te=s.y+z*($.x-s.x)/b),new Z(Q,te,_)}function nr(s,a){var d=0;return s.x<a.min.x?d|=1:s.x>a.max.x&&(d|=2),s.y<a.min.y?d|=4:s.y>a.max.y&&(d|=8),d}function xc(s,a){var d=a.x-s.x,m=a.y-s.y;return d*d+m*m}function Sn(s,a,d,m){var _=a.x,b=a.y,z=d.x-_,$=d.y-b,W=z*z+$*$,Q;return W>0&&(Q=((s.x-_)*z+(s.y-b)*$)/W,Q>1?(_=d.x,b=d.y):Q>0&&(_+=z*Q,b+=$*Q)),z=s.x-_,$=s.y-b,m?z*z+$*$:new Z(_,b)}function c(s){return!R(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function g(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),c(s)}function x(s,a){var d,m,_,b,z,$,W,Q;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=ge([0,0]),ce=De(s),be=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());be<1700&&(te=_o(s));var Gt=s.length,Et=[];for(d=0;d<Gt;d++){var Pn=ge(s[d]);Et.push(a.project(ge([Pn.lat-te.lat,Pn.lng-te.lng])))}for(d=0,m=0;d<Gt-1;d++)m+=Et[d].distanceTo(Et[d+1])/2;if(m===0)Q=Et[0];else for(d=0,b=0;d<Gt-1;d++)if(z=Et[d],$=Et[d+1],_=z.distanceTo($),b+=_,b>m){W=(b-m)/_,Q=[$.x-W*($.x-z.x),$.y-W*($.y-z.y)];break}var tn=a.unproject(X(Q));return ge([tn.lat+te.lat,tn.lng+te.lng])}var I={__proto__:null,simplify:sl,pointToSegmentDistance:ol,closestPointOnSegment:Nr,clipSegment:ms,_getEdgeIntersection:bt,_getBitCode:nr,_sqClosestPointOnSegment:Sn,isFlat:c,_flat:g,polylineCenter:x},B={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new fe([-180,-90],[180,90])},H={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,d=this.R,m=s.lat*a,_=this.R_MINOR/d,b=Math.sqrt(1-_*_),z=b*Math.sin(m),$=Math.tan(Math.PI/4-m/2)/Math.pow((1-z)/(1+z),b/2);return m=-d*Math.log(Math.max($,1e-10)),new Z(s.lng*a*d,m)},unproject:function(s){for(var a=180/Math.PI,d=this.R,m=this.R_MINOR/d,_=Math.sqrt(1-m*m),b=Math.exp(-s.y/d),z=Math.PI/2-2*Math.atan(b),$=0,W=.1,Q;$<15&&Math.abs(W)>1e-7;$++)Q=_*Math.sin(z),Q=Math.pow((1-Q)/(1+Q),_/2),W=Math.PI/2-2*Math.atan(b*Q)-z,z+=W;return new we(z*a,s.x*a/d)}},ee={__proto__:null,LonLat:B,Mercator:H,SphericalMercator:ni},Oe=i({},er,{code:"EPSG:3395",projection:H,transformation:function(){var s=.5/(Math.PI*H.R);return _r(s,.5,-s,.5)}()}),ht=i({},er,{code:"EPSG:4326",projection:B,transformation:_r(1/180,1,-1/180,.5)}),Pe=i({},gt,{projection:B,transformation:_r(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var d=a.lng-s.lng,m=a.lat-s.lat;return Math.sqrt(d*d+m*m)},infinite:!0});gt.Earth=er,gt.EPSG3395=Oe,gt.EPSG3857=ns,gt.EPSG900913=Ca,gt.EPSG4326=ht,gt.Simple=Pe;var Fe=Ht.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[f(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[f(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var d=this.getEvents();a.on(d,this),this.once("remove",function(){a.off(d,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=f(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=f(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return f(s)in this._layers},eachLayer:function(s,a){for(var d in this._layers)s.call(a,this._layers[d]);return this},_addLayers:function(s){s=s?R(s)?s:[s]:[];for(var a=0,d=s.length;a<d;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[f(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=f(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var _=this._zoomBoundLayers[m].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),a=_.maxZoom===void 0?a:Math.max(a,_.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Je=Fe.extend({initialize:function(s,a){S(this,a),this._layers={};var d,m;if(s)for(d=0,m=s.length;d<m;d++)this.addLayer(s[d])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[s]&&m[s].apply(m,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var d in this._layers)s.call(a,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return f(s)}}),hi=function(s,a){return new Je(s,a)},at=Je.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Je.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Je.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ke;for(var a in this._layers){var d=this._layers[a];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),wo=function(s,a){return new at(s,a)},rr=Ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){S(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(m,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(s,a){var d=this.options,m=d[a+"Size"];typeof m=="number"&&(m=[m,m]);var _=X(m),b=X(a==="shadow"&&d.shadowAnchor||d.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(d.className||""),b&&(s.style.marginLeft=-b.x+"px",s.style.marginTop=-b.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return oe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function bT(s){return new rr(s)}var ll=rr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof ll.imagePath!="string"&&(ll.imagePath=this._detectIconPath()),(this.options.imagePath||ll.imagePath)+rr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(d,m,_){var b=m.exec(d);return b&&b[_]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ne("div","leaflet-default-icon-path",document.body),a=si(s,"background-image")||si(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Zv=fn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Bn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,d=a._map,m=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,b=Tn(a._icon),z=d.getPixelBounds(),$=d.getPixelOrigin(),W=xe(z.min._subtract($).add(_),z.max._subtract($).subtract(_));if(!W.contains(b)){var Q=X((Math.max(W.max.x,b.x)-W.max.x)/(z.max.x-W.max.x)-(Math.min(W.min.x,b.x)-W.min.x)/(z.min.x-W.min.x),(Math.max(W.max.y,b.y)-W.max.y)/(z.max.y-W.max.y)-(Math.min(W.min.y,b.y)-W.min.y)/(z.min.y-W.min.y)).multiplyBy(m);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),pe(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,d=a._shadow,m=Tn(a._icon),_=a._map.layerPointToLatLng(m);d&&pe(d,m),a._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),wc=Fe.extend({options:{icon:new ll,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){S(this,a),this._latlng=ge(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=ge(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),ye(d,a),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ue(d,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),b=!1;_!==this._shadow&&(this._removeShadow(),b=!0),_&&(ye(_,a),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&b&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),Ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ue(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&pe(this._icon,s),this._shadow&&pe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&it(this._icon,s),this._shadow&&it(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,d=a.iconSize?X(a.iconSize):X(0,0),m=a.iconAnchor?X(a.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ET(s,a){return new wc(s,a)}var di=Fe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return S(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bc=di.extend({options:{fill:!0,radius:10},initialize:function(s,a){S(this,a),this._latlng=ge(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=ge(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return di.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,d=this._clickTolerance(),m=[s+d,a+d];this._pxBounds=new fe(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function TT(s,a){return new bc(s,a)}var vf=bc.extend({initialize:function(s,a,d){if(typeof a=="number"&&(a=i({},d,{radius:a})),S(this,a),this._latlng=ge(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ke(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:di.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===er.distance){var _=Math.PI/180,b=this._mRadius/er.R/_,z=d.project([a+b,s]),$=d.project([a-b,s]),W=z.add($).divideBy(2),Q=d.unproject(W).lat,te=Math.acos((Math.cos(b*_)-Math.sin(a*_)*Math.sin(Q*_))/(Math.cos(a*_)*Math.cos(Q*_)))/_;(isNaN(te)||te===0)&&(te=b/Math.cos(Math.PI/180*a)),this._point=W.subtract(d.getPixelOrigin()),this._radius=isNaN(te)?0:W.x-d.project([Q,s-te]).x,this._radiusY=W.y-z.y}else{var ce=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ce).x}this._updateBounds()}});function kT(s,a,d){return new vf(s,a,d)}var Ir=di.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){S(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,d=null,m=Sn,_,b,z=0,$=this._parts.length;z<$;z++)for(var W=this._parts[z],Q=1,te=W.length;Q<te;Q++){_=W[Q-1],b=W[Q];var ce=m(s,_,b,!0);ce<a&&(a=ce,d=m(s,_,b))}return d&&(d.distance=Math.sqrt(a)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return x(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=ge(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ke,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return c(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],d=c(s),m=0,_=s.length;m<_;m++)d?(a[m]=ge(s[m]),this._bounds.extend(a[m])):a[m]=this._convertLatLngs(s[m]);return a},_project:function(){var s=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,d){var m=s[0]instanceof we,_=s.length,b,z;if(m){for(z=[],b=0;b<_;b++)z[b]=this._map.latLngToLayerPoint(s[b]),d.extend(z[b]);a.push(z)}else for(b=0;b<_;b++)this._projectLatlngs(s[b],a,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,d,m,_,b,z,$,W;for(d=0,_=0,b=this._rings.length;d<b;d++)for(W=this._rings[d],m=0,z=W.length;m<z-1;m++)$=ms(W[m],W[m+1],s,m,!0),$&&(a[_]=a[_]||[],a[_].push($[0]),($[1]!==W[m+1]||m===z-2)&&(a[_].push($[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,d=0,m=s.length;d<m;d++)s[d]=sl(s[d],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var d,m,_,b,z,$,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,b=this._parts.length;d<b;d++)for($=this._parts[d],m=0,z=$.length,_=z-1;m<z;_=m++)if(!(!a&&m===0)&&ol(s,$[_],$[m])<=W)return!0;return!1}});function NT(s,a){return new Ir(s,a)}Ir._flat=g;var bo=Ir.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Ir.prototype._convertLatLngs.call(this,s),d=a.length;return d>=2&&a[0]instanceof we&&a[0].equals(a[d-1])&&a.pop(),a},_setLatLngs:function(s){Ir.prototype._setLatLngs.call(this,s),c(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,d=new Z(a,a);if(s=new fe(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,_=this._rings.length,b;m<_;m++)b=go(this._rings[m],s,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,d,m,_,b,z,$,W,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(b=0,W=this._parts.length;b<W;b++)for(d=this._parts[b],z=0,Q=d.length,$=Q-1;z<Q;$=z++)m=d[z],_=d[$],m.y>s.y!=_.y>s.y&&s.x<(_.x-m.x)*(s.y-m.y)/(_.y-m.y)+m.x&&(a=!a);return a||Ir.prototype._containsPoint.call(this,s,!0)}});function IT(s,a){return new bo(s,a)}var Sr=at.extend({initialize:function(s,a){S(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=R(s)?s:s.features,d,m,_;if(a){for(d=0,m=a.length;d<m;d++)_=a[d],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var b=this.options;if(b.filter&&!b.filter(s))return this;var z=Ec(s,b);return z?(z.feature=Nc(s),z.defaultOptions=z.options,this.resetStyle(z),b.onEachFeature&&b.onEachFeature(s,z),this.addLayer(z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function Ec(s,a){var d=s.type==="Feature"?s.geometry:s,m=d?d.coordinates:null,_=[],b=a&&a.pointToLayer,z=a&&a.coordsToLatLng||_f,$,W,Q,te;if(!m&&!d)return null;switch(d.type){case"Point":return $=z(m),Kv(b,s,$,a);case"MultiPoint":for(Q=0,te=m.length;Q<te;Q++)$=z(m[Q]),_.push(Kv(b,s,$,a));return new at(_);case"LineString":case"MultiLineString":return W=Tc(m,d.type==="LineString"?0:1,z),new Ir(W,a);case"Polygon":case"MultiPolygon":return W=Tc(m,d.type==="Polygon"?1:2,z),new bo(W,a);case"GeometryCollection":for(Q=0,te=d.geometries.length;Q<te;Q++){var ce=Ec({geometry:d.geometries[Q],type:"Feature",properties:s.properties},a);ce&&_.push(ce)}return new at(_);case"FeatureCollection":for(Q=0,te=d.features.length;Q<te;Q++){var be=Ec(d.features[Q],a);be&&_.push(be)}return new at(_);default:throw new Error("Invalid GeoJSON object.")}}function Kv(s,a,d,m){return s?s(a,d):new wc(d,m&&m.markersInheritOptions&&m)}function _f(s){return new we(s[1],s[0],s[2])}function Tc(s,a,d){for(var m=[],_=0,b=s.length,z;_<b;_++)z=a?Tc(s[_],a-1,d):(d||_f)(s[_]),m.push(z);return m}function yf(s,a){return s=ge(s),s.alt!==void 0?[w(s.lng,a),w(s.lat,a),w(s.alt,a)]:[w(s.lng,a),w(s.lat,a)]}function kc(s,a,d,m){for(var _=[],b=0,z=s.length;b<z;b++)_.push(a?kc(s[b],c(s[b])?0:a-1,d,m):yf(s[b],m));return!a&&d&&_.length>0&&_.push(_[0].slice()),_}function Eo(s,a){return s.feature?i({},s.feature,{geometry:a}):Nc(a)}function Nc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var xf={toGeoJSON:function(s){return Eo(this,{type:"Point",coordinates:yf(this.getLatLng(),s)})}};wc.include(xf),vf.include(xf),bc.include(xf),Ir.include({toGeoJSON:function(s){var a=!c(this._latlngs),d=kc(this._latlngs,a?1:0,!1,s);return Eo(this,{type:(a?"Multi":"")+"LineString",coordinates:d})}}),bo.include({toGeoJSON:function(s){var a=!c(this._latlngs),d=a&&!c(this._latlngs[0]),m=kc(this._latlngs,d?2:a?1:0,!0,s);return a||(m=[m]),Eo(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Je.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(d){a.push(d.toGeoJSON(s).geometry.coordinates)}),Eo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var d=a==="GeometryCollection",m=[];return this.eachLayer(function(_){if(_.toGeoJSON){var b=_.toGeoJSON(s);if(d)m.push(b.geometry);else{var z=Nc(b);z.type==="FeatureCollection"?m.push.apply(m,z.features):m.push(z)}}}),d?Eo(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Qv(s,a){return new Sr(s,a)}var ST=Qv,Ic=Fe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,d){this._url=s,this._bounds=De(a),S(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&br(this._image),this},bringToBack:function(){return this._map&&oi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=De(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Ne("img");if(ye(a,"leaflet-image-layer"),this._zoomAnimated&&ye(a,"leaflet-zoom-animated"),this.options.className&&ye(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;tr(this._image,d,a)},_reset:function(){var s=this._image,a=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=a.getSize();pe(s,a.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){it(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),PT=function(s,a,d){return new Ic(s,a,d)},Yv=Ic.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Ne("video");if(ye(a,"leaflet-image-layer"),this._zoomAnimated&&ye(a,"leaflet-zoom-animated"),this.options.className&&ye(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),s){for(var d=a.getElementsByTagName("source"),m=[],_=0;_<d.length;_++)m.push(d[_].src);this._url=d.length>0?m:[a.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var z=Ne("source");z.src=this._url[b],a.appendChild(z)}}});function CT(s,a,d){return new Yv(s,a,d)}var Jv=Ic.extend({_initImage:function(){var s=this._image=this._url;ye(s,"leaflet-image-layer"),this._zoomAnimated&&ye(s,"leaflet-zoom-animated"),this.options.className&&ye(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function AT(s,a,d){return new Jv(s,a,d)}var ir=Fe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof we||R(s))?(this._latlng=ge(s),S(this,a)):(S(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&it(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&it(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(it(this._container,0),this._removeTimeout=setTimeout(l(Ue,void 0,this._container),200)):Ue(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ge(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&br(this._container),this},bringToBack:function(){return this._map&&oi(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof at){a=null;var d=this._source._layers;for(var m in d)if(d[m]._map){a=d[m];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),d=this._getAnchor();this._zoomAnimated?pe(this._container,s.add(d)):a=a.add(s).add(d);var m=this._containerBottom=-a.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=m+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(s,a,d,m){var _=a;return _ instanceof s||(_=new s(m).setContent(a)),d&&_.setLatLng(d),_}}),Fe.include({_initOverlay:function(s,a,d,m){var _=d;return _ instanceof s?(S(_,m),_._source=this):(_=a&&!m?a:new s(m,this),_.setContent(d)),_}});var Sc=ir.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,ir.prototype.openOn.call(this,s)},onAdd:function(s){ir.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof di||this._source.on("preclick",In))},onRemove:function(s){ir.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof di||this._source.off("preclick",In))},getEvents:function(){var s=ir.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ne("div",s+"-content-wrapper",a);if(this._contentNode=Ne("div",s+"-content",d),ui(a),li(this._contentNode),ue(a,"contextmenu",In),this._tipContainer=Ne("div",s+"-tip-container",a),this._tip=Ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Ne("a",s+"-close-button",a);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ue(m,"click",function(_){Ye(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),a.width=d+1+"px",a.whiteSpace="",a.height="";var m=s.offsetHeight,_=this.options.maxHeight,b="leaflet-popup-scrolled";_&&m>_?(a.height=_+"px",ye(s,b)):Ze(s,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();pe(this._container,a.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(si(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+a,m=this._containerWidth,_=new Z(this._containerLeft,-d-this._containerBottom);_._add(Tn(this._container));var b=s.layerPointToContainerPoint(_),z=X(this.options.autoPanPadding),$=X(this.options.autoPanPaddingTopLeft||z),W=X(this.options.autoPanPaddingBottomRight||z),Q=s.getSize(),te=0,ce=0;b.x+m+W.x>Q.x&&(te=b.x+m-Q.x+W.x),b.x-te-$.x<0&&(te=b.x-$.x),b.y+d+W.y>Q.y&&(ce=b.y+d-Q.y+W.y),b.y-ce-$.y<0&&(ce=b.y-$.y),(te||ce)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,ce]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),RT=function(s,a){return new Sc(s,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(s,a,d){return this._initOverlay(Sc,s,a,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Fe.include({bindPopup:function(s,a){return this._popup=this._initOverlay(Sc,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof at||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){dn(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof di)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Pc=ir.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){ir.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){ir.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=ir.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,d,m=this._map,_=this._container,b=m.latLngToContainerPoint(m.getCenter()),z=m.layerPointToContainerPoint(s),$=this.options.direction,W=_.offsetWidth,Q=_.offsetHeight,te=X(this.options.offset),ce=this._getAnchor();$==="top"?(a=W/2,d=Q):$==="bottom"?(a=W/2,d=0):$==="center"?(a=W/2,d=Q/2):$==="right"?(a=0,d=Q/2):$==="left"?(a=W,d=Q/2):z.x<b.x?($="right",a=0,d=Q/2):($="left",a=W+(te.x+ce.x)*2,d=Q/2),s=s.subtract(X(a,d,!0)).add(te).add(ce),Ze(_,"leaflet-tooltip-right"),Ze(_,"leaflet-tooltip-left"),Ze(_,"leaflet-tooltip-top"),Ze(_,"leaflet-tooltip-bottom"),ye(_,"leaflet-tooltip-"+$),pe(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&it(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jT=function(s,a){return new Pc(s,a)};Ee.include({openTooltip:function(s,a,d){return this._initOverlay(Pc,s,a,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Fe.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pc,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[a](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof at||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(ue(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ue(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,d,m;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),m=this._map.containerPointToLayerPoint(d),a=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(a)}});var Xv=rr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(fs(a),a.appendChild(d.html)):a.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=X(d.bgPos);a.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function LT(s){return new Xv(s)}rr.Default=ll;var ul=Fe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){S(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ue(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(br(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,d=-s(-1/0,1/0),m=0,_=a.length,b;m<_;m++)b=a[m].style.zIndex,a[m]!==this._container&&b&&(d=s(d,+b));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){it(this._container,this.options.opacity);var s=+new Date,a=!1,d=!1;for(var m in this._tiles){var _=this._tiles[m];if(!(!_.current||!_.loaded)){var b=Math.min(1,(s-_.loaded)/200);it(_.el,b),b<1?a=!0:(_.active?d=!0:this._onOpaqueTile(_),_.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),a&&(O(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=a-Math.abs(s-d),this._onUpdateLevel(d)):(Ue(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[s],_=this._map;return m||(m=this._levels[s]={},m.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=a,m.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),m.zoom=s,this._setZoomTransform(m,_.getCenter(),_.getZoom()),y(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,a,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var m=a.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ue(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,d,m){var _=Math.floor(s/2),b=Math.floor(a/2),z=d-1,$=new Z(+_,+b);$.z=+z;var W=this._tileCoordsToKey($),Q=this._tiles[W];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),z>m?this._retainParent(_,b,z,m):!1)},_retainChildren:function(s,a,d,m){for(var _=2*s;_<2*s+2;_++)for(var b=2*a;b<2*a+2;b++){var z=new Z(_,b);z.z=d+1;var $=this._tileCoordsToKey(z),W=this._tiles[$];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);d+1<m&&this._retainChildren(_,b,d+1,m)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,d,m){var _=Math.round(a);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var b=this.options.updateWhenZooming&&_!==this._tileZoom;(!m||b)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,a)},_setZoomTransform:function(s,a,d){var m=this._map.getZoomScale(d,s.zoom),_=s.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(a,d)).round();oe.any3d?tr(s.el,_,m):pe(s.el,_)},_resetGrid:function(){var s=this._map,a=s.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],m).x/d.x),Math.ceil(s.project([0,a.wrapLng[1]],m).x/d.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],m).y/d.x),Math.ceil(s.project([a.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,d=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),m=a.getZoomScale(d,this._tileZoom),_=a.project(s,this._tileZoom).floor(),b=a.getSize().divideBy(m*2);return new fe(_.subtract(b),_.add(b))},_update:function(s){var a=this._map;if(a){var d=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(m),b=_.getCenter(),z=[],$=this.options.keepBuffer,W=new fe(_.getBottomLeft().subtract([$,-$]),_.getTopRight().add([$,-$]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var te=this._tiles[Q].coords;(te.z!==this._tileZoom||!W.contains(new Z(te.x,te.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ce=_.min.y;ce<=_.max.y;ce++)for(var be=_.min.x;be<=_.max.x;be++){var Gt=new Z(be,ce);if(Gt.z=this._tileZoom,!!this._isValidTile(Gt)){var Et=this._tiles[this._tileCoordsToKey(Gt)];Et?Et.current=!0:z.push(Gt)}}if(z.sort(function(tn,ko){return tn.distanceTo(b)-ko.distanceTo(b)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Pn=document.createDocumentFragment();for(be=0;be<z.length;be++)this._addTile(z[be],Pn);this._level.el.appendChild(Pn)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var d=this._globalTileRange;if(!a.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!a.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(s);return De(this.options.bounds).overlaps(m)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,d=this.getTileSize(),m=s.scaleBy(d),_=m.add(d),b=a.unproject(m,s.z),z=a.unproject(_,s.z);return[b,z]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),d=new ke(a[0],a[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),d=new Z(+a[0],+a[1]);return d.z=+a[2],d},_removeTile:function(s){var a=this._tiles[s];a&&(Ue(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ye(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=y,s.onmousemove=y,oe.ielt9&&this.options.opacity<1&&it(s,this.options.opacity)},_addTile:function(s,a){var d=this._getTilePos(s),m=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&V(l(this._tileReady,this,s,null,_)),pe(_,d),this._tiles[m]={el:_,coords:s,current:!0},a.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,a,d){a&&this.fire("tileerror",{error:a,tile:d,coords:s});var m=this._tileCoordsToKey(s);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(it(d.el,0),O(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),a||(ye(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new Z(this._wrapX?v(s.x,this._wrapX):s.x,this._wrapY?v(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new fe(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function DT(s){return new ul(s)}var To=ul.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=S(this,a),a.detectRetina&&oe.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var d=document.createElement("img");return ue(d,"load",l(this._tileOnLoad,this,a,d)),ue(d,"error",l(this._tileOnError,this,a,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var a={r:oe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=d),a["-y"]=d}return N(this._url,i(a,this.options))},_tileOnLoad:function(s,a){oe.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,d){var m=this.options.errorTileUrl;m&&a.getAttribute("src")!==m&&(a.src=m),s(d,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(s=a-s),s+m},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=y,a.onerror=y,!a.complete)){a.src=q;var d=this._tiles[s].coords;Ue(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:d})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",q),ul.prototype._removeTile.call(this,s)},_tileReady:function(s,a,d){if(!(!this._map||d&&d.getAttribute("src")===q))return ul.prototype._tileReady.call(this,s,a,d)}});function e_(s,a){return new To(s,a)}var t_=To.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var d=i({},this.defaultWmsParams);for(var m in a)m in this.options||(d[m]=a[m]);a=S(this,a);var _=a.detectRetina&&oe.retina?2:1,b=this.getTileSize();d.width=b.x*_,d.height=b.y*_,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,To.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),d=this._crs,m=xe(d.project(a[0]),d.project(a[1])),_=m.min,b=m.max,z=(this._wmsVersion>=1.3&&this._crs===ht?[_.y,_.x,b.y,b.x]:[_.x,_.y,b.x,b.y]).join(","),$=To.prototype.getTileUrl.call(this,s);return $+M(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(s,a){return i(this.wmsParams,s),a||this.redraw(),this}});function OT(s,a){return new t_(s,a)}To.WMS=t_,e_.wms=OT;var Pr=Fe.extend({options:{padding:.1},initialize:function(s){S(this,s),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var d=this._map.getZoomScale(a,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,a),b=m.multiplyBy(-d).add(_).subtract(this._map._getNewPixelOrigin(s,a));oe.any3d?tr(this._container,b,d):pe(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),d=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new fe(d,d.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),n_=Pr.extend({options:{tolerance:0},getEvents:function(){var s=Pr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ue(s,"mousemove",this._onMouseMove,this),ue(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ue(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,Ue(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pr.prototype._update.call(this);var s=this._bounds,a=this._container,d=s.getSize(),m=oe.retina?2:1;pe(a,s.min),a.width=m*d.x,a.height=m*d.y,a.style.width=d.x+"px",a.style.height=d.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Pr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[f(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,d=a.next,m=a.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete s._order,delete this._layers[f(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),d=[],m,_;for(_=0;_<a.length;_++){if(m=Number(a[_]),isNaN(m))return;d.push(m)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var d=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)s=m.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var d,m,_,b,z=s._parts,$=z.length,W=this._ctx;if($){for(W.beginPath(),d=0;d<$;d++){for(m=0,_=z[d].length;m<_;m++)b=z[d][m],W[m?"lineTo":"moveTo"](b.x,b.y);a&&W.closePath()}this._fillStroke(W,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,d=this._ctx,m=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||m)/m;_!==1&&(d.save(),d.scale(1,_)),d.beginPath(),d.arc(a.x,a.y/_,m,0,Math.PI*2,!1),_!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,a){var d=a.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),d,m,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var d,m,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(a)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(s),m&&(ye(this._container,"leaflet-interactive"),this._fireEvent([m],s,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,d){this._map._fireDOMEvent(a,d||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var d=a.next,m=a.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var d=a.next,m=a.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function r_(s){return oe.canvas?new n_(s):null}var cl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),MT={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=cl("shape");ye(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=cl("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[f(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Ue(a),s.removeInteractiveTarget(a),delete this._layers[f(s)]},_updateStyle:function(s){var a=s._stroke,d=s._fill,m=s.options,_=s._container;_.stroked=!!m.stroke,_.filled=!!m.fill,m.stroke?(a||(a=s._stroke=cl("stroke")),_.appendChild(a),a.weight=m.weight+"px",a.color=m.color,a.opacity=m.opacity,m.dashArray?a.dashStyle=R(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=m.lineCap.replace("butt","flat"),a.joinstyle=m.lineJoin):a&&(_.removeChild(a),s._stroke=null),m.fill?(d||(d=s._fill=cl("fill")),_.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(_.removeChild(d),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),d=Math.round(s._radius),m=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){br(s._container)},_bringToBack:function(s){oi(s._container)}},Cc=oe.vml?cl:Zs,hl=Pr.extend({_initContainer:function(){this._container=Cc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Cc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ue(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pr.prototype._update.call(this);var s=this._bounds,a=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,d.setAttribute("width",a.x),d.setAttribute("height",a.y)),pe(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=Cc("path");s.options.className&&ye(a,s.options.className),s.options.interactive&&ye(a,"leaflet-interactive"),this._updateStyle(s),this._layers[f(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ue(s._path),s.removeInteractiveTarget(s._path),delete this._layers[f(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,d=s.options;a&&(d.stroke?(a.setAttribute("stroke",d.color),a.setAttribute("stroke-opacity",d.opacity),a.setAttribute("stroke-width",d.weight),a.setAttribute("stroke-linecap",d.lineCap),a.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?a.setAttribute("stroke-dasharray",d.dashArray):a.removeAttribute("stroke-dasharray"),d.dashOffset?a.setAttribute("stroke-dashoffset",d.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),d.fill?(a.setAttribute("fill",d.fillColor||d.color),a.setAttribute("fill-opacity",d.fillOpacity),a.setAttribute("fill-rule",d.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,Aa(s._parts,a))},_updateCircle:function(s){var a=s._point,d=Math.max(Math.round(s._radius),1),m=Math.max(Math.round(s._radiusY),1)||d,_="a"+d+","+m+" 0 1,0 ",b=s._empty()?"M0 0":"M"+(a.x-d)+","+a.y+_+d*2+",0 "+_+-d*2+",0 ";this._setPath(s,b)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){br(s._path)},_bringToBack:function(s){oi(s._path)}});oe.vml&&hl.include(MT);function i_(s){return oe.svg||oe.vml?new hl(s):null}Ee.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&r_(s)||i_(s)}});var s_=bo.extend({initialize:function(s,a){bo.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=De(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function VT(s,a){return new s_(s,a)}hl.create=Cc,hl.pointsToPath=Aa,Sr.geometryToLayer=Ec,Sr.coordsToLatLng=_f,Sr.coordsToLatLngs=Tc,Sr.latLngToCoords=yf,Sr.latLngsToCoords=kc,Sr.getFeature=Eo,Sr.asFeature=Nc,Ee.mergeOptions({boxZoom:!0});var o_=fn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ue(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Fn(),Za(),this._startPoint=this._map.mouseEventToContainerPoint(s),ue(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new fe(this._point,this._startPoint),d=a.getSize();pe(this._box,a.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Ue(this._box),Ze(this._container,"leaflet-crosshair")),Un(),Ka(),ze(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new ke(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",o_),Ee.mergeOptions({doubleClickZoom:!0});var a_=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,d=a.getZoom(),m=a.options.zoomDelta,_=s.originalEvent.shiftKey?d-m:d+m;a.options.doubleClickZoom==="center"?a.setZoom(_):a.setZoomAround(s.containerPoint,_)}});Ee.addInitHook("addHandler","doubleClickZoom",a_),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var l_=fn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Bn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=De(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,_=(m-a+d)%s+a-d,b=(m+a+d)%s-a-d,z=Math.abs(_+d)<Math.abs(b+d)?_:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(s){var a=this._map,d=a.options,m=!d.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),m)a.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,z=d.easeLinearity,$=_.multiplyBy(z/b),W=$.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,W),te=$.multiplyBy(Q/W),ce=Q/(d.inertiaDeceleration*z),be=te.multiplyBy(-ce/2).round();!be.x&&!be.y?a.fire("moveend"):(be=a._limitOffset(be,a.options.maxBounds),V(function(){a.panBy(be,{duration:ce,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",l_),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var u_=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ue(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,d=s.scrollTop||a.scrollTop,m=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},d=this.keyCodes,m,_;for(m=0,_=d.left.length;m<_;m++)a[d.left[m]]=[-1*s,0];for(m=0,_=d.right.length;m<_;m++)a[d.right[m]]=[s,0];for(m=0,_=d.down.length;m<_;m++)a[d.down[m]]=[0,s];for(m=0,_=d.up.length;m<_;m++)a[d.up[m]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},d=this.keyCodes,m,_;for(m=0,_=d.zoomIn.length;m<_;m++)a[d.zoomIn[m]]=s;for(m=0,_=d.zoomOut.length;m<_;m++)a[d.zoomOut[m]]=-s},_addHooks:function(){ue(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,d=this._map,m;if(a in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[a],s.shiftKey&&(m=X(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(X(m),d.options.maxBounds)),d.options.worldCopyJump){var _=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(_)}else d.panBy(m)}else if(a in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;dn(s)}}});Ee.addInitHook("addHandler","keyboard",u_),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var c_=fn.extend({addHooks:function(){ue(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=pc(s),d=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),m),dn(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,b=d?Math.ceil(_/d)*d:_,z=s._limitZoom(a+(this._delta>0?b:-b))-a;this._delta=0,this._startTime=null,z&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+z):s.setZoomAround(this._lastMousePos,a+z))}});Ee.addInitHook("addHandler","scrollWheelZoom",c_);var zT=600;Ee.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var h_=fn.extend({addHooks:function(){ue(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new Z(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ue(document,"touchend",Ye),ue(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),zT),ue(document,"touchend touchcancel contextmenu",this._cancel,this),ue(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ze(document,"touchend",Ye),ze(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new Z(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});d._simulated=!0,a.target.dispatchEvent(d)}});Ee.addInitHook("addHandler","tapHold",h_),Ee.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var d_=fn.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),ue(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var d=a.mouseEventToContainerPoint(s.touches[0]),m=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ue(document,"touchmove",this._onTouchMove,this),ue(document,"touchend touchcancel",this._onTouchEnd,this),Ye(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,d=a.mouseEventToContainerPoint(s.touches[0]),m=a.mouseEventToContainerPoint(s.touches[1]),_=d.distanceTo(m)/this._startDist;if(this._zoom=a.getScaleZoom(_,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&_<1||this._zoom>a.getMaxZoom()&&_>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var b=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(_===1&&b.x===0&&b.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var z=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(z,this,!0),Ye(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",d_),Ee.BoxZoom=o_,Ee.DoubleClickZoom=a_,Ee.Drag=l_,Ee.Keyboard=u_,Ee.ScrollWheelZoom=c_,Ee.TapHold=h_,Ee.TouchZoom=d_,n.Bounds=fe,n.Browser=oe,n.CRS=gt,n.Canvas=n_,n.Circle=vf,n.CircleMarker=bc,n.Class=Ae,n.Control=en,n.DivIcon=Xv,n.DivOverlay=ir,n.DomEvent=mc,n.DomUtil=dc,n.Draggable=Bn,n.Evented=Ht,n.FeatureGroup=at,n.GeoJSON=Sr,n.GridLayer=ul,n.Handler=fn,n.Icon=rr,n.ImageOverlay=Ic,n.LatLng=we,n.LatLngBounds=ke,n.Layer=Fe,n.LayerGroup=Je,n.LineUtil=I,n.Map=Ee,n.Marker=wc,n.Mixin=ps,n.Path=di,n.Point=Z,n.PolyUtil=yo,n.Polygon=bo,n.Polyline=Ir,n.Popup=Sc,n.PosAnimation=nl,n.Projection=ee,n.Rectangle=s_,n.Renderer=Pr,n.SVG=hl,n.SVGOverlay=Jv,n.TileLayer=To,n.Tooltip=Pc,n.Transformation=ri,n.Util=D,n.VideoOverlay=Yv,n.bind=l,n.bounds=xe,n.canvas=r_,n.circle=kT,n.circleMarker=TT,n.control=qt,n.divIcon=LT,n.extend=i,n.featureGroup=wo,n.geoJSON=Qv,n.geoJson=ST,n.gridLayer=DT,n.icon=bT,n.imageOverlay=PT,n.latLng=ge,n.latLngBounds=De,n.layerGroup=hi,n.map=fo,n.marker=ET,n.point=X,n.polygon=IT,n.polyline=NT,n.popup=RT,n.rectangle=VT,n.setOptions=S,n.stamp=f,n.svg=i_,n.svgOverlay=AT,n.tileLayer=e_,n.tooltip=jT,n.transformation=_r,n.version=r,n.videoOverlay=CT;var FT=window.L;n.noConflict=function(){return window.L=FT,this},window.L=n})})(lm,lm.exports);var ba=lm.exports;const Yi=gd(ba);function Ud(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Bd(t,e){return e==null?function(r,i){const o=F.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=F.useRef();o.current||(o.current=t(r,i));const l=F.useRef(r),{instance:h}=o.current;return F.useEffect(function(){l.current!==r&&(e(h,r,l.current),l.current=r)},[h,r,i]),o}}function Ub(t,e){F.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Bb(t){return function(n){const r=zd(),i=t(Fd(n,r),r);return Ob(r.map,n.attribution),$g(i.current,n.eventHandlers),Ub(i.current,r),i}}function Z2(t,e){const n=F.useRef();F.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}function K2(t){return function(n){const r=zd(),i=t(Fd(n,r),r);return $g(i.current,n.eventHandlers),Ub(i.current,r),Z2(i.current,n),i}}function Q2(t,e){const n=Bd(t,e),r=Bb(n);return Fb(r)}function Y2(t,e){const n=Bd(t),r=G2(n,e);return H2(r)}function J2(t,e){const n=Bd(t,e),r=K2(n);return Fb(r)}function X2(t,e){const n=Bd(t,e),r=Bb(n);return q2(r)}function eS(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function Wg(){return zd().map}function tS(t){const e=Wg();return F.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function um(){return um=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},um.apply(this,arguments)}function nS({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:l,style:h,whenReady:f,zoom:p,...v},y){const[w]=F.useState({className:i,id:o,style:h}),[E,j]=F.useState(null);F.useImperativeHandle(y,()=>(E==null?void 0:E.map)??null,[E]);const S=F.useCallback(C=>{if(C!==null&&E===null){const N=new ba.Map(C,v);n!=null&&p!=null?N.setView(n,p):t!=null&&N.fitBounds(t,e),f!=null&&N.whenReady(f),j(W2(N))}},[]);F.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const M=E?nn.createElement(zb,{value:E},r):l??null;return nn.createElement("div",um({},w,{ref:S}),M)}const $b=F.forwardRef(nS),Kf=Q2(function({position:e,...n},r){const i=new ba.Marker(e,n);return Ud(i,Mb(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),rS=J2(function({positions:e,...n},r){const i=new ba.Polyline(e,n);return Ud(i,Mb(r,{overlayContainer:i}))},function(e,n,r){n.positions!==r.positions&&e.setLatLngs(n.positions)}),Qf=Y2(function(e,n){const r=new ba.Popup(e,n.overlayContainer);return Ud(r,n)},function(e,n,{position:r},i){F.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),i(!0))}function f(p){p.popup===l&&i(!1)}return n.map.on({popupopen:h,popupclose:f}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:f}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,i,r])}),Wb=X2(function({url:e,...n},r){const i=new ba.TileLayer(e,Fd(n,r));return Ud(i,r)},function(e,n,r){eS(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete Yi.Icon.Default.prototype._getIconUrl;Yi.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const iS=({onCenterChange:t,center:e})=>{const n=Wg(),r=F.useRef(!0);return F.useEffect(()=>{e&&r.current&&(n.flyTo(e,n.getZoom()),r.current=!1)},[e,n]),tS({moveend:()=>{const i=n.getCenter();t([i.lat,i.lng])}}),null},My=({label:t,value:e,onChange:n,placeholder:r})=>{const[i,o]=F.useState(!1),[l,h]=F.useState(""),[f,p]=F.useState([]),[v,y]=F.useState(!1),w=F.useRef(null),[E,j]=F.useState([-17.8216,31.0492]),[S,M]=F.useState(""),[C,N]=F.useState(!1);F.useEffect(()=>{e&&e.address&&M(e.address)},[e]),F.useEffect(()=>{if(!l||l.length<3){p([]);return}return w.current&&clearTimeout(w.current),w.current=setTimeout(async()=>{try{const A=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}&viewbox=25.237,-22.422,33.068,-15.609&bounded=0&limit=5`)).json();p(A||[]),y(!0)}catch(k){console.error("Autocomplete failed:",k)}},500),()=>clearTimeout(w.current)},[l]);const R=k=>{const T=parseFloat(k.lat),A=parseFloat(k.lon);j([T,A]),M(k.display_name.split(",").slice(0,3).join(",")),h(k.display_name.split(",")[0]),p([]),y(!1)},U=async k=>{if(k.preventDefault(),!!l){N(!0),y(!1);try{const A=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}&limit=1`)).json();A&&A.length>0&&R(A[0])}catch(T){console.error("Search failed:",T)}finally{N(!1)}}},q=async(k,T)=>{N(!0);try{const P=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${k}&lon=${T}`)).json();if(P&&P.display_name){const V=P.display_name.split(",").slice(0,3).join(",");M(V)}}catch(A){console.error("Reverse geocode failed:",A)}finally{N(!1)}},G=()=>{n({address:S||"Selected Location",coords:E}),o(!1)};return u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[10px] font-black text-text-muted uppercase",children:t}),u.jsxs("div",{onClick:()=>o(!0),className:"relative cursor-pointer group",children:[u.jsx(hr,{className:"absolute left-3 top-3.5 w-4 h-4 text-text-muted group-hover:text-primary transition-colors"}),u.jsx("div",{className:`w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm transition-all group-hover:border-primary text-slate-900 ${e?"text-slate-900":"text-slate-400"}`,children:(e==null?void 0:e.address)||r})]}),i&&u.jsxs("div",{className:"fixed inset-0 z-[1000] bg-background flex flex-col animate-in fade-in duration-200",children:[u.jsxs("div",{className:"p-4 border-b border-white/5 flex justify-between items-center bg-surface z-10 shadow-sm relative",children:[u.jsxs("h3",{className:"font-black text-slate-900 uppercase text-lg",children:["Set ",t||"Location"]}),u.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:u.jsx(Au,{className:"w-6 h-6 text-slate-400"})})]}),u.jsxs("div",{className:"p-4 bg-background border-b border-slate-100 flex gap-2 z-20 relative",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx($i,{className:"absolute left-3 top-3.5 w-5 h-5 text-slate-400"}),u.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search location (e.g. 'Harare')...",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900 text-base font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-primary placeholder:text-slate-400",value:l,onChange:k=>{h(k.target.value),y(!0)},onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),U(k))}}),v&&f.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 animate-in slide-in-from-top-2",children:f.map((k,T)=>u.jsxs("button",{onClick:()=>R(k),className:"w-full text-left px-4 py-3 hover:bg-slate-50 border-b border-slate-50 last:border-0 flex items-center transition-colors group",children:[u.jsx(hr,{className:"w-4 h-4 text-slate-300 mr-3 group-hover:text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-sm text-slate-800",children:k.display_name.split(",")[0]}),u.jsx("p",{className:"text-[10px] text-slate-500 truncate",children:k.display_name})]})]},T))})]}),u.jsx("button",{type:"button",onClick:U,className:"bg-primary text-white px-6 py-3 rounded-xl font-bold text-base hover:bg-amber-600 transition-colors shadow-lg shadow-amber-500/20",children:"Search"})]}),u.jsxs("div",{className:"relative flex-1 bg-slate-800 min-h-0",children:[u.jsxs($b,{center:E,zoom:18,className:"w-full h-full",children:[u.jsx(Wb,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u.jsx(iS,{center:E,onCenterChange:k=>{j(k),q(k[0],k[1])}})]}),u.jsx("button",{type:"button",onClick:()=>{navigator.geolocation&&(N(!0),navigator.geolocation.getCurrentPosition(k=>{const{latitude:T,longitude:A}=k.coords;j([T,A]),q(T,A),N(!1)},k=>{console.error("Geolocation error:",k),N(!1),alert("Could not access your location. Please check browser permissions.")}))},className:"absolute bottom-28 right-4 z-[900] bg-surface p-3.5 rounded-full shadow-xl hover:bg-background transition-colors border border-white/10",title:"Use My Current Location",children:u.jsx(Bg,{className:"w-6 h-6 text-primary fill-current"})}),u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none z-[1000] flex flex-col items-center",children:u.jsxs("div",{className:"relative",children:[u.jsx(hr,{className:"w-10 h-10 text-primary drop-shadow-2xl filter",fill:"currentColor",strokeWidth:1.5}),u.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-3 h-1.5 bg-black/50 rounded-full blur-[2px]"})]})}),u.jsx("div",{className:"absolute bottom-6 left-4 right-4 bg-surface/95 backdrop-blur-md p-4 rounded-2xl shadow-xl border border-white/10 z-[1000]",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`mt-1.5 w-3 h-3 rounded-full flex-shrink-0 ${C?"bg-primary animate-pulse":"bg-green-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-[10px] uppercase font-black text-text-muted mb-1 tracking-wider",children:"Confirmed Location"}),u.jsx("p",{className:"text-sm font-black text-slate-900 line-clamp-2 leading-tight",children:C?"Identifying exact street address...":S||"Drag map to center on your location"})]}),u.jsx("button",{onClick:G,disabled:C||!S,className:"ml-2 py-3 px-6 bg-primary hover:bg-primary/90 text-background rounded-xl font-black uppercase text-xs shadow-lg transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:"Confirm"})]})})]})]})]})},Qh=({active:t,onClick:e,icon:n,label:r})=>u.jsxs("button",{onClick:e,className:`flex-1 flex flex-col items-center py-3 rounded-xl transition-all ${t?"bg-primary text-background shadow-lg":"text-text-muted hover:bg-white/5"}`,children:[u.jsx(n,{className:`w-5 h-5 mb-1 ${t?"scale-110":""}`}),u.jsx("span",{className:"text-[9px] font-black uppercase tracking-tighter leading-none",children:r})]}),Vy={open:{label:"Search Active",color:"bg-primary/10 text-primary border-primary/20",icon:$i},assigned:{label:"Driver Assigned",color:"bg-secondary/10 text-secondary border-secondary/20",icon:Ds},transit:{label:"In Transit",color:"bg-blue-900/20 text-blue-400 border-blue-900/30",icon:U2},delivered:{label:"Cargo Delivered",color:"bg-green-900/20 text-green-400 border-green-900/30",icon:mr},paid:{label:"Funds Released",color:"bg-surface text-text-muted border-white/10",icon:Wi}},du=({status:t})=>{const e=Vy[t]||Vy.open,n=e.icon;return u.jsxs("span",{className:`px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider flex items-center border ${e.color}`,children:[u.jsx(n,{className:"w-3 h-3 mr-1"}),e.label]})};delete Yi.Icon.Default.prototype._getIconUrl;Yi.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const sS=new Yi.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/758/758784.png",iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20],className:"driver-marker-icon"}),oS=new Yi.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),aS=new Yi.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function lS({bounds:t}){const e=Wg();return F.useEffect(()=>{t&&t.length>0&&e.fitBounds(t,{padding:[50,50]})},[t,e]),null}const Hb=({startPos:t,endPos:e,driverPos:n})=>{const r=[t,e,n].filter(Boolean),i=r.length>0?Yi.latLngBounds(r):null;return!t||!e||!Array.isArray(t)||!Array.isArray(e)?u.jsx("div",{className:"h-full w-full bg-slate-100 flex items-center justify-center text-slate-400",children:"Loading Map Data..."}):u.jsxs($b,{center:t,zoom:13,className:"w-full h-full rounded-xl z-0",style:{height:"100%"},children:[u.jsx(Wb,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u.jsx(lS,{bounds:i}),t&&u.jsx(Kf,{position:t,icon:oS,children:u.jsx(Qf,{children:"Pickup Location"})}),e&&u.jsx(Kf,{position:e,icon:aS,children:u.jsx(Qf,{children:"Destination"})}),n&&u.jsx(Kf,{position:n,icon:sS,children:u.jsx(Qf,{children:"Driver's Current Location"})}),t&&e&&u.jsx(rS,{positions:[t,e],color:"blue",dashArray:"10, 10",opacity:.4})]})},qb=({profileData:t,role:e,expanded:n=!1})=>{var l,h,f,p,v,y,w,E,j,S,M,C,N,R,U,q;const r=t||{universal:{displayName:"Unknown User",photoURL:null,verified:!1,rating:0,memberSince:new Date().getFullYear()},hauler:{},supplier:{}},i=e==="hauler",o=i?{border:"border-amber-500/50",bg:"bg-slate-900",text:"text-white",accent:"text-amber-400",subtext:"text-slate-400",badge:"bg-amber-400/10 text-amber-400 border-amber-400/20"}:{border:"border-slate-300",bg:"bg-white",text:"text-slate-900",accent:"text-blue-600",subtext:"text-slate-500",badge:"bg-blue-50 text-blue-600 border-blue-200"};return u.jsxs("div",{className:`w-full relative overflow-hidden rounded-2xl border-2 ${o.border} ${o.bg} shadow-xl transition-all duration-300`,children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/5 to-transparent rounded-bl-full pointer-events-none"}),u.jsxs("div",{className:"p-5 flex items-start space-x-4 relative z-10",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`w-16 h-16 rounded-xl border-2 ${i?"border-slate-700":"border-slate-100"} overflow-hidden shadow-lg bg-slate-200 flex items-center justify-center`,children:r.universal.photoURL?u.jsx("img",{src:r.universal.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):i?u.jsx(At,{className:"w-8 h-8 text-slate-400"}):u.jsx(cu,{className:"w-8 h-8 text-slate-400"})}),r.universal.verified&&u.jsx("div",{className:"absolute -bottom-2 -right-2 bg-green-500 text-white p-1 rounded-full border-2 border-white shadow-sm",title:"Verified Identity",children:u.jsx(E2,{className:"w-3 h-3"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("h3",{className:`text-lg font-black uppercase truncate ${o.text}`,children:i?r.universal.displayName||"Unregistered Driver":((l=r.supplier)==null?void 0:l.companyName)||r.universal.displayName||"Unknown Company"}),i&&((h=r.hauler)==null?void 0:h.fleetType)&&u.jsx("span",{className:"hidden sm:inline-block px-1.5 py-0.5 rounded text-[9px] font-bold uppercase bg-slate-700 text-slate-300 border border-slate-600",children:r.hauler.fleetType})]}),u.jsx("div",{className:"flex items-center space-x-3 mt-1",children:u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(V2,{className:`w-3.5 h-3.5 ${o.accent} fill-current`}),u.jsx("span",{className:`text-xs font-bold ${o.text}`,children:r.universal.rating||"New"}),u.jsxs("span",{className:`text-[10px] ${o.subtext}`,children:["(",r.universal.reviewsCount||0,")"]}),u.jsxs("span",{className:`text-[10px] ${o.subtext}`,children:[" Member since ",r.universal.memberSince]})]})}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:i?u.jsxs(u.Fragment,{children:[((f=r.hauler)==null?void 0:f.insuranceStatus)&&u.jsx(Yf,{icon:Wi,text:"Insured",theme:o}),((p=r.hauler)==null?void 0:p.onTimeRate)&&u.jsx(Yf,{icon:Vd,text:`${r.hauler.onTimeRate}% On-Time`,theme:o})]}):u.jsx(u.Fragment,{children:((v=r.supplier)==null?void 0:v.isEscrowFunded)&&u.jsx(Yf,{icon:Db,text:"Instant Pay",theme:o})})})]})]}),n&&u.jsxs("div",{className:"px-5 pb-5 pt-0 relative z-10 animate-in slide-in-from-top-2",children:[u.jsx("div",{className:`w-full h-px ${i?"bg-slate-800":"bg-slate-100"} my-4`}),i?u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:`text-[10px] font-black uppercase tracking-wider ${o.subtext}`,children:"Fleet Asset"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(pi,{label:"Vehicle",value:(y=r.hauler)==null?void 0:y.fleetType,theme:o}),u.jsx(pi,{label:"Capacity",value:(w=r.hauler)!=null&&w.maxTonnage?`${r.hauler.maxTonnage} Tons`:null,theme:o}),u.jsx(pi,{label:"Bed Length",value:(E=r.hauler)!=null&&E.bedLength?`${r.hauler.bedLength}m`:null,theme:o})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:`text-[10px] font-black uppercase tracking-wider ${o.subtext}`,children:"Performance"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(pi,{label:"Distance",value:(j=r.hauler)!=null&&j.totalDistance?`${r.hauler.totalDistance} km`:null,theme:o}),u.jsx(pi,{label:"Cancel Rate",value:(S=r.hauler)!=null&&S.cancelRate?`${r.hauler.cancelRate}%`:null,theme:o,warning:parseInt((M=r.hauler)==null?void 0:M.cancelRate)>10})]})]}),((C=r.hauler)==null?void 0:C.equipmentTags)&&r.hauler.equipmentTags.length>0&&u.jsx("div",{className:"col-span-2 pt-2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:r.hauler.equipmentTags.map(G=>u.jsx("span",{className:`px-2 py-1 rounded text-[9px] font-bold uppercase border ${i?"bg-slate-800 border-slate-700 text-slate-300":"bg-slate-100 border-slate-200 text-slate-600"}`,children:G},G))})})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:`text-[10px] font-black uppercase tracking-wider ${o.subtext}`,children:"Business"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(pi,{label:"Industry",value:(N=r.supplier)==null?void 0:N.industry,theme:o}),u.jsx(pi,{label:"Payment",value:((R=r.supplier)==null?void 0:R.paymentTerms)||"Net 30",theme:o})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:`text-[10px] font-black uppercase tracking-wider ${o.subtext}`,children:"Facility"}),u.jsx("div",{className:"space-y-1",children:u.jsx(pi,{label:"Hours",value:(U=r.supplier)==null?void 0:U.loadingHours,theme:o})})]})]}),((q=r.supplier)==null?void 0:q.facilities)&&r.supplier.facilities.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1",children:r.supplier.facilities.map(G=>u.jsx("span",{className:"px-2 py-1 rounded text-[9px] font-bold uppercase border bg-slate-50 border-slate-200 text-slate-600",children:G},G))})]})]})]})},Yf=({icon:t,text:e,theme:n})=>u.jsxs("div",{className:`flex items-center space-x-1 px-2 py-0.5 rounded border ${n.badge}`,children:[u.jsx(t,{className:"w-3 h-3"}),u.jsx("span",{className:"text-[9px] font-black uppercase",children:e})]}),pi=({label:t,value:e,theme:n,warning:r})=>e?u.jsxs("div",{className:"flex justify-between items-center text-xs",children:[u.jsx("span",{className:`${n.subtext}`,children:t}),u.jsx("span",{className:`font-bold ${r?"text-red-500":n.text}`,children:e})]}):null,uS={harare:[-17.8216,31.0492],bulawayo:[-20.1367,28.5818],gweru:[-19.4587,29.8105],mutare:[-18.9728,32.6694],masvingo:[-20.0723,30.8277],"victoria falls":[-17.9243,25.8559],kwekwe:[-18.9201,29.8236],chinhoyi:[-17.3667,30.2],hwange:[-18.3647,26.4988],kadoma:[-18.3333,29.9167]},fu=t=>{if(!t)return[-17.8216,31.0492];const e=t.toLowerCase().trim(),n=uS[e];if(n)return n;let r=0;for(let l=0;l<e.length;l++)r=e.charCodeAt(l)+((r<<5)-r);const i=r%100/1e3,o=(r>>2)%100/1e3;return[-17.82+i,31.05+o]},cS=(t,e,n)=>{const r=t[0]+(e[0]-t[0])*n,i=t[1]+(e[1]-t[1])*n;return[r,i]},Gb=({job:t,onClose:e})=>{var r,i,o,l;if(!t)return null;const n=()=>{window.print()};return u.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900/80 backdrop-blur-sm flex items-center justify-center overflow-y-auto print:bg-white print:static print:block",children:[u.jsxs("div",{className:"bg-white w-full max-w-4xl min-h-[100vh] sm:min-h-0 sm:h-auto sm:rounded-none shadow-2xl overflow-hidden print:shadow-none print:w-full print:max-w-none print:h-auto print:p-0",children:[u.jsxs("div",{className:"bg-slate-800 text-white p-4 flex justify-between items-center print:hidden border-b border-slate-700",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-lg",children:"Bill Of Lading Preview"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Review details before printing."})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-bold text-slate-300 hover:text-white",children:"Close"}),u.jsxs("button",{onClick:n,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg shadow-lg flex items-center",children:[u.jsx(aa,{className:"w-4 h-4 mr-2"}),"Print / Save PDF"]})]})]}),u.jsxs("div",{className:"p-8 sm:p-12 text-slate-900 print:text-black print:p-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-8 border-b-2 border-black pb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-2",children:"Bill Of Lading"}),u.jsxs("p",{className:"text-sm font-bold",children:["Document #: BOL-",t.id.slice(-6).toUpperCase()]}),u.jsxs("p",{className:"text-sm",children:["Date: ",new Date().toLocaleDateString()]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("h2",{className:"text-xl font-black text-slate-700",children:"AutoDirect Logistics"}),u.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Digital Freight Network"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[u.jsxs("div",{className:"border border-slate-300 p-4",children:[u.jsx("h3",{className:"text-xs font-black uppercase text-slate-500 mb-2 border-b border-slate-200 pb-1",children:"Shipper / Origin"}),u.jsx("p",{className:"font-bold text-lg mb-1",children:((i=(r=t.supplierProfile)==null?void 0:r.universal)==null?void 0:i.displayName)||"Shipper (Unknown)"}),u.jsx("p",{className:"text-sm mb-2 max-w-[200px]",children:t.departure}),u.jsx("div",{className:"text-xs text-slate-500 space-y-0.5",children:u.jsxs("p",{children:["Email: ",t.supplierEmail||"N/A"]})})]}),u.jsxs("div",{className:"border border-slate-300 p-4",children:[u.jsx("h3",{className:"text-xs font-black uppercase text-slate-500 mb-2 border-b border-slate-200 pb-1",children:"Consignee / Destination"}),u.jsx("p",{className:"font-bold text-lg mb-1",children:t.consigneeName||"Pending Consignee"}),u.jsx("p",{className:"text-sm mb-2 max-w-[200px]",children:t.destination}),u.jsx("div",{className:"text-xs text-slate-500 space-y-0.5",children:u.jsxs("p",{children:["Instructions: ",t.deliveryInstructions||"Standard Delivery"]})})]})]}),u.jsx("div",{className:"mb-8 border border-slate-300 p-4 bg-slate-50 print:bg-white",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-black uppercase text-slate-500 mb-2",children:"Carrier Information"}),u.jsx("p",{className:"font-bold text-lg",children:((l=(o=t.haulerProfile)==null?void 0:o.universal)==null?void 0:l.displayName)||"Carrier Pending Assignment"}),u.jsxs("p",{className:"text-sm",children:["Driver ID: ",t.haulerId||"N/A"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"text-xs font-black uppercase text-slate-500 mb-2",children:"Transport Mode"}),u.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[u.jsx(At,{className:"w-5 h-5"}),u.jsx("span",{className:"font-bold",children:t.fleetType})]})]})]})}),u.jsxs("div",{className:"mb-12",children:[u.jsx("h3",{className:"text-sm font-black uppercase mb-2",children:"Cargo Manifest"}),u.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-sm",children:[u.jsx("thead",{className:"bg-slate-100 print:bg-slate-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"border border-slate-300 p-3 text-left w-16",children:"Qty"}),u.jsx("th",{className:"border border-slate-300 p-3 text-left",children:"Description of Goods"}),u.jsx("th",{className:"border border-slate-300 p-3 text-right w-32",children:"Weight (Tons)"}),u.jsx("th",{className:"border border-slate-300 p-3 text-center w-24",children:"Hazmat"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{className:"border border-slate-300 p-3 font-bold",children:"1"}),u.jsxs("td",{className:"border border-slate-300 p-3",children:[u.jsx("p",{className:"font-bold",children:t.goodsType}),u.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Standard container/load configuration."})]}),u.jsxs("td",{className:"border border-slate-300 p-3 text-right font-mono",children:[t.tonnage," T"]}),u.jsx("td",{className:"border border-slate-300 p-3 text-center",children:"No"})]}),[...Array(3)].map((h,f)=>u.jsxs("tr",{children:[u.jsx("td",{className:"border border-slate-300 p-3",children:""}),u.jsx("td",{className:"border border-slate-300 p-3",children:""}),u.jsx("td",{className:"border border-slate-300 p-3",children:""}),u.jsx("td",{className:"border border-slate-300 p-3",children:""})]},f))]})]})]}),u.jsxs("div",{className:"border-t-2 border-black pt-6",children:[u.jsx("p",{className:"text-[10px] text-justify text-slate-500 mb-8 uppercase leading-relaxed",children:"Received, subject to independently agreed rates, tariffs, and conditions of carrier, the property described above in apparent good order, except as noted. Limit of liability is based on the weight of the shipment unless otherwise declared. The carrier shall not make delivery of this shipment without payment of freight and all other lawful charges."}),u.jsxs("div",{className:"grid grid-cols-3 gap-8 text-xs uppercase font-bold",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsx("p",{children:"Shipper Signature / Date"}),u.jsx("div",{className:"border-b border-black h-8"})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsx("p",{children:"Carrier Signature / Pickup Date"}),u.jsx("div",{className:"border-b border-black h-8"})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsx("p",{children:"Consignee Signature / Delivery Date"}),u.jsx("div",{className:"border-b border-black h-8"})]})]})]})]})]}),u.jsx("style",{children:`
                @media print {
                    body * {
                        visibility: hidden;
                    }
                    .fixed {
                        position: static !important;
                        background: white !important;
                    }
                    .fixed *, .fixed *::before, .fixed *::after {
                        visibility: visible;
                    }
                    .print\\:hidden {
                        display: none !important;
                    }
                    .print\\:static {
                        position: static !important;
                    }
                    body {
                        background: white;
                    }
                }
            `})]})};let hS={data:""},dS=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||hS},fS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pS=/\/\*[^]*?\*\/|  +/g,zy=/\n+/g,xi=(t,e)=>{let n="",r="",i="";for(let o in t){let l=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":r+=o[1]=="f"?xi(l,o):o+"{"+xi(l,o[1]=="k"?"":e)+"}":typeof l=="object"?r+=xi(l,e?e.replace(/([^,])+/g,h=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,f=>/&/.test(f)?f.replace(/&/g,h):h?h+" "+f:f)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=xi.p?xi.p(o,l):o+":"+l+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Cr={},Zb=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Zb(t[n]);return e}return t},mS=(t,e,n,r,i)=>{let o=Zb(t),l=Cr[o]||(Cr[o]=(f=>{let p=0,v=11;for(;p<f.length;)v=101*v+f.charCodeAt(p++)>>>0;return"go"+v})(o));if(!Cr[l]){let f=o!==t?t:(p=>{let v,y,w=[{}];for(;v=fS.exec(p.replace(pS,""));)v[4]?w.shift():v[3]?(y=v[3].replace(zy," ").trim(),w.unshift(w[0][y]=w[0][y]||{})):w[0][v[1]]=v[2].replace(zy," ").trim();return w[0]})(t);Cr[l]=xi(i?{["@keyframes "+l]:f}:f,n?"":"."+l)}let h=n&&Cr.g?Cr.g:null;return n&&(Cr.g=Cr[l]),((f,p,v,y)=>{y?p.data=p.data.replace(y,f):p.data.indexOf(f)===-1&&(p.data=v?f+p.data:p.data+f)})(Cr[l],e,r,h),l},gS=(t,e,n)=>t.reduce((r,i,o)=>{let l=e[o];if(l&&l.call){let h=l(n),f=h&&h.props&&h.props.className||/^go/.test(h)&&h;l=f?"."+f:h&&typeof h=="object"?h.props?"":xi(h,""):h===!1?"":h}return r+i+(l??"")},"");function $d(t){let e=this||{},n=t.call?t(e.p):t;return mS(n.unshift?n.raw?gS(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,dS(e.target),e.g,e.o,e.k)}let Kb,cm,hm;$d.bind({g:1});let Gr=$d.bind({k:1});function vS(t,e,n,r){xi.p=e,Kb=t,cm=n,hm=r}function Ji(t,e){let n=this||{};return function(){let r=arguments;function i(o,l){let h=Object.assign({},o),f=h.className||i.className;n.p=Object.assign({theme:cm&&cm()},h),n.o=/ *go\d+/.test(f),h.className=$d.apply(n,r)+(f?" "+f:"");let p=t;return t[0]&&(p=h.as||t,delete h.as),hm&&p[0]&&hm(h),Kb(p,h)}return i}}var _S=t=>typeof t=="function",Yh=(t,e)=>_S(t)?t(e):t,yS=(()=>{let t=0;return()=>(++t).toString()})(),Qb=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),xS=20,Hg="default",Yb=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:r}=e;return Yb(t,{type:t.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(l=>l.id===i||i===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let o=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},gh=[],Jb={toasts:[],pausedAt:void 0,settings:{toastLimit:xS}},lr={},Xb=(t,e=Hg)=>{lr[e]=Yb(lr[e]||Jb,t),gh.forEach(([n,r])=>{n===e&&r(lr[e])})},e1=t=>Object.keys(lr).forEach(e=>Xb(t,e)),wS=t=>Object.keys(lr).find(e=>lr[e].toasts.some(n=>n.id===t)),Wd=(t=Hg)=>e=>{Xb(e,t)},bS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ES=(t={},e=Hg)=>{let[n,r]=F.useState(lr[e]||Jb),i=F.useRef(lr[e]);F.useEffect(()=>(i.current!==lr[e]&&r(lr[e]),gh.push([e,r]),()=>{let l=gh.findIndex(([h])=>h===e);l>-1&&gh.splice(l,1)}),[e]);let o=n.toasts.map(l=>{var h,f,p;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((h=t[l.type])==null?void 0:h.removeDelay)||(t==null?void 0:t.removeDelay),duration:l.duration||((f=t[l.type])==null?void 0:f.duration)||(t==null?void 0:t.duration)||bS[l.type],style:{...t.style,...(p=t[l.type])==null?void 0:p.style,...l.style}}});return{...n,toasts:o}},TS=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||yS()}),Ru=t=>(e,n)=>{let r=TS(e,t,n);return Wd(r.toasterId||wS(r.id))({type:2,toast:r}),r.id},ne=(t,e)=>Ru("blank")(t,e);ne.error=Ru("error");ne.success=Ru("success");ne.loading=Ru("loading");ne.custom=Ru("custom");ne.dismiss=(t,e)=>{let n={type:3,toastId:t};e?Wd(e)(n):e1(n)};ne.dismissAll=t=>ne.dismiss(void 0,t);ne.remove=(t,e)=>{let n={type:4,toastId:t};e?Wd(e)(n):e1(n)};ne.removeAll=t=>ne.remove(void 0,t);ne.promise=(t,e,n)=>{let r=ne.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let o=e.success?Yh(e.success,i):void 0;return o?ne.success(o,{id:r,...n,...n==null?void 0:n.success}):ne.dismiss(r),i}).catch(i=>{let o=e.error?Yh(e.error,i):void 0;o?ne.error(o,{id:r,...n,...n==null?void 0:n.error}):ne.dismiss(r)}),t};var kS=1e3,NS=(t,e="default")=>{let{toasts:n,pausedAt:r}=ES(t,e),i=F.useRef(new Map).current,o=F.useCallback((y,w=kS)=>{if(i.has(y))return;let E=setTimeout(()=>{i.delete(y),l({type:4,toastId:y})},w);i.set(y,E)},[]);F.useEffect(()=>{if(r)return;let y=Date.now(),w=n.map(E=>{if(E.duration===1/0)return;let j=(E.duration||0)+E.pauseDuration-(y-E.createdAt);if(j<0){E.visible&&ne.dismiss(E.id);return}return setTimeout(()=>ne.dismiss(E.id,e),j)});return()=>{w.forEach(E=>E&&clearTimeout(E))}},[n,r,e]);let l=F.useCallback(Wd(e),[e]),h=F.useCallback(()=>{l({type:5,time:Date.now()})},[l]),f=F.useCallback((y,w)=>{l({type:1,toast:{id:y,height:w}})},[l]),p=F.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),v=F.useCallback((y,w)=>{let{reverseOrder:E=!1,gutter:j=8,defaultPosition:S}=w||{},M=n.filter(R=>(R.position||S)===(y.position||S)&&R.height),C=M.findIndex(R=>R.id===y.id),N=M.filter((R,U)=>U<C&&R.visible).length;return M.filter(R=>R.visible).slice(...E?[N+1]:[0,N]).reduce((R,U)=>R+(U.height||0)+j,0)},[n]);return F.useEffect(()=>{n.forEach(y=>{if(y.dismissed)o(y.id,y.removeDelay);else{let w=i.get(y.id);w&&(clearTimeout(w),i.delete(y.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:f,startPause:h,endPause:p,calculateOffset:v}}},IS=Gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,SS=Gr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,PS=Gr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,CS=Ji("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${IS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${SS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${PS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,AS=Gr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,RS=Ji("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${AS} 1s linear infinite;
`,jS=Gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LS=Gr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,DS=Ji("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,OS=Ji("div")`
  position: absolute;
`,MS=Ji("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VS=Gr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zS=Ji("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,FS=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?F.createElement(zS,null,e):e:n==="blank"?null:F.createElement(MS,null,F.createElement(RS,{...r}),n!=="loading"&&F.createElement(OS,null,n==="error"?F.createElement(CS,{...r}):F.createElement(DS,{...r})))},US=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,BS=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,$S="0%{opacity:0;} 100%{opacity:1;}",WS="0%{opacity:1;} 100%{opacity:0;}",HS=Ji("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qS=Ji("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,GS=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=Qb()?[$S,WS]:[US(n),BS(n)];return{animation:e?`${Gr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Gr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ZS=F.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?GS(t.position||e||"top-center",t.visible):{opacity:0},o=F.createElement(FS,{toast:t}),l=F.createElement(qS,{...t.ariaProps},Yh(t.message,t));return F.createElement(HS,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:o,message:l}):F.createElement(F.Fragment,null,o,l))});vS(F.createElement);var KS=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let o=F.useCallback(l=>{if(l){let h=()=>{let f=l.getBoundingClientRect().height;r(t,f)};h(),new MutationObserver(h).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return F.createElement("div",{ref:o,className:e,style:n},i)},QS=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},YS=$d`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Kc=16,JS=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:o,containerStyle:l,containerClassName:h})=>{let{toasts:f,handlers:p}=NS(n,o);return F.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Kc,left:Kc,right:Kc,bottom:Kc,pointerEvents:"none",...l},className:h,onMouseEnter:p.startPause,onMouseLeave:p.endPause},f.map(v=>{let y=v.position||e,w=p.calculateOffset(v,{reverseOrder:t,gutter:r,defaultPosition:e}),E=QS(y,w);return F.createElement(KS,{id:v.id,key:v.id,onHeightUpdate:p.updateHeight,className:v.visible?YS:"",style:E},v.type==="custom"?Yh(v.message,v):i?i(v):F.createElement(ZS,{toast:v,position:y}))}))},dm=ne;const XS=({onClose:t,onUpload:e})=>{const[n,r]=F.useState(null),[i,o]=F.useState("idle"),[l,h]=F.useState([]),[f,p]=F.useState([]),v=E=>{const j=E.target.files[0];j&&(r(j),y(j))},y=E=>{o("parsing");const j=new FileReader;j.onload=S=>{const C=S.target.result.split(`
`),N=[],R=[];C.forEach((U,q)=>{if(q===0||!U.trim())return;const G=U.split(",").map(k=>k.trim());if(G.length<5){R.push(`Row ${q+1}: Insufficient columns`);return}N.push({goodsType:G[0],fleetType:G[1],departure:G[2],destination:G[3],tonnage:G[4],budget:G[5]||"0"})}),h(N),p(R),o("idle")},j.readAsText(E)},w=async()=>{if(l.length!==0){o("uploading");try{await e(l),o("success"),dm.success(`Successfully uploaded ${l.length} jobs!`),setTimeout(t,2e3)}catch(E){console.error("Upload failed",E),o("idle"),dm.error("Bulk upload failed")}}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-black text-slate-800",children:"Bulk Upload Jobs"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Upload multiple shipments via CSV"})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600",children:u.jsx(Au,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[!n&&u.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-2xl p-10 flex flex-col items-center justify-center text-center hover:bg-slate-50 transition-colors group relative",children:[u.jsx("input",{type:"file",accept:".csv",onChange:v,className:"absolute inset-0 opacity-0 cursor-pointer"}),u.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:u.jsx(Lb,{className:"w-8 h-8 text-blue-500"})}),u.jsx("h3",{className:"font-bold text-slate-700",children:"Click to Upload CSV"}),u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Expected columns: Goods, FleetType, Pickup, Dropoff, Tons, Budget"})]}),n&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-4 rounded-xl border border-slate-200",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(aa,{className:"w-5 h-5 text-slate-500"}),u.jsx("span",{className:"font-bold text-sm text-slate-700",children:n.name})]}),u.jsx("button",{onClick:()=>{r(null),h([])},className:"text-xs font-bold text-red-500 hover:underline",children:"Remove"})]}),i==="parsing"&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Ug,{className:"w-6 h-6 animate-spin mx-auto text-blue-500 mb-2"}),u.jsx("p",{className:"text-xs font-bold text-slate-400",children:"Parsing file..."})]}),l.length>0&&u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-xs uppercase text-slate-400 mb-2",children:["Preview (",l.length," valid rows)"]}),u.jsx("div",{className:"bg-slate-50 rounded-xl border border-slate-200 overflow-hidden max-h-60 overflow-y-auto",children:u.jsxs("table",{className:"w-full text-left text-xs",children:[u.jsx("thead",{className:"bg-slate-100 text-slate-500 font-bold uppercase",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3",children:"Goods"}),u.jsx("th",{className:"p-3",children:"From"}),u.jsx("th",{className:"p-3",children:"To"}),u.jsx("th",{className:"p-3",children:"Budget"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map((E,j)=>u.jsxs("tr",{className:"hover:bg-blue-50/50",children:[u.jsx("td",{className:"p-3 font-medium",children:E.goodsType}),u.jsx("td",{className:"p-3 text-slate-500",children:E.departure}),u.jsx("td",{className:"p-3 text-slate-500",children:E.destination}),u.jsxs("td",{className:"p-3 text-slate-700 font-bold",children:["$",E.budget]})]},j))})]})})]}),f.length>0&&u.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100 text-xs text-red-600 space-y-1",children:[u.jsxs("p",{className:"font-bold flex items-center",children:[u.jsx(Od,{className:"w-3 h-3 mr-1"})," Found ",f.length," issues:"]}),u.jsxs("ul",{className:"list-disc list-inside",children:[f.slice(0,3).map((E,j)=>u.jsx("li",{children:E},j)),f.length>3&&u.jsxs("li",{children:["...and ",f.length-3," more"]})]})]})]})]}),u.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 rounded-b-2xl flex justify-end space-x-3",children:[u.jsx("button",{onClick:t,className:"px-6 py-3 font-bold text-slate-500 hover:text-slate-800",children:"Cancel"}),u.jsxs("button",{onClick:w,disabled:l.length===0||i==="uploading",className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-xl shadow-lg shadow-blue-500/20 disabled:opacity-50 flex items-center",children:[i==="uploading"?"Processing...":`Import ${l.length} Jobs`,i==="success"&&u.jsx(mr,{className:"w-4 h-4 ml-2"})]})]})]})})},eP=({activeTab:t,setActiveTab:e,onPostJob:n,onEditJob:r,onDeleteJob:i,myJobs:o})=>{const[l,h]=F.useState(!1),[f,p]=F.useState(null),[v,y]=F.useState({goodsType:"",fleetType:"Flatbed Truck",departure:null,destination:null,tonnage:"",budget:""}),[w,E]=F.useState(null),[j,S]=F.useState([]),M=P=>{S(V=>V.includes(P)?V.filter(O=>O!==P):[...V,P])},C=async P=>{const V=ne.loading(`Importing ${P.length} loads...`);try{for(const O of P)await n({...O,departureCoords:null,destinationCoords:null});ne.success("Bulk import complete!",{id:V}),h(!1),e("history")}catch{ne.error("Bulk import failed partially.",{id:V})}},N=o.filter(P=>["open","assigned","transit"].includes(P.status)),R=o.filter(P=>["delivered","cancelled"].includes(P.status)),U=["Flatbed Truck","Box Truck (3 Ton)","Box Truck (10 Ton)","Refrigerated Truck","Tanker (Liquid/Fuel)","Container Carrier (20ft)","Container Carrier (40ft)","Tipper / Dump Truck","Livestock Carrier","Car Carrier","Van","Other"],[q,G]=F.useState("idle"),k=async P=>{if(P.preventDefault(),!v.departure||!v.destination){ne.error("Please select both Pickup and Drop-off locations.");return}G("posting");const V={goodsType:v.goodsType,fleetType:v.fleetType,tonnage:v.tonnage,budget:v.budget,departure:v.departure.address,departureCoords:v.departure.coords,destination:v.destination.address,destinationCoords:v.destination.coords};try{w?await r(w,V):await n(V),y({goodsType:"",fleetType:"Flatbed Truck",departure:null,destination:null,tonnage:"",budget:""}),E(null),G("success"),setTimeout(()=>{e("history"),G("idle")},1500)}catch{ne.error("Failed to process request."),G("idle")}},T=P=>{E(P.id),y({goodsType:P.goodsType||"",fleetType:P.fleetType,departure:{address:P.departure,coords:P.departureCoords||fu(P.departure)},destination:{address:P.destination,coords:P.destinationCoords||fu(P.destination)},tonnage:P.tonnage,budget:P.budget}),e("post"),ne.dismiss(),ne("Editing mode active",{icon:""})},A=()=>{E(null),y({goodsType:"",fleetType:"Flatbed Truck",departure:null,destination:null,tonnage:"",budget:""}),e("history"),ne.dismiss()};return u.jsxs("div",{className:"space-y-10 pb-12",children:[f&&u.jsx(Gb,{job:f,onClose:()=>p(null)}),l&&u.jsx(XS,{onClose:()=>h(!1),onUpload:C}),u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center p-3 glass-effect rounded-[2rem] gap-4",children:[u.jsxs("div",{className:"flex space-x-2 p-1.5 bg-slate-100/50 rounded-2xl border border-slate-200/50",children:[u.jsx(Qh,{active:t==="post",onClick:()=>{e("post"),E(null),y({goodsType:"",fleetType:"Flatbed Truck",departure:null,destination:null,tonnage:"",budget:""})},icon:Dy,label:"List Load"}),u.jsx(Qh,{active:t==="history",onClick:()=>e("history"),icon:sm,label:"Your History"})]}),u.jsxs("div",{className:"flex items-center space-x-3 w-full lg:w-auto",children:[u.jsxs("button",{onClick:()=>h(!0),className:"flex-1 lg:flex-none flex items-center justify-center space-x-2 px-6 py-3 bg-white border border-slate-200 text-slate-600 rounded-2xl text-[10px] font-black uppercase tracking-wider hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm active:scale-95",children:[u.jsx(aa,{className:"w-4 h-4 text-primary"}),u.jsx("span",{children:"Bulk Import"})]}),u.jsxs("button",{onClick:()=>e("post"),className:"flex-1 lg:flex-none flex items-center justify-center space-x-2 px-6 py-3 bg-primary text-white rounded-2xl text-[10px] font-black uppercase tracking-wider hover:bg-primary-hover transition-all shadow-xl shadow-primary/20 hover:-translate-y-0.5 active:scale-95",children:[u.jsx(Dy,{className:"w-4 h-4"}),u.jsx("span",{children:"Direct Listing"})]})]})]}),t==="post"&&u.jsxs("div",{className:"premium-card p-10 space-y-10 animate-in slide-in-from-bottom-8 duration-700 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),u.jsxs("div",{className:"space-y-2 relative z-10",children:[u.jsxs("div",{className:"inline-flex items-center px-4 py-1.5 rounded-full bg-primary/5 border border-primary/10 text-primary text-[10px] font-black uppercase tracking-[0.2em]",children:[u.jsx(Wi,{className:"w-3 h-3 mr-2"}),"Secure Market Listing"]}),u.jsxs("h2",{className:"text-4xl font-black text-slate-900 tracking-tighter leading-none",children:[w?"Modify Your ":"Create New ",u.jsx("span",{className:"gradient-text",children:"Load Listing"})]}),u.jsx("p",{className:"text-sm font-medium text-slate-500",children:w?"Update your requirements to attract the best hauling partners.":"Detail your cargo to connect with professional verified haulers instantly."})]}),u.jsxs("form",{onSubmit:k,className:"space-y-8 relative z-10",children:[u.jsx("div",{className:"group transition-all",children:u.jsx(Hn,{label:"Cargo Description",icon:Bi,placeholder:"e.g. 500x Cases of Bottled Water (Fragile)",value:v.goodsType,onChange:P=>y({...v,goodsType:P})})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Preferred Logistics Mode"}),u.jsxs("div",{className:"relative group",children:[u.jsx(At,{className:"absolute left-5 top-5 w-5 h-5 text-slate-400 group-focus-within:text-primary transition-colors"}),u.jsx("select",{className:"w-full pl-14 pr-5 py-5 bg-slate-50/50 border border-slate-200 rounded-3xl focus:ring-4 focus:ring-primary/5 focus:border-primary outline-none transition-all font-bold text-sm appearance-none text-slate-900",value:v.fleetType,onChange:P=>y({...v,fleetType:P.target.value}),children:U.map(P=>u.jsx("option",{value:P,children:P},P))}),u.jsx(Ko,{className:"absolute right-5 top-5 w-5 h-5 text-slate-400 pointer-events-none group-hover:text-primary transition-colors"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsx(Hn,{label:"Tonnage (Est)",icon:Wi,type:"number",placeholder:"5.4",value:v.tonnage,onChange:P=>y({...v,tonnage:P})}),u.jsx(Hn,{label:"Load Budget ($)",icon:Fg,type:"number",placeholder:"1250",value:v.budget,onChange:P=>y({...v,budget:P})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 p-1.5 bg-slate-50/50 rounded-[2.5rem] border border-slate-200/50 shadow-inner",children:[u.jsx("div",{className:"p-6 rounded-[2rem] bg-white border border-slate-100 shadow-premium",children:u.jsx(My,{label:"Collection Network Point",placeholder:"Select Pickup...",value:v.departure,onChange:P=>y({...v,departure:P})})}),u.jsx("div",{className:"p-6 rounded-[2rem] bg-white border border-slate-100 shadow-premium",children:u.jsx(My,{label:"Target Delivery Point",placeholder:"Select Drop-off...",value:v.destination,onChange:P=>y({...v,destination:P})})})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6 pt-6",children:[w&&u.jsx("button",{type:"button",onClick:A,className:"flex-1 py-5 bg-white border border-slate-200 text-slate-500 font-black rounded-2xl hover:bg-slate-50 hover:text-slate-900 transition-all uppercase text-xs tracking-widest",children:"Discard Changes"}),u.jsxs("button",{type:"submit",disabled:q!=="idle",className:`flex-[2] py-5 font-black rounded-3xl shadow-xl transition-all uppercase text-xs tracking-[0.2em] flex items-center justify-center gap-3 ${q==="success"?"bg-green-500 text-white scale-[1.02]":q==="posting"?"bg-slate-200 text-slate-400 cursor-wait":"bg-primary hover:bg-primary-hover text-white hover:shadow-primary/30 hover:-translate-y-1"} `,children:[q==="posting"&&u.jsx("div",{className:"w-5 h-5 border-[3px] border-slate-300 border-t-white rounded-full animate-spin"}),q==="success"&&u.jsx(Rb,{className:"w-5 h-5 animate-in zoom-in",strokeWidth:4}),u.jsx("span",{children:q==="posting"?"Processing Transaction...":q==="success"?"Listing Confirmed":w?"Update Network Listing":"Publish Load Directly"}),q==="idle"&&u.jsx(ArrowRight,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",strokeWidth:3})]})]})]})]}),t==="history"&&u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[N.length===0&&R.length===0&&u.jsx(am,{icon:Bi,title:"Marketplace History",desc:"You haven't listed any transport requests yet. Your future activity will appear here."}),N.length>0&&u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"flex items-center justify-between px-2",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"}),u.jsx("h3",{className:"text-[11px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Active Marketplace Listings"})]}),u.jsxs("span",{className:"text-[10px] font-bold text-slate-400 bg-white border border-slate-100 px-2.5 py-1 rounded-full",children:[N.length," Live"]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:N.map(P=>u.jsx(Fy,{job:P,expanded:!0,onEdit:()=>T(P),onDelete:()=>i(P.id),onViewBOL:()=>p(P)},P.id))})]}),R.length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-3 px-2",children:[u.jsx(sm,{className:"w-4 h-4 text-slate-400"}),u.jsx("h3",{className:"text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Past Fulfillment"})]}),u.jsx("div",{className:"grid grid-cols-1 gap-3 opacity-80 hover:opacity-100 transition-opacity",children:R.map(P=>u.jsx(Fy,{job:P,expanded:j.includes(P.id),onToggleExpand:()=>M(P.id),readOnly:!0,onViewBOL:()=>p(P)},P.id))})]})]})]})},Fy=({job:t,expanded:e,onToggleExpand:n,readOnly:r,onEdit:i,onDelete:o,onViewBOL:l})=>{var j,S,M,C,N,R;const[h,f]=F.useState(!1);if(!e)return u.jsxs("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-premium flex items-center justify-between group hover:border-primary/30 hover:shadow-premium-hover transition-all cursor-pointer",onClick:n,children:[u.jsxs("div",{className:"flex items-center space-x-5",children:[u.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-colors ${t.status==="delivered"?"bg-green-50 text-green-500":"bg-slate-50 text-slate-400 group-hover:bg-primary group-hover:text-white"}`,children:t.status==="delivered"?u.jsx(CheckCircle,{className:"w-6 h-6"}):u.jsx(Bi,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[u.jsx("h4",{className:"font-black text-slate-900 text-base",children:t.goodsType||"General Cargo"}),u.jsxs("span",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest bg-slate-50 px-2.5 py-1 rounded-full border border-slate-100",children:["ID-",t.id.slice(-4).toUpperCase()]})]}),u.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-[0.1em] flex items-center",children:[u.jsx(hr,{className:"w-3 h-3 mr-1 text-primary/50"}),((j=t.departure)==null?void 0:j.split(",")[0])||"Unknown Origin",u.jsx(ChevronRight,{className:"w-3 h-3 mx-2 text-slate-300"}),((S=t.destination)==null?void 0:S.split(",")[0])||"Unknown Target"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"hidden md:block text-right",children:[u.jsx("p",{className:"text-[9px] font-black text-slate-300 uppercase tracking-widest",children:"Last Update"}),u.jsx("p",{className:"text-xs font-bold text-slate-600",children:t.completedAt?new Date(t.completedAt.seconds*1e3).toLocaleDateString():"Active Now"})]}),u.jsx(du,{status:t.status}),u.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center group-hover:bg-primary/5 transition-colors",children:u.jsx(Ko,{className:"w-5 h-5 text-slate-400 group-hover:text-primary transition-all group-hover:translate-y-0.5"})})]})]});const p=["open","assigned","transit","delivered"];let v=p.indexOf(t.status);v===-1&&(v=0);const y=t.departureCoords||fu(t.departure),w=t.destinationCoords||fu(t.destination),E=(t.status==="assigned"||t.status==="transit")&&y&&w&&!isNaN(y[0])&&!isNaN(w[0]);return u.jsxs("div",{className:"premium-card p-10 animate-in slide-in-from-top-4 duration-500 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 -z-10"}),u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start mb-10 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("span",{className:"bg-primary/5 text-primary text-[10px] font-black px-3 py-1 rounded-full border border-primary/10 uppercase tracking-widest",children:["Tracking: ",t.id.slice(-8).toUpperCase()]}),y&&u.jsxs("span",{className:"flex items-center bg-green-50 text-green-600 text-[10px] font-black px-3 py-1 rounded-full border border-green-100 uppercase tracking-widest",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live Signal"]})]}),u.jsx("h4",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:t.goodsType||"General Cargo"}),u.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[u.jsx("span",{className:"text-primary font-black uppercase text-xs mr-2",children:t.fleetType})," Specialized Tonnage: ",t.tonnage,"T"]})]}),u.jsxs("div",{className:"flex items-center space-x-3 bg-slate-50/50 p-2 rounded-2xl border border-slate-100",children:[t.status==="open"&&!r&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:U=>{U.stopPropagation(),i()},className:"w-11 h-11 flex items-center justify-center text-slate-400 hover:text-primary hover:bg-white hover:shadow-sm rounded-xl transition-all border border-transparent hover:border-slate-200",title:"Edit Job",children:u.jsx(A2,{className:"w-5 h-5"})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),o()},className:"w-11 h-11 flex items-center justify-center text-slate-400 hover:text-red-500 hover:bg-white hover:shadow-sm rounded-xl transition-all border border-transparent hover:border-slate-200",title:"Delete Job",children:u.jsx(z2,{className:"w-5 h-5"})})]}),u.jsx("button",{onClick:U=>{U.stopPropagation(),l()},className:"w-11 h-11 flex items-center justify-center text-slate-400 hover:text-blue-600 hover:bg-white hover:shadow-sm rounded-xl transition-all border border-transparent hover:border-slate-200",title:"Digital BOL",children:u.jsx(aa,{className:"w-5 h-5"})}),r&&u.jsx("button",{onClick:n,className:"w-11 h-11 flex items-center justify-center text-slate-400 hover:text-primary hover:bg-white hover:shadow-sm rounded-xl transition-all border border-transparent hover:border-slate-200",title:"Collapse",children:u.jsx(Ko,{className:"w-6 h-6 rotate-180"})}),!r&&u.jsx(du,{status:t.status})]})]}),E&&u.jsxs("div",{className:"w-full h-80 mb-10 rounded-[2rem] overflow-hidden shadow-premium border border-slate-200 relative z-0",children:[u.jsx(Hb,{startPos:y,endPos:w,driverPos:t.status==="assigned"?y:cS(y,w,.4)}),u.jsxs("div",{className:"absolute top-4 right-4 glass-effect px-4 py-2 rounded-2xl text-[10px] font-black uppercase text-slate-800 shadow-xl z-[400] border border-white/50 flex items-center",children:[u.jsx(Globe,{className:"w-3 h-3 mr-2 animate-spin-slow"}),"Live Network Feed"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10",children:[u.jsxs("div",{className:"p-8 bg-slate-900 rounded-[2rem] border border-slate-800 shadow-2xl relative overflow-hidden group",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/10 rounded-full blur-3xl"}),u.jsxs("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${t.status==="open"?"bg-primary animate-pulse":"bg-green-500"}`}),u.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:" Hauling Authority"})]}),t.status!=="open"&&u.jsxs("div",{className:"flex items-center text-[9px] text-green-400 font-black bg-white/5 px-3 py-1 rounded-full border border-white/10 tracking-widest",children:[u.jsx(Wi,{className:"w-3 h-3 mr-1.5"}),"SECURE IDENTITY"]})]}),t.status==="open"?u.jsxs("div",{className:"flex items-center space-x-4 relative z-10 py-2",children:[u.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/5 animate-pulse flex items-center justify-center",children:u.jsx(Search,{className:"w-6 h-6 text-slate-600"})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"w-32 h-3 bg-white/5 rounded-full animate-pulse"}),u.jsx("div",{className:"w-20 h-2 bg-white/5 rounded-full animate-pulse"})]})]}):u.jsx("div",{className:"relative z-10",children:t.haulerProfile?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl border-2 border-primary/30 overflow-hidden bg-slate-800 shadow-lg group-hover:scale-105 transition-transform duration-500",children:(M=t.haulerProfile.universal)!=null&&M.photoURL?u.jsx("img",{src:t.haulerProfile.universal.photoURL,alt:"Driver",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500",children:u.jsx(User,{className:"w-8 h-8"})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xl font-black text-white uppercase group-hover:text-primary transition-colors",children:((C=t.haulerProfile.universal)==null?void 0:C.displayName)||"Regional Driver"}),u.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),u.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Connection Active"})]})]})]}),u.jsx("button",{onClick:()=>f(!h),className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white hover:bg-primary hover:border-primary transition-all",children:u.jsx(Ko,{className:`w-5 h-5 transition-transform duration-500 ${h?"rotate-180":""}`})})]}),h&&u.jsx("div",{className:"pt-4 border-t border-white/5 animate-in slide-in-from-top-4 duration-500",children:u.jsx(qb,{profileData:t.haulerProfile,role:"hauler",expanded:!0,dark:!0})})]}):u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center text-primary border border-primary/20",children:u.jsx(At,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-black text-white uppercase tracking-tight",children:"Driver Assigned"}),u.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:["ID: ",(N=t.haulerId)==null?void 0:N.slice(0,8).toUpperCase()]})]})]}),u.jsxs("div",{className:"hidden sm:flex items-center space-x-3 bg-black/40 px-4 py-2 rounded-xl border border-white/5",children:[u.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:t.id.slice(-4).toUpperCase()}),u.jsx("div",{className:"w-4 h-[1px] bg-white/10"}),u.jsx("div",{className:"w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:u.jsx(N2,{className:"w-3 h-3 text-white"})}),u.jsx("div",{className:"w-4 h-[1px] bg-white/10"}),u.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:((R=t.haulerId)==null?void 0:R.slice(-4).toUpperCase())||"????"})]})]})})]}),u.jsxs("div",{className:"p-8 bg-slate-50 rounded-[2.5rem] border border-slate-200 shadow-inner relative overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between mb-8",children:[u.jsxs("div",{className:"flex items-center space-x-3 text-slate-900",children:[u.jsx("div",{className:"w-8 h-8 rounded-xl bg-white flex items-center justify-center shadow-sm border border-slate-100",children:u.jsx(sm,{className:"w-4 h-4 text-primary"})}),u.jsx("span",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Fulfillment Pipeline"})]}),t.status!=="open"&&u.jsxs("div",{className:"flex items-center space-x-2 bg-white text-primary px-4 py-1.5 rounded-full text-[10px] font-black uppercase border border-slate-200 shadow-sm tracking-widest",children:[u.jsx(Vd,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"2-Day Delivery"})]})]}),u.jsxs("div",{className:"relative flex items-center justify-between px-2 py-4",children:[u.jsx("div",{className:"absolute left-6 right-6 top-1/2 -translate-y-[1.4rem] h-1.5 bg-slate-200 rounded-full -z-10"}),u.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-[1.4rem] h-1.5 bg-primary rounded-full -z-10 transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(37,99,235,0.4)]",style:{width:`${v/(p.length-1)*90}%`}}),p.map((U,q)=>{const G=v>q,k=v===q;return u.jsxs("div",{className:"flex flex-col items-center relative z-0 w-2",children:[u.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center border-4 transition-all duration-700 shadow-lg ${G?"bg-primary border-primary scale-100":k?"bg-white border-primary scale-125 ring-8 ring-primary/5 shadow-primary/20":"bg-white border-slate-200"}`,children:G?u.jsx(Rb,{className:"w-5 h-5 text-white",strokeWidth:4}):k?u.jsx("div",{className:"w-2.5 h-2.5 bg-primary rounded-full animate-pulse"}):u.jsx("div",{className:"w-2.5 h-2.5 bg-slate-200 rounded-full"})}),u.jsx("div",{className:`absolute top-14 flex flex-col items-center transition-all duration-500 w-24 ${k?"translate-y-1":""}`,children:u.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest text-center leading-3 ${k?"text-primary":G?"text-slate-900":"text-slate-400"}`,children:U==="open"?"Posted":U==="assigned"?"Security Match":U==="transit"?"In Transit":"Final Delivery"})})]},U)})]})]})]}),u.jsx("div",{className:"text-center p-6 bg-slate-50 border border-slate-200 rounded-[2rem] shadow-inner mb-8",children:u.jsxs("p",{className:"text-sm font-black text-slate-800 uppercase tracking-tight",children:[t.status==="open"&&"Network active: Identifying verified carriers in your hub...",t.status==="assigned"&&`Carrier ${t.haulerEmail||"Protocol"} has authorized secure pickup.`,t.status==="transit"&&"Cargo integrity verified. Real-time telemetry active on map.",t.status==="delivered"&&"Transaction complete. Proof of Delivery cloud-stored."]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-slate-900 p-8 rounded-[2.5rem] border border-white/5 shadow-2xl",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.25em]",children:"Network Genesis"}),u.jsx("p",{className:"text-sm font-black text-white uppercase",children:t.departure})]}),u.jsxs("div",{className:"text-left md:text-right space-y-1",children:[u.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.25em]",children:"Fulfillment Target"}),u.jsx("p",{className:"text-sm font-black text-white uppercase",children:t.destination})]})]})]})};var Uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],l=t[n++],h=t[n++],f=((i&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},n1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],l=i+1<t.length,h=l?t[i+1]:0,f=i+2<t.length,p=f?t[i+2]:0,v=o>>2,y=(o&3)<<4|h>>4;let w=(h&15)<<2|p>>6,E=p&63;f||(E=64,l||(w=64)),r.push(n[v],n[y],n[w],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||h==null||p==null||y==null)throw new nP;const w=o<<2|h>>4;if(r.push(w),p!==64){const E=h<<4&240|p>>2;if(r.push(E),y!==64){const j=p<<6&192|y;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rP=function(t){const e=t1(t);return n1.encodeByteArray(e,!0)},Jh=function(t){return rP(t).replace(/\./g,"")},r1=function(t){try{return n1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=()=>iP().__FIREBASE_DEFAULTS__,oP=()=>{if(typeof process>"u"||typeof Uy>"u")return;const t=Uy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&r1(t[1]);return e&&JSON.parse(e)},Hd=()=>{try{return sP()||oP()||aP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i1=t=>{var e,n;return(n=(e=Hd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lP=t=>{const e=i1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},s1=()=>{var t;return(t=Hd())===null||t===void 0?void 0:t.config},o1=t=>{var e;return(e=Hd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Jh(JSON.stringify(n)),Jh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function dP(){var t;const e=(t=Hd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gP(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vP(){return!dP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _P(){try{return typeof indexedDB=="object"}catch{return!1}}function yP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="FirebaseError";class Xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xP,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?wP(o,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new Xr(i,h,r)}}function wP(t,e){return t.replace(bP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bP=/\{\$([^}]+)}/g;function EP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],l=e[i];if(By(o)&&By(l)){if(!pu(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function By(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Nl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TP(t,e){const n=new kP(t,e);return n.subscribe.bind(n)}class kP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jf),i.error===void 0&&(i.error=Jf),i.complete===void 0&&(i.complete=Jf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return t&&t._delegate?t._delegate:t}class Os{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PP(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SP(t){return t===_s?void 0:t}function PP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const AP={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},RP=Se.INFO,jP={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},LP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=jP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=RP,this._logHandler=LP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const DP=(t,e)=>e.some(n=>t instanceof n);let $y,Wy;function OP(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MP(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a1=new WeakMap,fm=new WeakMap,l1=new WeakMap,Xf=new WeakMap,Gg=new WeakMap;function VP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Di(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&a1.set(n,t)}).catch(()=>{}),Gg.set(e,t),e}function zP(t){if(fm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});fm.set(t,e)}let pm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||l1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Di(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FP(t){pm=t(pm)}function UP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ep(this),e,...n);return l1.set(r,e.sort?e.sort():[e]),Di(r)}:MP().includes(t)?function(...e){return t.apply(ep(this),e),Di(a1.get(this))}:function(...e){return Di(t.apply(ep(this),e))}}function BP(t){return typeof t=="function"?UP(t):(t instanceof IDBTransaction&&zP(t),DP(t,OP())?new Proxy(t,pm):t)}function Di(t){if(t instanceof IDBRequest)return VP(t);if(Xf.has(t))return Xf.get(t);const e=BP(t);return e!==t&&(Xf.set(t,e),Gg.set(e,t)),e}const ep=t=>Gg.get(t);function $P(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(t,e),h=Di(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Di(l.result),f.oldVersion,f.newVersion,Di(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const WP=["get","getKey","getAll","getAllKeys","count"],HP=["put","add","delete","clear"],tp=new Map;function Hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WP.includes(n)))return;const o=async function(l,...h){const f=this.transaction(l,i?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),i&&f.done]))[0]};return tp.set(e,o),o}FP(t=>({...t,get:(e,n,r)=>Hy(e,n)||t.get(e,n,r),has:(e,n)=>!!Hy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",qy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new qg("@firebase/app"),ZP="@firebase/app-compat",KP="@firebase/analytics-compat",QP="@firebase/analytics",YP="@firebase/app-check-compat",JP="@firebase/app-check",XP="@firebase/auth",eC="@firebase/auth-compat",tC="@firebase/database",nC="@firebase/data-connect",rC="@firebase/database-compat",iC="@firebase/functions",sC="@firebase/functions-compat",oC="@firebase/installations",aC="@firebase/installations-compat",lC="@firebase/messaging",uC="@firebase/messaging-compat",cC="@firebase/performance",hC="@firebase/performance-compat",dC="@firebase/remote-config",fC="@firebase/remote-config-compat",pC="@firebase/storage",mC="@firebase/storage-compat",gC="@firebase/firestore",vC="@firebase/vertexai-preview",_C="@firebase/firestore-compat",yC="firebase",xC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="[DEFAULT]",wC={[mm]:"fire-core",[ZP]:"fire-core-compat",[QP]:"fire-analytics",[KP]:"fire-analytics-compat",[JP]:"fire-app-check",[YP]:"fire-app-check-compat",[XP]:"fire-auth",[eC]:"fire-auth-compat",[tC]:"fire-rtdb",[nC]:"fire-data-connect",[rC]:"fire-rtdb-compat",[iC]:"fire-fn",[sC]:"fire-fn-compat",[oC]:"fire-iid",[aC]:"fire-iid-compat",[lC]:"fire-fcm",[uC]:"fire-fcm-compat",[cC]:"fire-perf",[hC]:"fire-perf-compat",[dC]:"fire-rc",[fC]:"fire-rc-compat",[pC]:"fire-gcs",[mC]:"fire-gcs-compat",[gC]:"fire-fst",[_C]:"fire-fst-compat",[vC]:"fire-vertex","fire-js":"fire-js",[yC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new Map,bC=new Map,vm=new Map;function Gy(t,e){try{t.container.addComponent(e)}catch(n){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function la(t){const e=t.name;if(vm.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;vm.set(e,t);for(const n of Xh.values())Gy(n,t);for(const n of bC.values())Gy(n,t);return!0}function Zg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new ju("app","Firebase",EC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=xC;function u1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Oi.create("bad-app-name",{appName:String(i)});if(n||(n=s1()),!n)throw Oi.create("no-options");const o=Xh.get(i);if(o){if(pu(n,o.options)&&pu(r,o.config))return o;throw Oi.create("duplicate-app",{appName:i})}const l=new CP(i);for(const f of vm.values())l.addComponent(f);const h=new TC(n,r,l);return Xh.set(i,h),h}function c1(t=gm){const e=Xh.get(t);if(!e&&t===gm&&s1())return u1();if(!e)throw Oi.create("no-app",{appName:t});return e}function Mi(t,e,n){var r;let i=(r=wC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(h.join(" "));return}la(new Os(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="firebase-heartbeat-database",NC=1,mu="firebase-heartbeat-store";let np=null;function h1(){return np||(np=$P(kC,NC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oi.create("idb-open",{originalErrorMessage:t.message})})),np}async function IC(t){try{const n=(await h1()).transaction(mu),r=await n.objectStore(mu).get(d1(t));return await n.done,r}catch(e){if(e instanceof Xr)Zr.warn(e.message);else{const n=Oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(n.message)}}}async function Zy(t,e){try{const r=(await h1()).transaction(mu,"readwrite");await r.objectStore(mu).put(e,d1(t)),await r.done}catch(n){if(n instanceof Xr)Zr.warn(n.message);else{const r=Oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zr.warn(r.message)}}}function d1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=1024,PC=30*24*60*60*1e3;class CC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ky();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=PC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ky(),{heartbeatsToSend:r,unsentEntries:i}=AC(this._heartbeatsCache.heartbeats),o=Jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Zr.warn(n),""}}}function Ky(){return new Date().toISOString().substring(0,10)}function AC(t,e=SC){const n=[];let r=t.slice();for(const i of t){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Qy(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _P()?yP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Qy(t){return Jh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){la(new Os("platform-logger",e=>new qP(e),"PRIVATE")),la(new Os("heartbeat",e=>new CC(e),"PRIVATE")),Mi(mm,qy,t),Mi(mm,qy,"esm2017"),Mi("fire-js","")}jC("");var Yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ss,f1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,T){function A(){}A.prototype=T.prototype,k.D=T.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(P,V,O){for(var D=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)D[Ae-2]=arguments[Ae];return T.prototype[V].apply(P,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,T,A){A||(A=0);var P=Array(16);if(typeof T=="string")for(var V=0;16>V;++V)P[V]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(V=0;16>V;++V)P[V]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=k.g[0],A=k.g[1],V=k.g[2];var O=k.g[3],D=T+(O^A&(V^O))+P[0]+3614090360&4294967295;T=A+(D<<7&4294967295|D>>>25),D=O+(V^T&(A^V))+P[1]+3905402710&4294967295,O=T+(D<<12&4294967295|D>>>20),D=V+(A^O&(T^A))+P[2]+606105819&4294967295,V=O+(D<<17&4294967295|D>>>15),D=A+(T^V&(O^T))+P[3]+3250441966&4294967295,A=V+(D<<22&4294967295|D>>>10),D=T+(O^A&(V^O))+P[4]+4118548399&4294967295,T=A+(D<<7&4294967295|D>>>25),D=O+(V^T&(A^V))+P[5]+1200080426&4294967295,O=T+(D<<12&4294967295|D>>>20),D=V+(A^O&(T^A))+P[6]+2821735955&4294967295,V=O+(D<<17&4294967295|D>>>15),D=A+(T^V&(O^T))+P[7]+4249261313&4294967295,A=V+(D<<22&4294967295|D>>>10),D=T+(O^A&(V^O))+P[8]+1770035416&4294967295,T=A+(D<<7&4294967295|D>>>25),D=O+(V^T&(A^V))+P[9]+2336552879&4294967295,O=T+(D<<12&4294967295|D>>>20),D=V+(A^O&(T^A))+P[10]+4294925233&4294967295,V=O+(D<<17&4294967295|D>>>15),D=A+(T^V&(O^T))+P[11]+2304563134&4294967295,A=V+(D<<22&4294967295|D>>>10),D=T+(O^A&(V^O))+P[12]+1804603682&4294967295,T=A+(D<<7&4294967295|D>>>25),D=O+(V^T&(A^V))+P[13]+4254626195&4294967295,O=T+(D<<12&4294967295|D>>>20),D=V+(A^O&(T^A))+P[14]+2792965006&4294967295,V=O+(D<<17&4294967295|D>>>15),D=A+(T^V&(O^T))+P[15]+1236535329&4294967295,A=V+(D<<22&4294967295|D>>>10),D=T+(V^O&(A^V))+P[1]+4129170786&4294967295,T=A+(D<<5&4294967295|D>>>27),D=O+(A^V&(T^A))+P[6]+3225465664&4294967295,O=T+(D<<9&4294967295|D>>>23),D=V+(T^A&(O^T))+P[11]+643717713&4294967295,V=O+(D<<14&4294967295|D>>>18),D=A+(O^T&(V^O))+P[0]+3921069994&4294967295,A=V+(D<<20&4294967295|D>>>12),D=T+(V^O&(A^V))+P[5]+3593408605&4294967295,T=A+(D<<5&4294967295|D>>>27),D=O+(A^V&(T^A))+P[10]+38016083&4294967295,O=T+(D<<9&4294967295|D>>>23),D=V+(T^A&(O^T))+P[15]+3634488961&4294967295,V=O+(D<<14&4294967295|D>>>18),D=A+(O^T&(V^O))+P[4]+3889429448&4294967295,A=V+(D<<20&4294967295|D>>>12),D=T+(V^O&(A^V))+P[9]+568446438&4294967295,T=A+(D<<5&4294967295|D>>>27),D=O+(A^V&(T^A))+P[14]+3275163606&4294967295,O=T+(D<<9&4294967295|D>>>23),D=V+(T^A&(O^T))+P[3]+4107603335&4294967295,V=O+(D<<14&4294967295|D>>>18),D=A+(O^T&(V^O))+P[8]+1163531501&4294967295,A=V+(D<<20&4294967295|D>>>12),D=T+(V^O&(A^V))+P[13]+2850285829&4294967295,T=A+(D<<5&4294967295|D>>>27),D=O+(A^V&(T^A))+P[2]+4243563512&4294967295,O=T+(D<<9&4294967295|D>>>23),D=V+(T^A&(O^T))+P[7]+1735328473&4294967295,V=O+(D<<14&4294967295|D>>>18),D=A+(O^T&(V^O))+P[12]+2368359562&4294967295,A=V+(D<<20&4294967295|D>>>12),D=T+(A^V^O)+P[5]+4294588738&4294967295,T=A+(D<<4&4294967295|D>>>28),D=O+(T^A^V)+P[8]+2272392833&4294967295,O=T+(D<<11&4294967295|D>>>21),D=V+(O^T^A)+P[11]+1839030562&4294967295,V=O+(D<<16&4294967295|D>>>16),D=A+(V^O^T)+P[14]+4259657740&4294967295,A=V+(D<<23&4294967295|D>>>9),D=T+(A^V^O)+P[1]+2763975236&4294967295,T=A+(D<<4&4294967295|D>>>28),D=O+(T^A^V)+P[4]+1272893353&4294967295,O=T+(D<<11&4294967295|D>>>21),D=V+(O^T^A)+P[7]+4139469664&4294967295,V=O+(D<<16&4294967295|D>>>16),D=A+(V^O^T)+P[10]+3200236656&4294967295,A=V+(D<<23&4294967295|D>>>9),D=T+(A^V^O)+P[13]+681279174&4294967295,T=A+(D<<4&4294967295|D>>>28),D=O+(T^A^V)+P[0]+3936430074&4294967295,O=T+(D<<11&4294967295|D>>>21),D=V+(O^T^A)+P[3]+3572445317&4294967295,V=O+(D<<16&4294967295|D>>>16),D=A+(V^O^T)+P[6]+76029189&4294967295,A=V+(D<<23&4294967295|D>>>9),D=T+(A^V^O)+P[9]+3654602809&4294967295,T=A+(D<<4&4294967295|D>>>28),D=O+(T^A^V)+P[12]+3873151461&4294967295,O=T+(D<<11&4294967295|D>>>21),D=V+(O^T^A)+P[15]+530742520&4294967295,V=O+(D<<16&4294967295|D>>>16),D=A+(V^O^T)+P[2]+3299628645&4294967295,A=V+(D<<23&4294967295|D>>>9),D=T+(V^(A|~O))+P[0]+4096336452&4294967295,T=A+(D<<6&4294967295|D>>>26),D=O+(A^(T|~V))+P[7]+1126891415&4294967295,O=T+(D<<10&4294967295|D>>>22),D=V+(T^(O|~A))+P[14]+2878612391&4294967295,V=O+(D<<15&4294967295|D>>>17),D=A+(O^(V|~T))+P[5]+4237533241&4294967295,A=V+(D<<21&4294967295|D>>>11),D=T+(V^(A|~O))+P[12]+1700485571&4294967295,T=A+(D<<6&4294967295|D>>>26),D=O+(A^(T|~V))+P[3]+2399980690&4294967295,O=T+(D<<10&4294967295|D>>>22),D=V+(T^(O|~A))+P[10]+4293915773&4294967295,V=O+(D<<15&4294967295|D>>>17),D=A+(O^(V|~T))+P[1]+2240044497&4294967295,A=V+(D<<21&4294967295|D>>>11),D=T+(V^(A|~O))+P[8]+1873313359&4294967295,T=A+(D<<6&4294967295|D>>>26),D=O+(A^(T|~V))+P[15]+4264355552&4294967295,O=T+(D<<10&4294967295|D>>>22),D=V+(T^(O|~A))+P[6]+2734768916&4294967295,V=O+(D<<15&4294967295|D>>>17),D=A+(O^(V|~T))+P[13]+1309151649&4294967295,A=V+(D<<21&4294967295|D>>>11),D=T+(V^(A|~O))+P[4]+4149444226&4294967295,T=A+(D<<6&4294967295|D>>>26),D=O+(A^(T|~V))+P[11]+3174756917&4294967295,O=T+(D<<10&4294967295|D>>>22),D=V+(T^(O|~A))+P[2]+718787259&4294967295,V=O+(D<<15&4294967295|D>>>17),D=A+(O^(V|~T))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+T&4294967295,k.g[1]=k.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+O&4294967295}r.prototype.u=function(k,T){T===void 0&&(T=k.length);for(var A=T-this.blockSize,P=this.B,V=this.h,O=0;O<T;){if(V==0)for(;O<=A;)i(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<T;)if(P[V++]=k.charCodeAt(O++),V==this.blockSize){i(this,P),V=0;break}}else for(;O<T;)if(P[V++]=k[O++],V==this.blockSize){i(this,P),V=0;break}}this.h=V,this.o+=T},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var T=1;T<k.length-8;++T)k[T]=0;var A=8*this.o;for(T=k.length-8;T<k.length;++T)k[T]=A&255,A/=256;for(this.u(k),k=Array(16),T=A=0;4>T;++T)for(var P=0;32>P;P+=8)k[A++]=this.g[T]>>>P&255;return k};function o(k,T){var A=h;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=T(k)}function l(k,T){this.h=T;for(var A=[],P=!0,V=k.length-1;0<=V;V--){var O=k[V]|0;P&&O==T||(A[V]=O,P=!1)}this.g=A}var h={};function f(k){return-128<=k&&128>k?o(k,function(T){return new l([T|0],0>T?-1:0)}):new l([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return M(p(-k));for(var T=[],A=1,P=0;k>=A;P++)T[P]=k/A|0,A*=4294967296;return new l(T,0)}function v(k,T){if(k.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k.charAt(0)=="-")return M(v(k.substring(1),T));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(T,8)),P=y,V=0;V<k.length;V+=8){var O=Math.min(8,k.length-V),D=parseInt(k.substring(V,V+O),T);8>O?(O=p(Math.pow(T,O)),P=P.j(O).add(p(D))):(P=P.j(A),P=P.add(p(D)))}return P}var y=f(0),w=f(1),E=f(16777216);t=l.prototype,t.m=function(){if(S(this))return-M(this).m();for(var k=0,T=1,A=0;A<this.g.length;A++){var P=this.i(A);k+=(0<=P?P:4294967296+P)*T,T*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(j(this))return"0";if(S(this))return"-"+M(this).toString(k);for(var T=p(Math.pow(k,6)),A=this,P="";;){var V=U(A,T).g;A=C(A,V.j(T));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=V,j(A))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function j(k){if(k.h!=0)return!1;for(var T=0;T<k.g.length;T++)if(k.g[T]!=0)return!1;return!0}function S(k){return k.h==-1}t.l=function(k){return k=C(this,k),S(k)?-1:j(k)?0:1};function M(k){for(var T=k.g.length,A=[],P=0;P<T;P++)A[P]=~k.g[P];return new l(A,~k.h).add(w)}t.abs=function(){return S(this)?M(this):this},t.add=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0,V=0;V<=T;V++){var O=P+(this.i(V)&65535)+(k.i(V)&65535),D=(O>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);P=D>>>16,O&=65535,D&=65535,A[V]=D<<16|O}return new l(A,A[A.length-1]&-2147483648?-1:0)};function C(k,T){return k.add(M(T))}t.j=function(k){if(j(this)||j(k))return y;if(S(this))return S(k)?M(this).j(M(k)):M(M(this).j(k));if(S(k))return M(this.j(M(k)));if(0>this.l(E)&&0>k.l(E))return p(this.m()*k.m());for(var T=this.g.length+k.g.length,A=[],P=0;P<2*T;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<k.g.length;V++){var O=this.i(P)>>>16,D=this.i(P)&65535,Ae=k.i(V)>>>16,cn=k.i(V)&65535;A[2*P+2*V]+=D*cn,N(A,2*P+2*V),A[2*P+2*V+1]+=O*cn,N(A,2*P+2*V+1),A[2*P+2*V+1]+=D*Ae,N(A,2*P+2*V+1),A[2*P+2*V+2]+=O*Ae,N(A,2*P+2*V+2)}for(P=0;P<T;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=T;P<2*T;P++)A[P]=0;return new l(A,0)};function N(k,T){for(;(k[T]&65535)!=k[T];)k[T+1]+=k[T]>>>16,k[T]&=65535,T++}function R(k,T){this.g=k,this.h=T}function U(k,T){if(j(T))throw Error("division by zero");if(j(k))return new R(y,y);if(S(k))return T=U(M(k),T),new R(M(T.g),M(T.h));if(S(T))return T=U(k,M(T)),new R(M(T.g),T.h);if(30<k.g.length){if(S(k)||S(T))throw Error("slowDivide_ only works with positive integers.");for(var A=w,P=T;0>=P.l(k);)A=q(A),P=q(P);var V=G(A,1),O=G(P,1);for(P=G(P,2),A=G(A,2);!j(P);){var D=O.add(P);0>=D.l(k)&&(V=V.add(A),O=D),P=G(P,1),A=G(A,1)}return T=C(k,V.j(T)),new R(V,T)}for(V=y;0<=k.l(T);){for(A=Math.max(1,Math.floor(k.m()/T.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=p(A),D=O.j(T);S(D)||0<D.l(k);)A-=P,O=p(A),D=O.j(T);j(O)&&(O=w),V=V.add(O),k=C(k,D)}return new R(V,k)}t.A=function(k){return U(this,k).h},t.and=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)&k.i(P);return new l(A,this.h&k.h)},t.or=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)|k.i(P);return new l(A,this.h|k.h)},t.xor=function(k){for(var T=Math.max(this.g.length,k.g.length),A=[],P=0;P<T;P++)A[P]=this.i(P)^k.i(P);return new l(A,this.h^k.h)};function q(k){for(var T=k.g.length+1,A=[],P=0;P<T;P++)A[P]=k.i(P)<<1|k.i(P-1)>>>31;return new l(A,k.h)}function G(k,T){var A=T>>5;T%=32;for(var P=k.g.length-A,V=[],O=0;O<P;O++)V[O]=0<T?k.i(O+A)>>>T|k.i(O+A+1)<<32-T:k.i(O+A);return new l(V,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f1=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,Ss=l}).apply(typeof Yy<"u"?Yy:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p1,Il,m1,vh,_m,g1,v1,_1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,x){return c==Array.prototype||c==Object.prototype||(c[g]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var g=0;g<c.length;++g){var x=c[g];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(c,g){if(g)e:{var x=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var B=c[I];if(!(B in x))break e;x=x[B]}c=c[c.length-1],I=x[c],g=g(I),g!=I&&g!=null&&e(x,c,{configurable:!0,writable:!0,value:g})}}function o(c,g){c instanceof String&&(c+="");var x=0,I=!1,B={next:function(){if(!I&&x<c.length){var H=x++;return{value:g(H,c[H]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(c){return c||function(){return o(this,function(g,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,x){return c.call.apply(c.bind,arguments)}function y(c,g,x){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function w(c,g,x){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:y,w.apply(null,arguments)}function E(c,g){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function j(c,g){function x(){}x.prototype=g.prototype,c.aa=g.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(I,B,H){for(var ee=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ee[Oe-2]=arguments[Oe];return g.prototype[B].apply(I,ee)}}function S(c){const g=c.length;if(0<g){const x=Array(g);for(let I=0;I<g;I++)x[I]=c[I];return x}return[]}function M(c,g){for(let x=1;x<arguments.length;x++){const I=arguments[x];if(f(I)){const B=c.length||0,H=I.length||0;c.length=B+H;for(let ee=0;ee<H;ee++)c[B+ee]=I[ee]}else c.push(I)}}class C{constructor(g,x){this.i=g,this.j=x,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function N(c){return/^[\s\xa0]*$/.test(c)}function R(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function U(c){return U[" "](c),c}U[" "]=function(){};var q=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function G(c,g,x){for(const I in c)g.call(x,c[I],I,c)}function k(c,g){for(const x in c)g.call(void 0,c[x],x,c)}function T(c){const g={};for(const x in c)g[x]=c[x];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,g){let x,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(x in I)c[x]=I[x];for(let H=0;H<A.length;H++)x=A[H],Object.prototype.hasOwnProperty.call(I,x)&&(c[x]=I[x])}}function V(c){var g=1;c=c.split(":");const x=[];for(;0<g&&c.length;)x.push(c.shift()),g--;return c.length&&x.push(c.join(":")),x}function O(c){h.setTimeout(()=>{throw c},0)}function D(){var c=he;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ae{constructor(){this.h=this.g=null}add(g,x){const I=cn.get();I.set(g,x),this.h?this.h.next=I:this.g=I,this.h=I}}var cn=new C(()=>new We,c=>c.reset());class We{constructor(){this.next=this.g=this.h=null}set(g,x){this.h=g,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ht,Z=!1,he=new Ae,X=()=>{const c=h.Promise.resolve(void 0);Ht=()=>{c.then(fe)}};var fe=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(x){O(x)}var g=cn;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}Z=!1};function xe(){this.s=this.s,this.C=this.C}xe.prototype.s=!1,xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};h.addEventListener("test",x,g),h.removeEventListener("test",x,g)}catch{}return c}();function we(c,g){if(ke.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(q){e:{try{U(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else x=="mouseover"?g=c.fromElement:x=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ge[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&we.aa.h.call(this)}}j(we,ke);var ge={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),er=0;function Qu(c,g,x,I,B){this.listener=c,this.proxy=null,this.src=g,this.type=x,this.capture=!!I,this.ha=B,this.key=++er,this.da=this.fa=!1}function ni(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ri(c){this.src=c,this.g={},this.h=0}ri.prototype.add=function(c,g,x,I,B){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var ee=ns(c,g,I,B);return-1<ee?(g=c[ee],x||(g.fa=!1)):(g=new Qu(g,this.src,H,!!I,B),g.fa=x,c.push(g)),g};function _r(c,g){var x=g.type;if(x in c.g){var I=c.g[x],B=Array.prototype.indexOf.call(I,g,void 0),H;(H=0<=B)&&Array.prototype.splice.call(I,B,1),H&&(ni(g),c.g[x].length==0&&(delete c.g[x],c.h--))}}function ns(c,g,x,I){for(var B=0;B<c.length;++B){var H=c[B];if(!H.da&&H.listener==g&&H.capture==!!x&&H.ha==I)return B}return-1}var Ca="closure_lm_"+(1e6*Math.random()|0),Zs={};function Aa(c,g,x,I,B){if(Array.isArray(g)){for(var H=0;H<g.length;H++)Aa(c,g[H],x,I,B);return null}return x=Xu(x),c&&c[gt]?c.K(g,x,p(I)?!!I.capture:!1,B):Ra(c,g,x,!1,I,B)}function Ra(c,g,x,I,B,H){if(!g)throw Error("Invalid event type");var ee=p(B)?!!B.capture:!!B,Oe=Js(c);if(Oe||(c[Ca]=Oe=new ri(c)),x=Oe.add(g,x,I,ee,H),x.proxy)return x;if(I=Ks(),x.proxy=I,I.src=c,I.listener=x,c.addEventListener)De||(B=ee),B===void 0&&(B=!1),c.addEventListener(g.toString(),I,B);else if(c.attachEvent)c.attachEvent(Ys(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ks(){function c(x){return g.call(c.src,c.listener,x)}const g=Ju;return c}function Yu(c,g,x,I,B){if(Array.isArray(g))for(var H=0;H<g.length;H++)Yu(c,g[H],x,I,B);else I=p(I)?!!I.capture:!!I,x=Xu(x),c&&c[gt]?(c=c.i,g=String(g).toString(),g in c.g&&(H=c.g[g],x=ns(H,x,I,B),-1<x&&(ni(H[x]),Array.prototype.splice.call(H,x,1),H.length==0&&(delete c.g[g],c.h--)))):c&&(c=Js(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ns(g,x,I,B)),(x=-1<c?g[c]:null)&&Qs(x))}function Qs(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[gt])_r(g.i,c);else{var x=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(x,I,c.capture):g.detachEvent?g.detachEvent(Ys(x),I):g.addListener&&g.removeListener&&g.removeListener(I),(x=Js(g))?(_r(x,c),x.h==0&&(x.src=null,g[Ca]=null)):ni(c)}}}function Ys(c){return c in Zs?Zs[c]:Zs[c]="on"+c}function Ju(c,g){if(c.da)c=!0;else{g=new we(g,this);var x=c.listener,I=c.ha||c.src;c.fa&&Qs(c),c=x.call(I,g)}return c}function Js(c){return c=c[Ca],c instanceof ri?c:null}var ja="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xu(c){return typeof c=="function"?c:(c[ja]||(c[ja]=function(g){return c.handleEvent(g)}),c[ja])}function ct(){xe.call(this),this.i=new ri(this),this.M=this,this.F=null}j(ct,xe),ct.prototype[gt]=!0,ct.prototype.removeEventListener=function(c,g,x,I){Yu(this,c,g,x,I)};function wt(c,g){var x,I=c.F;if(I)for(x=[];I;I=I.F)x.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new ke(g,c);else if(g instanceof ke)g.target=g.target||c;else{var B=g;g=new ke(I,c),P(g,B)}if(B=!0,x)for(var H=x.length-1;0<=H;H--){var ee=g.g=x[H];B=rs(ee,I,!0,g)&&B}if(ee=g.g=c,B=rs(ee,I,!0,g)&&B,B=rs(ee,I,!1,g)&&B,x)for(H=0;H<x.length;H++)ee=g.g=x[H],B=rs(ee,I,!1,g)&&B}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var x=c.g[g],I=0;I<x.length;I++)ni(x[I]);delete c.g[g],c.h--}}this.F=null},ct.prototype.K=function(c,g,x,I){return this.i.add(String(c),g,!1,x,I)},ct.prototype.L=function(c,g,x,I){return this.i.add(String(c),g,!0,x,I)};function rs(c,g,x,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,H=0;H<g.length;++H){var ee=g[H];if(ee&&!ee.da&&ee.capture==x){var Oe=ee.listener,ht=ee.ha||ee.src;ee.fa&&_r(c.i,ee),B=Oe.call(ht,I)!==!1&&B}}return B&&!I.defaultPrevented}function ec(c,g,x){if(typeof c=="function")x&&(c=w(c,x));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function La(c){c.g=ec(()=>{c.g=null,c.i&&(c.i=!1,La(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class tc extends xe{constructor(g,x){super(),this.m=g,this.l=x,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:La(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(c){xe.call(this),this.h=c,this.g={}}j(is,xe);var Da=[];function Xs(c){G(c.g,function(g,x){this.g.hasOwnProperty(x)&&Qs(g)},c),c.g={}}is.prototype.N=function(){is.aa.N.call(this),Xs(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var eo=h.JSON.stringify,pf=h.JSON.parse,ss=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Oa(){}Oa.prototype.h=null;function nc(c){return c.h||(c.h=c.i())}function Ma(){}var ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function to(){ke.call(this,"d")}j(to,ke);function Va(){ke.call(this,"c")}j(Va,ke);var yr={},rc=null;function no(){return rc=rc||new ct}yr.La="serverreachability";function ic(c){ke.call(this,yr.La,c)}j(ic,ke);function os(c){const g=no();wt(g,new ic(g))}yr.STAT_EVENT="statevent";function ro(c,g){ke.call(this,yr.STAT_EVENT,c),this.stat=g}j(ro,ke);function It(c){const g=no();wt(g,new ro(g,c))}yr.Ma="timingevent";function sc(c,g){ke.call(this,yr.Ma,c),this.size=g}j(sc,ke);function as(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function ls(){this.g=!0}ls.prototype.xa=function(){this.g=!1};function bn(c,g,x,I,B,H){c.info(function(){if(c.g)if(H)for(var ee="",Oe=H.split("&"),ht=0;ht<Oe.length;ht++){var Pe=Oe[ht].split("=");if(1<Pe.length){var Fe=Pe[0];Pe=Pe[1];var Je=Fe.split("_");ee=2<=Je.length&&Je[1]=="type"?ee+(Fe+"="+Pe+"&"):ee+(Fe+"=redacted&")}}else ee=null;else ee=H;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+g+`
`+x+`
`+ee})}function oe(c,g,x,I,B,H,ee){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+g+`
`+x+`
`+H+" "+ee})}function xr(c,g,x,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ac(c,x)+(I?" "+I:"")})}function oc(c,g){c.info(function(){return"TIMEOUT: "+g})}ls.prototype.info=function(){};function ac(c,g){if(!c.g)return g;if(!g)return null;try{var x=JSON.parse(g);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var I=x[c];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var H=B[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ee=1;ee<B.length;ee++)B[ee]=""}}}}return eo(x)}catch{return g}}var us={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},io={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},so;function Vn(){}j(Vn,Oa),Vn.prototype.g=function(){return new XMLHttpRequest},Vn.prototype.i=function(){return{}},so=new Vn;function zn(c,g,x,I){this.j=c,this.i=g,this.l=x,this.R=I||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lc}function lc(){this.i=null,this.g="",this.h=!1}var uc={},za={};function Fa(c,g,x){c.L=1,c.v=Tn(it(g)),c.m=x,c.P=!0,Ua(c,null)}function Ua(c,g){c.F=Date.now(),ao(c),c.A=it(c.v);var x=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),dc(x.i,"t",I),c.C=0,x=c.j.J,c.h=new lc,c.g=yc(c.j,x?g:null,!c.m),0<c.O&&(c.M=new tc(w(c.Y,c,c.g),c.O)),g=c.U,x=c.g,I=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Da[0]=B.toString()),B=Da);for(var H=0;H<B.length;H++){var ee=Aa(x,B[H],I||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=c.H?T(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),os(),bn(c.i,c.u,c.A,c.l,c.R,c.m)}zn.prototype.ca=function(c){c=c.target;const g=this.M;g&&qt(c)==3?g.j():this.Y(c)},zn.prototype.Y=function(c){try{if(c==this.g)e:{const Je=qt(this.g);var g=this.g.Ba();const hi=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||rl(this.g)))){this.J||Je!=4||g==7||(g==8||0>=hi?os(3):os(2)),Ba(this);var x=this.g.Z();this.X=x;t:if(cc(this)){var I=rl(this.g);c="";var B=I.length,H=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wr(this),cs(this);var ee="";break t}this.h.i=new h.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(H&&g==B-1)});I.length=0,this.h.g+=c,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=x==200,oe(this.i,this.u,this.A,this.l,this.R,Je,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,ht=this.g;if((Oe=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Oe)){var Pe=Oe;break t}}Pe=null}if(x=Pe)xr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,x);else{this.o=!1,this.s=3,It(12),wr(this),cs(this);break e}}if(this.P){x=!0;let at;for(;!this.J&&this.C<ee.length;)if(at=oo(this,ee),at==za){Je==4&&(this.s=4,It(14),x=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(at==uc){this.s=4,It(15),xr(this.i,this.l,ee,"[Invalid Chunk]"),x=!1;break}else xr(this.i,this.l,at,null),hs(this,at);if(cc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||ee.length!=0||this.h.h||(this.s=1,It(16),x=!1),this.o=this.o&&x,!x)xr(this.i,this.l,ee,"[Invalid Chunked Response]"),wr(this),cs(this);else if(0<ee.length&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.ba&&!Fe.M&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),vo(Fe),Fe.M=!0,It(11))}}else xr(this.i,this.l,ee,null),hs(this,ee);Je==4&&wr(this),this.o&&!this.J&&(Je==4?sl(this.j,this):(this.o=!1,ao(this)))}else mf(this.g),x==400&&0<ee.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),wr(this),cs(this)}}}catch{}finally{}};function cc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function oo(c,g){var x=c.C,I=g.indexOf(`
`,x);return I==-1?za:(x=Number(g.substring(x,I)),isNaN(x)?uc:(I+=1,I+x>g.length?za:(g=g.slice(I,I+x),c.C=I+x,g)))}zn.prototype.cancel=function(){this.J=!0,wr(this)};function ao(c){c.S=Date.now()+c.I,hc(c,c.I)}function hc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=as(w(c.ba,c),g)}function Ba(c){c.B&&(h.clearTimeout(c.B),c.B=null)}zn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(oc(this.i,this.A),this.L!=2&&(os(),It(17)),wr(this),this.s=2,cs(this)):hc(this,this.S-c)};function cs(c){c.j.G==0||c.J||sl(c.j,c)}function wr(c){Ba(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Xs(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function hs(c,g){try{var x=c.j;if(x.G!=0&&(x.g==c||Ne(x.h,c))){if(!c.K&&Ne(x.h,c)&&x.G==3){try{var I=x.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)yo(x),mo(x);else break e;go(x),It(18)}}else x.za=B[1],0<x.za-x.T&&37500>B[2]&&x.F&&x.v==0&&!x.C&&(x.C=as(w(x.Za,x),6e3));if(1>=si(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Nr(x,11)}else if((c.K||x.g==c)&&yo(x),!N(g))for(B=x.Da.g.parse(g),g=0;g<B.length;g++){let Pe=B[g];if(x.T=Pe[0],Pe=Pe[1],x.G==2)if(Pe[0]=="c"){x.K=Pe[1],x.ia=Pe[2];const Fe=Pe[3];Fe!=null&&(x.la=Fe,x.j.info("VER="+x.la));const Je=Pe[4];Je!=null&&(x.Aa=Je,x.j.info("SVER="+x.Aa));const hi=Pe[5];hi!=null&&typeof hi=="number"&&0<hi&&(I=1.5*hi,x.L=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const at=c.g;if(at){const wo=at.g?at.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var H=I.h;H.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ue(H,H.h),H.h=null))}if(I.D){const rr=at.g?at.g.getResponseHeader("X-HTTP-Session-Id"):null;rr&&(I.ya=rr,pe(I.I,I.D,rr))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),I=x;var ee=c;if(I.qa=xo(I,I.J?I.ia:null,I.W),ee.K){fs(I.h,ee);var Oe=ee,ht=I.L;ht&&(Oe.I=ht),Oe.B&&(Ba(Oe),ao(Oe)),I.g=ee}else Bn(I);0<x.i.length&&ci(x)}else Pe[0]!="stop"&&Pe[0]!="close"||Nr(x,7);else x.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Nr(x,7):po(x):Pe[0]!="noop"&&x.l&&x.l.ta(Pe),x.v=0)}}os(4)}catch{}}var ds=class{constructor(c,g){this.g=c,this.map=g}};function $a(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function si(c){return c.h?1:c.g?c.g.size:0}function Ne(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ue(c,g){c.g?c.g.add(g):c.h=g}function fs(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}$a.prototype.cancel=function(){if(this.i=br(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function br(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const x of c.g.values())g=g.concat(x.D);return g}return S(c.i)}function oi(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],x=c.length,I=0;I<x;I++)g.push(c[I]);return g}g=[],x=0;for(I in c)g[x++]=c[I];return g}function Ha(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var x=0;x<c;x++)g.push(x);return g}g=[],x=0;for(const I in c)g[x++]=I;return g}}}function ye(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var x=Ha(c),I=oi(c),B=I.length,H=0;H<B;H++)g.call(void 0,I[H],x&&x[H],c)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qa(c,g){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var I=c[x].indexOf("="),B=null;if(0<=I){var H=c[x].substring(0,I);B=c[x].substring(I+1)}else H=c[x];g(H,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function En(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof En){this.h=c.h,lo(this,c.j),this.o=c.o,this.g=c.g,Er(this,c.s),this.l=c.l;var g=c.i,x=new Tr;x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),tr(this,x),this.m=c.m}else c&&(g=String(c).match(Ze))?(this.h=!1,lo(this,g[1]||"",!0),this.o=Fn(g[2]||""),this.g=Fn(g[3]||"",!0),Er(this,g[4]),this.l=Fn(g[5]||"",!0),tr(this,g[6]||"",!0),this.m=Fn(g[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}En.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Un(g,ai,!0),":");var x=this.g;return(x||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Un(g,ai,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(Un(x,x.charAt(0)=="/"?Ka:Za,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",Un(x,Qa)),c.join("")};function it(c){return new En(c)}function lo(c,g,x){c.j=x?Fn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Er(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function tr(c,g,x){g instanceof Tr?(c.i=g,kn(c.i,c.h)):(x||(g=Un(g,uo)),c.i=new Tr(g,c.h))}function pe(c,g,x){c.i.set(g,x)}function Tn(c){return pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Un(c,g,x){return typeof c=="string"?(c=encodeURI(c).replace(g,Ga),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ga(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ai=/[#\/\?@]/g,Za=/[#\?:]/g,Ka=/[#\?]/g,uo=/[#\?@]/g,Qa=/#/g;function Tr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function hn(c){c.g||(c.g=new Map,c.h=0,c.i&&qa(c.i,function(g,x){c.add(decodeURIComponent(g.replace(/\+/g," ")),x)}))}t=Tr.prototype,t.add=function(c,g){hn(this),this.i=null,c=ue(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(g),this.h+=1,this};function Ya(c,g){hn(c),g=ue(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function co(c,g){return hn(c),g=ue(c,g),c.g.has(g)}t.forEach=function(c,g){hn(this),this.g.forEach(function(x,I){x.forEach(function(B){c.call(g,B,I,this)},this)},this)},t.na=function(){hn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),x=[];for(let I=0;I<g.length;I++){const B=c[I];for(let H=0;H<B.length;H++)x.push(g[I])}return x},t.V=function(c){hn(this);let g=[];if(typeof c=="string")co(this,c)&&(g=g.concat(this.g.get(ue(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)g=g.concat(c[x])}return g},t.set=function(c,g){return hn(this),this.i=null,c=ue(this,c),co(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function dc(c,g,x){Ya(c,g),0<x.length&&(c.i=null,c.g.set(ue(c,g),S(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var x=0;x<g.length;x++){var I=g[x];const H=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var B=H;ee[I]!==""&&(B+="="+encodeURIComponent(String(ee[I]))),c.push(B)}}return this.i=c.join("&")};function ue(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function kn(c,g){g&&!c.j&&(hn(c),c.i=null,c.g.forEach(function(x,I){var B=I.toLowerCase();I!=B&&(Ya(this,I),dc(this,B,x))},c)),c.j=g}function ze(c,g){const x=new ls;if(h.Image){const I=new Image;I.onload=E(Nn,x,"TestLoadImage: loaded",!0,g,I),I.onerror=E(Nn,x,"TestLoadImage: error",!1,g,I),I.onabort=E(Nn,x,"TestLoadImage: abort",!1,g,I),I.ontimeout=E(Nn,x,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function fc(c,g){const x=new ls,I=new AbortController,B=setTimeout(()=>{I.abort(),Nn(x,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(H=>{clearTimeout(B),H.ok?Nn(x,"TestPingServer: ok",!0,g):Nn(x,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Nn(x,"TestPingServer: error",!1,g)})}function Nn(c,g,x,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(x)}catch{}}function Ja(){this.g=new ss}function Xa(c,g,x){const I=x||"";try{ye(c,function(B,H){let ee=B;p(B)&&(ee=eo(B)),g.push(I+H+"="+encodeURIComponent(ee))})}catch(B){throw g.push(I+"type="+encodeURIComponent("_badmap")),B}}function In(c){this.l=c.Ub||null,this.j=c.eb||!1}j(In,Oa),In.prototype.g=function(){return new li(this.l,this.j)},In.prototype.i=function(c){return function(){return c}}({});function li(c,g){ct.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(li,ct),t=li.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,dn(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ye(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,dn(this)),this.g&&(this.readyState=3,dn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ui(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ui(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Ye(this):dn(this),this.readyState==3&&ui(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ye(this))},t.Qa=function(c){this.g&&(this.response=c,Ye(this))},t.ga=function(){this.g&&Ye(this)};function Ye(c){c.readyState=4,c.l=null,c.j=null,c.v=null,dn(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var x=g.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=g.next();return c.join(`\r
`)};function dn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function el(c){let g="";return G(c,function(x,I){g+=I,g+=":",g+=x,g+=`\r
`}),g}function ho(c,g,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=el(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):pe(c,g,x))}function Ke(c){ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Ke,ct);var pc=/^https?$/i,tl=["POST","PUT"];t=Ke.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():so.g(),this.v=this.o?nc(this.o):nc(so),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(H){mc(this,H);return}if(c=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)x.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())x.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(H=>H.toLowerCase()=="content-type"),B=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(tl,g,void 0))||I||B||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ee]of x)this.g.setRequestHeader(H,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){mc(this,H)}};function mc(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,nl(c),fo(c)}function nl(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),fo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fo(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ee(this):this.bb())},t.bb=function(){Ee(this)};function Ee(c){if(c.h&&typeof l<"u"&&(!c.v[1]||qt(c)!=4||c.Z()!=2)){if(c.u&&qt(c)==4)ec(c.Ea,0,c);else if(wt(c,"readystatechange"),qt(c)==4){c.h=!1;try{const ee=c.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var x;if(!(x=g)){var I;if(I=ee===0){var B=String(c.D).match(Ze)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),I=!pc.test(B?B.toLowerCase():"")}x=I}if(x)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var H=2<qt(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",nl(c)}}finally{fo(c)}}}}function fo(c,g){if(c.g){en(c);const x=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||wt(c,"ready");try{x.onreadystatechange=I}catch{}}}function en(c){c.I&&(h.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function qt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),pf(g)}};function rl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function mf(c){const g={};c=(c.g&&2<=qt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(N(c[I]))continue;var x=V(c[I]);const B=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const H=g[B]||[];g[B]=H,H.push(x)}k(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(c,g,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||g}function gc(c){this.Aa=0,this.i=[],this.j=new ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kr("baseRetryDelayMs",5e3,c),this.cb=kr("retryDelaySeedMs",1e4,c),this.Wa=kr("forwardChannelMaxRetries",2,c),this.wa=kr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $a(c&&c.concurrentRequestLimit),this.Da=new Ja,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gc.prototype,t.la=8,t.G=1,t.connect=function(c,g,x,I){It(0),this.W=c,this.H=g||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.I=xo(this,null,this.W),ci(this)};function po(c){if(vc(c),c.G==3){var g=c.U++,x=it(c.I);if(pe(x,"SID",c.K),pe(x,"RID",g),pe(x,"TYPE","terminate"),ps(c,x),g=new zn(c,c.j,g),g.L=2,g.v=Tn(it(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!x&&h.Image&&(new Image().src=g.v,x=!0),x||(g.g=yc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ao(g)}_c(c)}function mo(c){c.g&&(vo(c),c.g.cancel(),c.g=null)}function vc(c){mo(c),c.u&&(h.clearTimeout(c.u),c.u=null),yo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function ci(c){if(!Wa(c.h)&&!c.s){c.s=!0;var g=c.Ga;Ht||X(),Z||(Ht(),Z=!0),he.add(g,c),c.B=0}}function gf(c,g){return si(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=as(w(c.Ga,c,g),ol(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new zn(this,this.j,c);let H=this.o;if(this.S&&(H?(H=T(H),P(H,this.S)):H=this.S),this.m!==null||this.O||(B.H=H,H=null),this.P)e:{for(var g=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=x;break e}if(g===4096||x===this.i.length-1){g=x+1;break e}}g=1e3}else g=1e3;g=il(this,B,g),x=it(this.I),pe(x,"RID",c),pe(x,"CVER",22),this.D&&pe(x,"X-HTTP-Session-Id",this.D),ps(this,x),H&&(this.O?g="headers="+encodeURIComponent(String(el(H)))+"&"+g:this.m&&ho(x,this.m,H)),Ue(this.h,B),this.Ua&&pe(x,"TYPE","init"),this.P?(pe(x,"$req",g),pe(x,"SID","null"),B.T=!0,Fa(B,x,null)):Fa(B,x,g),this.G=2}}else this.G==3&&(c?fn(this,c):this.i.length==0||Wa(this.h)||fn(this))};function fn(c,g){var x;g?x=g.l:x=c.U++;const I=it(c.I);pe(I,"SID",c.K),pe(I,"RID",x),pe(I,"AID",c.T),ps(c,I),c.m&&c.o&&ho(I,c.m,c.o),x=new zn(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),g&&(c.i=g.D.concat(c.i)),g=il(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ue(c.h,x),Fa(x,I,g)}function ps(c,g){c.H&&G(c.H,function(x,I){pe(g,I,x)}),c.l&&ye({},function(x,I){pe(g,I,x)})}function il(c,g,x){x=Math.min(c.i.length,x);var I=c.l?w(c.l.Na,c.l,c):null;e:{var B=c.i;let H=-1;for(;;){const ee=["count="+x];H==-1?0<x?(H=B[0].g,ee.push("ofs="+H)):H=0:ee.push("ofs="+H);let Oe=!0;for(let ht=0;ht<x;ht++){let Pe=B[ht].g;const Fe=B[ht].map;if(Pe-=H,0>Pe)H=Math.max(0,B[ht].g-100),Oe=!1;else try{Xa(Fe,ee,"req"+Pe+"_")}catch{I&&I(Fe)}}if(Oe){I=ee.join("&");break e}}}return c=c.i.splice(0,x),g.D=c,I}function Bn(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Ht||X(),Z||(Ht(),Z=!0),he.add(g,c),c.v=0}}function go(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=as(w(c.Fa,c),ol(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,_o(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=as(w(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),mo(this),_o(this))};function vo(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function _o(c){c.g=new zn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=it(c.qa);pe(g,"RID","rpc"),pe(g,"SID",c.K),pe(g,"AID",c.T),pe(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&pe(g,"TO",c.ja),pe(g,"TYPE","xmlhttp"),ps(c,g),c.m&&c.o&&ho(g,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=Tn(it(g)),x.m=null,x.P=!0,Ua(x,c)}t.Za=function(){this.C!=null&&(this.C=null,mo(this),go(this),It(19))};function yo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function sl(c,g){var x=null;if(c.g==g){yo(c),vo(c),c.g=null;var I=2}else if(Ne(c.h,g))x=g.D,fs(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){x=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;I=no(),wt(I,new sc(I,x)),ci(c)}else Bn(c);else if(B=g.s,B==3||B==0&&0<g.X||!(I==1&&gf(c,g)||I==2&&go(c)))switch(x&&0<x.length&&(g=c.h,g.i=g.i.concat(x)),B){case 1:Nr(c,5);break;case 4:Nr(c,10);break;case 3:Nr(c,6);break;default:Nr(c,2)}}}function ol(c,g){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*g}function Nr(c,g){if(c.j.info("Error code "+g),g==2){var x=w(c.fb,c),I=c.Xa;const B=!I;I=new En(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||lo(I,"https"),Tn(I),B?ze(I.toString(),x):fc(I.toString(),x)}else It(2);c.G=0,c.l&&c.l.sa(g),_c(c),vc(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function _c(c){if(c.G=0,c.ka=[],c.l){const g=br(c.h);(g.length!=0||c.i.length!=0)&&(M(c.ka,g),M(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function xo(c,g,x){var I=x instanceof En?it(x):new En(x);if(I.g!="")g&&(I.g=g+"."+I.g),Er(I,I.s);else{var B=h.location;I=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var H=new En(null);I&&lo(H,I),g&&(H.g=g),B&&Er(H,B),x&&(H.l=x),I=H}return x=c.D,g=c.ya,x&&g&&pe(I,x,g),pe(I,"VER",c.la),ps(c,I),I}function yc(c,g,x){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ke(new In({eb:x})):new Ke(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function al(){}t=al.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ms(){}ms.prototype.g=function(c,g){return new bt(c,g)};function bt(c,g){ct.call(this),this.g=new gc(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!N(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Sn(this)}j(bt,ct),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){po(this.g)},bt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=eo(c),c=x);g.i.push(new ds(g.Ya++,c)),g.G==3&&ci(g)},bt.prototype.N=function(){this.g.l=null,delete this.j,po(this.g),delete this.g,bt.aa.N.call(this)};function nr(c){to.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const x in g){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}j(nr,to);function xc(){Va.call(this),this.status=1}j(xc,Va);function Sn(c){this.g=c}j(Sn,al),Sn.prototype.ua=function(){wt(this.g,"a")},Sn.prototype.ta=function(c){wt(this.g,new nr(c))},Sn.prototype.sa=function(c){wt(this.g,new xc)},Sn.prototype.ra=function(){wt(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,_1=function(){return new ms},v1=function(){return no()},g1=yr,_m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,vh=us,io.COMPLETE="complete",m1=io,Ma.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Il=Ma,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,p1=Ke}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const Jy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new qg("@firebase/firestore");function xl(){return Ms.logLevel}function se(t,...e){if(Ms.logLevel<=Se.DEBUG){const n=e.map(Kg);Ms.debug(`Firestore (${Ta}): ${t}`,...n)}}function Kr(t,...e){if(Ms.logLevel<=Se.ERROR){const n=e.map(Kg);Ms.error(`Firestore (${Ta}): ${t}`,...n)}}function ua(t,...e){if(Ms.logLevel<=Se.WARN){const n=e.map(Kg);Ms.warn(`Firestore (${Ta}): ${t}`,...n)}}function Kg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t="Unexpected state"){const e=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: `+t;throw Kr(e),new Error(e)}function Ve(t,e){t||me()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class DC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OC{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ur,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},h=f=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ur)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string"),new y1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string"),new zt(e)}}class MC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class VC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ve(this.o===void 0);const r=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string"),this.R=n.token,new zC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=UC(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function ca(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new xt(0,0))}static max(){return new ve(new xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(),r===void 0?r=e.length-n:r>e.length-n&&me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),l=n.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends gu{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const BC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends gu{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return BC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new re(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new re(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new re(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(qe.fromString(e))}static fromName(e){return new ae(qe.fromString(e).popFirst(5))}static empty(){return new ae(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new qe(e.slice()))}}function $C(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new Hi(i,ae.empty(),e)}function WC(t){return new Hi(t.readTime,t.key,-1)}class Hi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hi(ve.min(),ae.empty(),-1)}static max(){return new Hi(ve.max(),ae.empty(),-1)}}function HC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==qC)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let i=0,o=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&n()},f=>r(f))}),l=!0,o===i&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(i=>i?Y.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,i)=>{const o=e.length,l=new Array(o);let h=0;for(let f=0;f<o;f++){const p=f;n(e[p]).next(v=>{l[p]=v,++h,h===o&&r(l)},v=>i(v))}})}static doWhile(e,n){return new Y((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function ZC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ou(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qg.oe=-1;function qd(t){return t==null}function ed(t){return t===0&&1/t==-1/0}function KC(t){return typeof t=="number"&&Number.isInteger(t)&&!ed(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Pt.RED,this.left=i??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Pt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new e0(this.data.getIterator())}getIteratorFrom(e){return new e0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class e0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new vn([])}unionWith(e){let n=new jt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new b1("Invalid base64 string: "+o):o}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(t){if(Ve(!!t),typeof t=="string"){let e=0;const n=QC.exec(t);if(Ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vs(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jg(t){const e=t.mapValue.fields.__previous_value__;return Yg(e)?Jg(e):e}function vu(t){const e=qi(t.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r,i,o,l,h,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p}}class _u{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc={mapValue:{}};function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yg(t)?4:XC(t)?9007199254740991:JC(t)?10:11:me()}function gr(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vu(t).isEqual(vu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=qi(i.timestampValue),h=qi(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Vs(i.bytesValue).isEqual(Vs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return lt(i.geoPointValue.latitude)===lt(o.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return lt(i.integerValue)===lt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=lt(i.doubleValue),h=lt(o.doubleValue);return l===h?ed(l)===ed(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return ca(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},h=o.mapValue.fields||{};if(Xy(l)!==Xy(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!gr(l[f],h[f])))return!1;return!0}(t,e);default:return me()}}function yu(t,e){return(t.values||[]).find(n=>gr(n,e))!==void 0}function ha(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=lt(o.integerValue||o.doubleValue),f=lt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return t0(t.timestampValue,e.timestampValue);case 4:return t0(vu(t),vu(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Vs(o),f=Vs(l);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const v=je(h[p],f[p]);if(v!==0)return v}return je(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=je(lt(o.latitude),lt(l.latitude));return h!==0?h:je(lt(o.longitude),lt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return n0(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,f,p,v;const y=o.fields||{},w=l.fields||{},E=(h=y.value)===null||h===void 0?void 0:h.arrayValue,j=(f=w.value)===null||f===void 0?void 0:f.arrayValue,S=je(((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0,((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0);return S!==0?S:n0(E,j)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Jc.mapValue&&l===Jc.mapValue)return 0;if(o===Jc.mapValue)return 1;if(l===Jc.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),p=l.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let y=0;y<f.length&&y<v.length;++y){const w=je(f[y],v[y]);if(w!==0)return w;const E=ha(h[f[y]],p[v[y]]);if(E!==0)return E}return je(f.length,v.length)}(t.mapValue,e.mapValue);default:throw me()}}function t0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=qi(t),r=qi(e),i=je(n.seconds,r.seconds);return i!==0?i:je(n.nanos,r.nanos)}function n0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=ha(n[i],r[i]);if(o)return o}return je(n.length,r.length)}function da(t){return ym(t)}function ym(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=ym(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${ym(n.fields[l])}`;return i+"}"}(t.mapValue):me()}function r0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xm(t){return!!t&&"integerValue"in t}function Xg(t){return!!t&&"arrayValue"in t}function i0(t){return!!t&&"nullValue"in t}function s0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _h(t){return!!t&&"mapValue"in t}function JC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Fl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}l?r[h.lastSegment()]=Fl(l):i.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());_h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qs(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new sn(Fl(this.value))}}function E1(t){const e=[];return qs(t.fields,(n,r)=>{const i=new Ct([n]);if(_h(r)){const o=E1(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,o,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ut(e,0,ve.min(),ve.min(),ve.min(),sn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,ve.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,ve.min(),ve.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ve.min(),ve.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.position=e,this.inclusive=n}}function o0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],l=t.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(l.referenceValue),n.key):r=ha(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function a0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n="asc"){this.field=e,this.dir=n}}function eA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{}class mt extends T1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nA(e,n,r):n==="array-contains"?new sA(e,r):n==="in"?new oA(e,r):n==="not-in"?new aA(e,r):n==="array-contains-any"?new lA(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rA(e,r):new iA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ha(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends T1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Xn(e,n)}matches(e){return k1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function k1(t){return t.op==="and"}function N1(t){return tA(t)&&k1(t)}function tA(t){for(const e of t.filters)if(e instanceof Xn)return!1;return!0}function wm(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+da(t.value);if(N1(t))return t.filters.map(e=>wm(e)).join(",");{const e=t.filters.map(n=>wm(n)).join(",");return`${t.op}(${e})`}}function I1(t,e){return t instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&gr(r.value,i.value)}(t,e):t instanceof Xn?function(r,i){return i instanceof Xn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,h)=>o&&I1(l,i.filters[h]),!0):!1}(t,e):void me()}function S1(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${da(n.value)}`}(t):t instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(S1).join(" ,")+"}"}(t):"Filter"}class nA extends mt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class rA extends mt{constructor(e,n){super(e,"in",n),this.keys=P1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iA extends mt{constructor(e,n){super(e,"not-in",n),this.keys=P1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class sA extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xg(n)&&yu(n.arrayValue,this.value)}}class oA extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yu(this.value.arrayValue,n)}}class aA extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!yu(this.value.arrayValue,n)}}class lA extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n=null,r=[],i=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function l0(t,e=null,n=[],r=[],i=null,o=null,l=null){return new uA(t,e,n,r,i,o,l)}function ev(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>da(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>da(r)).join(",")),e.ue=n}return e.ue}function tv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!I1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!a0(t.startAt,e.startAt)&&a0(t.endAt,e.endAt)}function bm(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n=null,r=[],i=[],o=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cA(t,e,n,r,i,o,l,h){return new ka(t,e,n,r,i,o,l,h)}function Gd(t){return new ka(t)}function u0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function C1(t){return t.collectionGroup!==null}function Ul(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new jt(Ct.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new xu(o,r))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new xu(Ct.keyField(),r))}return e.ce}function dr(t){const e=_e(t);return e.le||(e.le=hA(e,Ul(t))),e.le}function hA(t,e){if(t.limitType==="F")return l0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new xu(i.field,o)});const n=t.endAt?new td(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new td(t.startAt.position,t.startAt.inclusive):null;return l0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Em(t,e){const n=t.filters.concat([e]);return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nd(t,e,n){return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zd(t,e){return tv(dr(t),dr(e))&&t.limitType===e.limitType}function A1(t){return`${ev(dr(t))}|lt:${t.limitType}`}function Io(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>S1(i)).join(", ")}]`),qd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>da(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>da(i)).join(",")),`Target(${r})`}(dr(t))}; limitType=${t.limitType})`}function Kd(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ul(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,h,f){const p=o0(l,h,f);return l.inclusive?p<=0:p<0}(r.startAt,Ul(r),i)||r.endAt&&!function(l,h,f){const p=o0(l,h,f);return l.inclusive?p>=0:p>0}(r.endAt,Ul(r),i))}(t,e)}function dA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R1(t){return(e,n)=>{let r=!1;for(const i of Ul(t)){const o=fA(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function fA(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(o,l,h){const f=l.data.field(o),p=h.data.field(o);return f!==null&&p!==null?ha(f,p):me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return w1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new rt(ae.comparator);function Qr(){return pA}const j1=new rt(ae.comparator);function Sl(...t){let e=j1;for(const n of t)e=e.insert(n.key,n);return e}function L1(t){let e=j1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Es(){return Bl()}function D1(){return Bl()}function Bl(){return new Na(t=>t.toString(),(t,e)=>t.isEqual(e))}const mA=new rt(ae.comparator),gA=new jt(ae.comparator);function Ie(...t){let e=gA;for(const n of t)e=e.add(n);return e}const vA=new jt(je);function _A(){return vA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(e)?"-0":e}}function O1(t){return{integerValue:""+t}}function yA(t,e){return KC(e)?O1(e):nv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this._=void 0}}function xA(t,e,n){return t instanceof wu?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Yg(o)&&(o=Jg(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof fa?V1(t,e):t instanceof bu?z1(t,e):function(i,o){const l=M1(i,o),h=c0(l)+c0(i.Pe);return xm(l)&&xm(i.Pe)?O1(h):nv(i.serializer,h)}(t,e)}function wA(t,e,n){return t instanceof fa?V1(t,e):t instanceof bu?z1(t,e):n}function M1(t,e){return t instanceof rd?function(r){return xm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class wu extends Qd{}class fa extends Qd{constructor(e){super(),this.elements=e}}function V1(t,e){const n=F1(e);for(const r of t.elements)n.some(i=>gr(i,r))||n.push(r);return{arrayValue:{values:n}}}class bu extends Qd{constructor(e){super(),this.elements=e}}function z1(t,e){let n=F1(e);for(const r of t.elements)n=n.filter(i=>!gr(i,r));return{arrayValue:{values:n}}}class rd extends Qd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function c0(t){return lt(t.integerValue||t.doubleValue)}function F1(t){return Xg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.field=e,this.transform=n}}function bA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fa&&i instanceof fa||r instanceof bu&&i instanceof bu?ca(r.elements,i.elements,gr):r instanceof rd&&i instanceof rd?gr(r.Pe,i.Pe):r instanceof wu&&i instanceof wu}(t.transform,e.transform)}class EA{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yd{}function B1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jd(t.key,Qt.none()):new Mu(t.key,t.data,Qt.none());{const n=t.data,r=sn.empty();let i=new jt(Ct.comparator);for(let o of e.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Xi(t.key,r,new vn(i.toArray()),Qt.none())}}function TA(t,e,n){t instanceof Mu?function(i,o,l){const h=i.value.clone(),f=d0(i.fieldTransforms,o,l.transformResults);h.setAll(f),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Xi?function(i,o,l){if(!yh(i.precondition,o))return void o.convertToUnknownDocument(l.version);const h=d0(i.fieldTransforms,o,l.transformResults),f=o.data;f.setAll($1(i)),f.setAll(h),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function $l(t,e,n,r){return t instanceof Mu?function(o,l,h,f){if(!yh(o.precondition,l))return h;const p=o.value.clone(),v=f0(o.fieldTransforms,f,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xi?function(o,l,h,f){if(!yh(o.precondition,l))return h;const p=f0(o.fieldTransforms,f,l),v=l.data;return v.setAll($1(o)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,l,h){return yh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function kA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=M1(r.transform,i||null);o!=null&&(n===null&&(n=sn.empty()),n.set(r.field,o))}return n||null}function h0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ca(r,i,(o,l)=>bA(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mu extends Yd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xi extends Yd{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function d0(t,e,n){const r=new Map;Ve(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],l=o.transform,h=e.data.field(o.field);r.set(o.field,wA(l,h,n[i]))}return r}function f0(t,e,n){const r=new Map;for(const i of t){const o=i.transform,l=n.data.field(i.field);r.set(i.field,xA(o,l,e))}return r}class Jd extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NA extends Yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&TA(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$l(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$l(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D1();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(i.key)?null:h;const f=B1(l,h);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,(n,r)=>h0(n,r))&&ca(this.baseMutations,e.baseMutations,(n,r)=>h0(n,r))}}class rv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ve(e.mutations.length===r.length);let i=function(){return mA}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new rv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Ce;function CA(t){switch(t){default:return me();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function W1(t){if(t===void 0)return Kr("GRPC error has no .code"),K.UNKNOWN;switch(t){case ft.OK:return K.OK;case ft.CANCELLED:return K.CANCELLED;case ft.UNKNOWN:return K.UNKNOWN;case ft.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ft.INTERNAL:return K.INTERNAL;case ft.UNAVAILABLE:return K.UNAVAILABLE;case ft.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ft.NOT_FOUND:return K.NOT_FOUND;case ft.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ft.ABORTED:return K.ABORTED;case ft.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ft.DATA_LOSS:return K.DATA_LOSS;default:return me()}}(Ce=ft||(ft={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new Ss([4294967295,4294967295],0);function p0(t){const e=AA().encode(t),n=new f1;return n.update(e),new Uint8Array(n.digest())}function m0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ss([n,r],0),new Ss([i,o],0)]}class iv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pl(`Invalid padding: ${n}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ss.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ss.fromNumber(r)));return i.compare(RA)===1&&(i=new Ss([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=p0(e),[r,i]=m0(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);if(!this.de(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new iv(o,i,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=p0(e),[r,i]=m0(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xd(ve.min(),i,new rt(je),Qr(),Ie())}}class Vu{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vu(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class H1{constructor(e,n){this.targetId=e,this.me=n}}class q1{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class g0{constructor(){this.fe=0,this.ge=_0(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me()}}),new Vu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=_0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jA{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=v0(),this.Qe=new rt(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(bm(o))if(r===0){const l=new ae(o.path);this.Ue(n,l,Ut.newNoDocument(l,ve.min()))}else Ve(r===1);else{const l=this.Ye(n);if(l!==r){const h=this.Ze(e),f=h?this.Xe(h,e,l):1;if(f!==0){this.je(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let l,h;try{l=Vs(r).toUint8Array()}catch(f){if(f instanceof b1)return ua("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new iv(l,i,o)}catch(f){return ua(f instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&bm(h.target)){const f=new ae(h.target.path);this.ke.get(f)!==null||this.it(l,f)||this.Ue(l,f,Ut.newNoDocument(f,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let r=Ie();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(f=>{const p=this.Je(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const i=new Xd(e,n,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=v0(),this.Qe=new rt(je),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new g0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new jt(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new g0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function v0(){return new rt(ae.comparator)}function _0(){return new rt(ae.comparator)}const LA={asc:"ASCENDING",desc:"DESCENDING"},DA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OA={and:"AND",or:"OR"};class MA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tm(t,e){return t.useProto3Json||qd(e)?e:{value:e}}function id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VA(t,e){return id(t,e.toTimestamp())}function fr(t){return Ve(!!t),ve.fromTimestamp(function(n){const r=qi(n);return new xt(r.seconds,r.nanos)}(t))}function sv(t,e){return km(t,e).canonicalString()}function km(t,e){const n=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Z1(t){const e=qe.fromString(t);return Ve(X1(e)),e}function Nm(t,e){return sv(t.databaseId,e.path)}function rp(t,e){const n=Z1(e);if(n.get(1)!==t.databaseId.projectId)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(Q1(n))}function K1(t,e){return sv(t.databaseId,e)}function zA(t){const e=Z1(t);return e.length===4?qe.emptyPath():Q1(e)}function Im(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q1(t){return Ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function y0(t,e,n){return{name:Nm(t,e),fields:n.value.mapValue.fields}}function FA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,v){return p.useProto3Json?(Ve(v===void 0||typeof v=="string"),Dt.fromBase64String(v||"")):(Ve(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Dt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const v=p.code===void 0?K.UNKNOWN:W1(p.code);return new re(v,p.message||"")}(l);n=new q1(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rp(t,r.document.name),o=fr(r.document.updateTime),l=r.document.createTime?fr(r.document.createTime):ve.min(),h=new sn({mapValue:{fields:r.document.fields}}),f=Ut.newFoundDocument(i,o,l,h),p=r.targetIds||[],v=r.removedTargetIds||[];n=new xh(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rp(t,r.document),o=r.readTime?fr(r.readTime):ve.min(),l=Ut.newNoDocument(i,o),h=r.removedTargetIds||[];n=new xh([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rp(t,r.document),o=r.removedTargetIds||[];n=new xh([],o,i,null)}else{if(!("filter"in e))return me();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new PA(i,o),h=r.targetId;n=new H1(h,l)}}return n}function UA(t,e){let n;if(e instanceof Mu)n={update:y0(t,e.key,e.value)};else if(e instanceof Jd)n={delete:Nm(t,e.key)};else if(e instanceof Xi)n={update:y0(t,e.key,e.data),updateMask:QA(e.fieldMask)};else{if(!(e instanceof NA))return me();n={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof wu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof fa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof bu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof rd)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw me()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:VA(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me()}(t,e.precondition)),n}function BA(t,e){return t&&t.length>0?(Ve(e!==void 0),t.map(n=>function(i,o){let l=i.updateTime?fr(i.updateTime):fr(o);return l.isEqual(ve.min())&&(l=fr(o)),new EA(l,i.transformResults||[])}(n,e))):[]}function $A(t,e){return{documents:[K1(t,e.path)]}}function WA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K1(t,i);const o=function(p){if(p.length!==0)return J1(Xn.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(v=>function(w){return{field:So(w.field),direction:GA(w.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Tm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:i}}function HA(t){let e=zA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ve(r===1);const v=n.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(y){const w=Y1(y);return w instanceof Xn&&N1(w)?w.getFilters():[w]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(w=>function(j){return new xu(Po(j.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(w))}(n.orderBy));let h=null;n.limit&&(h=function(y){let w;return w=typeof y=="object"?y.value:y,qd(w)?null:w}(n.limit));let f=null;n.startAt&&(f=function(y){const w=!!y.before,E=y.values||[];return new td(E,w)}(n.startAt));let p=null;return n.endAt&&(p=function(y){const w=!y.before,E=y.values||[];return new td(E,w)}(n.endAt)),cA(e,i,l,o,h,"F",f,p)}function qA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Y1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Po(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Po(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Po(n.unaryFilter.field);return mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Po(n.unaryFilter.field);return mt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):t.fieldFilter!==void 0?function(n){return mt.create(Po(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(r=>Y1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(t):me()}function GA(t){return LA[t]}function ZA(t){return DA[t]}function KA(t){return OA[t]}function So(t){return{fieldPath:t.canonicalString()}}function Po(t){return Ct.fromServerFormat(t.fieldPath)}function J1(t){return t instanceof mt?function(n){if(n.op==="=="){if(s0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(i0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(s0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(i0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:ZA(n.op),value:n.value}}}(t):t instanceof Xn?function(n){const r=n.getFilters().map(i=>J1(i));return r.length===1?r[0]:{compositeFilter:{op:KA(n.op),filters:r}}}(t):me()}function QA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function X1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,r,i,o=ve.min(),l=ve.min(),h=Dt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.ct=e}}function JA(t){const e=HA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.un=new eR}addToCollectionParentIndex(e,n){return this.un.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Hi.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class eR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new jt(qe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pa(0)}static kn(){return new pa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.changes=new Na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$l(r.mutation,i,vn.empty(),xt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let l=Sl();return o.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,i){let o=Qr();const l=Bl(),h=function(){return Bl()}();return n.forEach((f,p)=>{const v=r.get(p.key);i.has(p.key)&&(v===void 0||v.mutation instanceof Xi)?o=o.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),$l(v.mutation,p,v.mutation.getFieldMask(),xt.now())):l.set(p.key,vn.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((p,v)=>l.set(p,v)),n.forEach((p,v)=>{var y;return h.set(p,new nR(v,(y=l.get(p))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const r=Bl();let i=new rt((l,h)=>l-h),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let v=r.get(f)||vn.empty();v=h.applyToLocalView(p,v),r.set(f,v);const y=(i.get(h.batchId)||Ie()).add(f);i=i.insert(h.batchId,y)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,v=f.value,y=D1();v.forEach(w=>{if(!o.has(w)){const E=B1(n.get(w),r.get(w));E!==null&&y.set(w,E),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return Y.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Y.resolve(Es());let h=-1,f=o;return l.next(p=>Y.forEach(p,(v,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(v)?Y.resolve():this.remoteDocumentCache.getEntry(e,v).next(w=>{f=f.insert(v,w)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,f,p,Ie())).next(v=>({batchId:h,changes:L1(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Sl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let l=Sl();return this.indexManager.getCollectionParents(e,o).next(h=>Y.forEach(h,f=>{const p=function(y,w){return new ka(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(v=>{v.forEach((y,w)=>{l=l.insert(y,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(l=>{o.forEach((f,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,Ut.newInvalidDocument(v)))});let h=Sl();return l.forEach((f,p)=>{const v=o.get(f);v!==void 0&&$l(v.mutation,p,vn.empty(),xt.now()),Kd(n,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Y.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fr(i.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:JA(i.bundledQuery),readTime:fr(i.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.overlays=new rt(ae.comparator),this.Ir=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Es();return Y.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const i=Es(),o=n.length+1,l=new ae(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new rt((p,v)=>p-v);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let v=o.get(p.largestBatchId);v===null&&(v=Es(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=Es(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,v)=>h.set(p,v)),!(h.size()>=i)););return Y.resolve(h)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new SA(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ie(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.Tr=new jt(Tt.Er),this.dr=new jt(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new qe([])),r=new Tt(n,e),i=new Tt(n,e+1),o=[];return this.dr.forEachInRange([r,i],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new qe([])),r=new Tt(n,e),i=new Tt(n,e+1);let o=Ie();return this.dr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new jt(Tt.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new IA(o,n,r,i);this.mutationQueue.push(l);for(const h of i)this.br=this.br.add(new Tt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Y.resolve(l)}lookupMutationBatch(e,n){return Y.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),i=new Tt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],l=>{const h=this.Dr(l.wr);o.push(h)}),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(je);return n.forEach(i=>{const o=new Tt(i,0),l=new Tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{r=r.add(h.wr)})}),Y.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ae.isDocumentKey(o)||(o=o.child(""));const l=new Tt(new ae(o),0);let h=new jt(je);return this.br.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(h=h.add(f.wr)),!0)},l),Y.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Y.forEach(n.mutations,i=>{const o=new Tt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Tt(n,0),i=this.br.firstAfterOrEqual(r);return Y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.Mr=e,this.docs=function(){return new rt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ut.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Qr();const l=n.path,h=new ae(l.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||HC(WC(v),r)<=0||(i.has(v.key)||Kd(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,n,r,i){me()}Or(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uR(this)}getSize(e){return Y.resolve(this.size)}}class uR extends tR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.persistence=e,this.Nr=new Na(n=>ev(n),tv),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ov,this.targetCount=0,this.kr=pa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new pa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Kn(n),Y.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Y.waitFor(o).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),Y.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qg(0),this.Kr=!1,this.Kr=!0,this.$r=new oR,this.referenceDelegate=e(this),this.Ur=new cR(this),this.indexManager=new XA,this.remoteDocumentCache=function(i){return new lR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YA(n),this.Gr=new iR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new aR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new dR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return Y.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class dR extends GC{constructor(e){super(),this.currentSequenceNumber=e}}class av{constructor(e){this.persistence=e,this.Jr=new ov,this.Yr=null}static Zr(e){return new av(e)}get Xr(){if(this.Yr)return this.Yr;throw me()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,r=>{const i=ae.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ve.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Y.or([()=>Y.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ie(),i=Ie();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new lv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vP()?8:ZC(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new fR;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(xl()<=Se.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(xl()<=Se.DEBUG&&se("QueryEngine","Query:",Io(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(xl()<=Se.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):Y.resolve())}Yi(e,n){if(u0(n))return Y.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nd(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ie(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.ts(n,h);return this.ns(n,p,l,f.readTime)?this.Yi(e,nd(n,null,"F")):this.rs(e,p,n,f)}))})))}Zi(e,n,r,i){return u0(n)||i.isEqual(ve.min())?Y.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const l=this.ts(n,o);return this.ns(n,l,r,i)?Y.resolve(null):(xl()<=Se.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Io(n)),this.rs(e,l,n,$C(i,-1)).next(h=>h))})}ts(e,n){let r=new jt(R1(e));return n.forEach((i,o)=>{Kd(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return xl()<=Se.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Io(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new rt(je),this._s=new Na(o=>ev(o),tv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gR(t,e,n,r){return new mR(t,e,n,r)}async function eE(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let f=Ie();for(const p of i){l.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of o){h.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:h}))})})}function vR(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,f,p,v){const y=p.batch,w=y.keys();let E=Y.resolve();return w.forEach(j=>{E=E.next(()=>v.getEntry(f,j)).next(S=>{const M=p.docVersions.get(j);Ve(M!==null),S.version.compareTo(M)<0&&(y.applyToRemoteDocument(S,p),S.isValidDocument()&&(S.setReadTime(p.commitVersion),v.addEntry(S)))})}),E.next(()=>h.mutationQueue.removeMutationBatch(f,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Ie();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tE(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _R(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const h=[];e.targetChanges.forEach((v,y)=>{const w=i.get(y);if(!w)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,y)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(Dt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):v.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(v.resumeToken,r)),i=i.insert(y,E),function(S,M,C){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(w,E,v)&&h.push(n.Ur.updateTargetData(o,E))});let f=Qr(),p=Ie();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(yR(o,l,e.documentUpdates).next(v=>{f=v.Ps,p=v.Is})),!r.isEqual(ve.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(v)}return Y.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,p)).next(()=>f)}).then(o=>(n.os=i,o))}function yR(t,e,n){let r=Ie(),i=Ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Qr();return n.forEach((h,f)=>{const p=o.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(ve.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):se("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Ps:l,Is:i}})}function xR(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wR(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,Y.resolve(i)):n.Ur.allocateTargetId(r).next(l=>(i=new Ni(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Sm(t,e,n){const r=_e(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Ou(l))throw l;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function x0(t,e,n){const r=_e(t);let i=ve.min(),o=Ie();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,p,v){const y=_e(f),w=y._s.get(v);return w!==void 0?Y.resolve(y.os.get(w)):y.Ur.getTargetData(p,v)}(r,l,dr(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,h.targetId).next(f=>{o=f})}).next(()=>r.ss.getDocumentsMatchingQuery(l,e,n?i:ve.min(),n?o:Ie())).next(h=>(bR(r,dA(e),h),{documents:h,Ts:o})))}function bR(t,e,n){let r=t.us.get(e)||ve.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class w0{constructor(){this.activeTargetIds=_A()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ER{constructor(){this.so=new w0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new w0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function ip(){return Xc===null?Xc=function(){return 268435456+Math.round(2147483648*Math.random())}():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class IR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,l){const h=ip(),f=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${h}:`,f,i);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(n,f,p,i).then(v=>(se("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw ua("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",f,"request:",i),v})}Lo(n,r,i,o,l,h){return this.Mo(n,r,i,o,l)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ta}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>n[l]=o),i&&i.headers.forEach((o,l)=>n[l]=o)}xo(n,r){const i=kR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=ip();return new Promise((l,h)=>{const f=new p1;f.setWithCredentials(!0),f.listenOnce(m1.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case vh.NO_ERROR:const v=f.getResponseJson();se(Vt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case vh.TIMEOUT:se(Vt,`RPC '${e}' ${o} timed out`),h(new re(K.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const y=f.getStatus();if(se(Vt,`RPC '${e}' ${o} failed with status:`,y,"response text:",f.getResponseText()),y>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w==null?void 0:w.error;if(E&&E.status&&E.message){const j=function(M){const C=M.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(C)>=0?C:K.UNKNOWN}(E.status);h(new re(j,E.message))}else h(new re(K.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new re(K.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{se(Vt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);se(Vt,`RPC '${e}' ${o} sending request:`,i),f.send(n,"POST",p,r,15)})}Bo(e,n,r){const i=ip(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=_1(),h=v1(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=o.join("");se(Vt,`Creating RPC '${e}' stream ${i}: ${v}`,f);const y=l.createWebChannel(v,f);let w=!1,E=!1;const j=new NR({Io:M=>{E?se(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(w||(se(Vt,`Opening RPC '${e}' stream ${i} transport.`),y.open(),w=!0),se(Vt,`RPC '${e}' stream ${i} sending:`,M),y.send(M))},To:()=>y.close()}),S=(M,C,N)=>{M.listen(C,R=>{try{N(R)}catch(U){setTimeout(()=>{throw U},0)}})};return S(y,Il.EventType.OPEN,()=>{E||(se(Vt,`RPC '${e}' stream ${i} transport opened.`),j.yo())}),S(y,Il.EventType.CLOSE,()=>{E||(E=!0,se(Vt,`RPC '${e}' stream ${i} transport closed`),j.So())}),S(y,Il.EventType.ERROR,M=>{E||(E=!0,ua(Vt,`RPC '${e}' stream ${i} transport errored:`,M),j.So(new re(K.UNAVAILABLE,"The operation could not be completed")))}),S(y,Il.EventType.MESSAGE,M=>{var C;if(!E){const N=M.data[0];Ve(!!N);const R=N,U=R.error||((C=R[0])===null||C===void 0?void 0:C.error);if(U){se(Vt,`RPC '${e}' stream ${i} received error:`,U);const q=U.status;let G=function(A){const P=ft[A];if(P!==void 0)return W1(P)}(q),k=U.message;G===void 0&&(G=K.INTERNAL,k="Unknown error status: "+q+" with message "+U.message),E=!0,j.So(new re(G,k)),y.close()}else se(Vt,`RPC '${e}' stream ${i} received:`,N),j.bo(N)}}),S(h,g1.STAT_EVENT,M=>{M.stat===_m.PROXY?se(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===_m.NOPROXY&&se(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.wo()},0),j}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){return new MA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,r,i,o,l,h,f){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SR extends rE{constructor(e,n,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=FA(this.serializer,e),r=function(o){if(!("targetChange"in o))return ve.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ve.min():l.readTime?fr(l.readTime):ve.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Im(this.serializer),n.addTarget=function(o,l){let h;const f=l.target;if(h=bm(f)?{documents:$A(o,f)}:{query:WA(o,f)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=G1(o,l.resumeToken);const p=Tm(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ve.min())>0){h.readTime=id(o,l.snapshotVersion.toTimestamp());const p=Tm(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=qA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Im(this.serializer),n.removeTarget=e,this.a_(n)}}class PR extends rE{constructor(e,n,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BA(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Im(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>UA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,km(n,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(K.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,km(n,r),i,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(K.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class AR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kr(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{r.enqueueAndForget(async()=>{Gs(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(f){const p=_e(f);p.L_.add(4),await zu(p),p.q_.set("Unknown"),p.L_.delete(4),await tf(p)}(this))})}),this.q_=new AR(r,i)}}async function tf(t){if(Gs(t))for(const e of t.B_)await e(!0)}async function zu(t){for(const e of t.B_)await e(!1)}function iE(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),dv(n)?hv(n):Ia(n).r_()&&cv(n,e))}function uv(t,e){const n=_e(t),r=Ia(n);n.N_.delete(e),r.r_()&&sE(n,e),n.N_.size===0&&(r.r_()?r.o_():Gs(n)&&n.q_.set("Unknown"))}function cv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).A_(e)}function sE(t,e){t.Q_.xe(e),Ia(t).R_(e)}function hv(t){t.Q_=new jA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.q_.v_()}function dv(t){return Gs(t)&&!Ia(t).n_()&&t.N_.size>0}function Gs(t){return _e(t).L_.size===0}function oE(t){t.Q_=void 0}async function jR(t){t.q_.set("Online")}async function LR(t){t.N_.forEach((e,n)=>{cv(t,e)})}async function DR(t,e){oE(t),dv(t)?(t.q_.M_(e),hv(t)):t.q_.set("Unknown")}async function OR(t,e,n){if(t.q_.set("Online"),e instanceof q1&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const h of o.targetIds)i.N_.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.N_.delete(h),i.Q_.removeTarget(h))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sd(t,r)}else if(e instanceof xh?t.Q_.Ke(e):e instanceof H1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ve.min()))try{const r=await tE(t.localStore);n.compareTo(r)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=o.N_.get(p);v&&o.N_.set(p,v.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,p)=>{const v=o.N_.get(f);if(!v)return;o.N_.set(f,v.withResumeToken(Dt.EMPTY_BYTE_STRING,v.snapshotVersion)),sE(o,f);const y=new Ni(v.target,f,p,v.sequenceNumber);cv(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await sd(t,r)}}async function sd(t,e,n){if(!Ou(e))throw e;t.L_.add(1),await zu(t),t.q_.set("Offline"),n||(n=()=>tE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await tf(t)})}function aE(t,e){return e().catch(n=>sd(t,n,e))}async function nf(t){const e=_e(t),n=Gi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MR(e);)try{const i=await xR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,VR(e,i)}catch(i){await sd(e,i)}lE(e)&&uE(e)}function MR(t){return Gs(t)&&t.O_.length<10}function VR(t,e){t.O_.push(e);const n=Gi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lE(t){return Gs(t)&&!Gi(t).n_()&&t.O_.length>0}function uE(t){Gi(t).start()}async function zR(t){Gi(t).p_()}async function FR(t){const e=Gi(t);for(const n of t.O_)e.m_(n.mutations)}async function UR(t,e,n){const r=t.O_.shift(),i=rv.from(r,e,n);await aE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nf(t)}async function BR(t,e){e&&Gi(t).V_&&await async function(r,i){if(function(l){return CA(l)&&l!==K.ABORTED}(i.code)){const o=r.O_.shift();Gi(r).s_(),await aE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await nf(r)}}(t,e),lE(t)&&uE(t)}async function E0(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=Gs(n);n.L_.add(3),await zu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await tf(n)}async function $R(t,e){const n=_e(t);e?(n.L_.delete(2),await tf(n)):e||(n.L_.add(2),await zu(n),n.q_.set("Unknown"))}function Ia(t){return t.K_||(t.K_=function(n,r,i){const o=_e(n);return o.w_(),new SR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:jR.bind(null,t),Ro:LR.bind(null,t),mo:DR.bind(null,t),d_:OR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),dv(t)?hv(t):t.q_.set("Unknown")):(await t.K_.stop(),oE(t))})),t.K_}function Gi(t){return t.U_||(t.U_=function(n,r,i){const o=_e(n);return o.w_(),new PR(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zR.bind(null,t),mo:BR.bind(null,t),f_:FR.bind(null,t),g_:UR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nf(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const l=Date.now()+r,h=new fv(e,n,l,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pv(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),Ou(t))return new re(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Sl(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new Qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.W_=new rt(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):me():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ma{constructor(e,n,r,i,o,l,h,f,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ma(e,n,Qo.emptySet(n),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HR{constructor(){this.queries=k0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=_e(n),o=i.queries;i.queries=k0(),o.forEach((l,h)=>{for(const f of h.j_)f.onError(r)})})(this,new re(K.ABORTED,"Firestore shutting down"))}}function k0(){return new Na(t=>A1(t),Zd)}async function mv(t,e){const n=_e(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new WR,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const h=pv(l,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&vv(n)}async function gv(t,e){const n=_e(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qR(t,e){const n=_e(t);let r=!1;for(const i of e){const o=i.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(i)&&(r=!0);l.z_=i}}r&&vv(n)}function GR(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function vv(t){t.Y_.forEach(e=>{e.next()})}var Pm,N0;(N0=Pm||(Pm={})).ea="default",N0.Cache="cache";class _v{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.key=e}}class hE{constructor(e){this.key=e}}class ZR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=R1(e),this.Ra=new Qo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new T0,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,y)=>{const w=i.get(v),E=Kd(this.query,y)?y:null,j=!!w&&this.mutatedKeys.has(w.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let M=!1;w&&E?w.data.isEqual(E.data)?j!==S&&(r.track({type:3,doc:E}),M=!0):this.ga(w,E)||(r.track({type:2,doc:E}),M=!0,(f&&this.Aa(E,f)>0||p&&this.Aa(E,p)<0)&&(h=!0)):!w&&E?(r.track({type:0,doc:E}),M=!0):w&&!E&&(r.track({type:1,doc:w}),M=!0,(f||p)&&(h=!0)),M&&(E?(l=l.add(E),o=S?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),r.track({type:1,doc:v})}return{Ra:l,fa:r,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,y)=>function(E,j){const S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return S(E)-S(j)}(v.type,y.type)||this.Aa(v.doc,y.doc)),this.pa(r),i=i!=null&&i;const h=n&&!i?this.ya():[],f=this.da.size===0&&this.current&&!i?1:0,p=f!==this.Ea;return this.Ea=f,l.length!==0||p?{snapshot:new ma(this.query,e.Ra,o,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new T0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new hE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cE(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ma.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QR{constructor(e){this.key=e,this.va=!1}}class YR{constructor(e,n,r,i,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Na(h=>A1(h),Zd),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(ae.comparator),this.Na=new Map,this.La=new ov,this.Ba={},this.ka=new Map,this.qa=pa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JR(t,e,n=!0){const r=vE(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await dE(r,e,n,!0),i}async function XR(t,e){const n=vE(t);await dE(n,e,!0,!1)}async function dE(t,e,n,r){const i=await wR(t.localStore,dr(e)),o=i.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await ej(t,e,o,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&iE(t.remoteStore,i),h}async function ej(t,e,n,r,i){t.Ka=(y,w,E)=>async function(S,M,C,N){let R=M.view.ma(C);R.ns&&(R=await x0(S.localStore,M.query,!1).then(({documents:k})=>M.view.ma(k,R)));const U=N&&N.targetChanges.get(M.targetId),q=N&&N.targetMismatches.get(M.targetId)!=null,G=M.view.applyChanges(R,S.isPrimaryClient,U,q);return S0(S,M.targetId,G.wa),G.snapshot}(t,y,w,E);const o=await x0(t.localStore,e,!0),l=new ZR(e,o.Ts),h=l.ma(o.documents),f=Vu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(h,t.isPrimaryClient,f);S0(t,n,p.wa);const v=new KR(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function tj(t,e,n){const r=_e(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(l=>!Zd(l,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uv(r.remoteStore,i.targetId),Cm(r,i.targetId)}).catch(Du)):(Cm(r,i.targetId),await Sm(r.localStore,i.targetId,!0))}async function nj(t,e){const n=_e(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uv(n.remoteStore,r.targetId))}async function rj(t,e,n){const r=cj(t);try{const i=await function(l,h){const f=_e(l),p=xt.now(),v=h.reduce((E,j)=>E.add(j.key),Ie());let y,w;return f.persistence.runTransaction("Locally write mutations","readwrite",E=>{let j=Qr(),S=Ie();return f.cs.getEntries(E,v).next(M=>{j=M,j.forEach((C,N)=>{N.isValidDocument()||(S=S.add(C))})}).next(()=>f.localDocuments.getOverlayedDocuments(E,j)).next(M=>{y=M;const C=[];for(const N of h){const R=kA(N,y.get(N.key).overlayedDocument);R!=null&&C.push(new Xi(N.key,R,E1(R.value.mapValue),Qt.exists(!0)))}return f.mutationQueue.addMutationBatch(E,p,C,h)}).next(M=>{w=M;const C=M.applyToLocalDocumentSet(y,S);return f.documentOverlayCache.saveOverlays(E,M.batchId,C)})}).then(()=>({batchId:w.batchId,changes:L1(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,h,f){let p=l.Ba[l.currentUser.toKey()];p||(p=new rt(je)),p=p.insert(h,f),l.Ba[l.currentUser.toKey()]=p}(r,i.batchId,n),await Fu(r,i.changes),await nf(r.remoteStore)}catch(i){const o=pv(i,"Failed to persist write");n.reject(o)}}async function fE(t,e){const n=_e(t);try{const r=await _R(n.localStore,e);e.targetChanges.forEach((i,o)=>{const l=n.Na.get(o);l&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?Ve(l.va):i.removedDocuments.size>0&&(Ve(l.va),l.va=!1))}),await Fu(n,r,e)}catch(r){await Du(r)}}function I0(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&i.push(h.snapshot)}),function(l,h){const f=_e(l);f.onlineState=h;let p=!1;f.queries.forEach((v,y)=>{for(const w of y.j_)w.Z_(h)&&(p=!0)}),p&&vv(f)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ij(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let l=new rt(ae.comparator);l=l.insert(o,Ut.newNoDocument(o,ve.min()));const h=Ie().add(o),f=new Xd(ve.min(),new Map,new rt(je),l,h);await fE(r,f),r.Oa=r.Oa.remove(o),r.Na.delete(e),yv(r)}else await Sm(r.localStore,e,!1).then(()=>Cm(r,e,n)).catch(Du)}async function sj(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await vR(n.localStore,e);mE(n,r,null),pE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fu(n,i)}catch(i){await Du(i)}}async function oj(t,e,n){const r=_e(t);try{const i=await function(l,h){const f=_e(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return f.mutationQueue.lookupMutationBatch(p,h).next(y=>(Ve(y!==null),v=y.keys(),f.mutationQueue.removeMutationBatch(p,y))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>f.localDocuments.getDocuments(p,v))})}(r.localStore,e);mE(r,e,n),pE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fu(r,i)}catch(i){await Du(i)}}function pE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function mE(t,e,n){const r=_e(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Cm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||gE(t,r)})}function gE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(uv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),yv(t))}function S0(t,e,n){for(const r of n)r instanceof cE?(t.La.addReference(r.key,e),aj(t,r)):r instanceof hE?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||gE(t,r.key)):me()}function aj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),yv(t))}function yv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(qe.fromString(e)),r=t.qa.next();t.Na.set(r,new QR(n)),t.Oa=t.Oa.insert(n,r),iE(t.remoteStore,new Ni(dr(Gd(n.path)),r,"TargetPurposeLimboResolution",Qg.oe))}}async function Fu(t,e,n){const r=_e(t),i=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach((h,f)=>{l.push(r.Ka(f,e,n).then(p=>{var v;if((p||n)&&r.isPrimaryClient){const y=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(p){i.push(p);const y=lv.Wi(f.targetId,p);o.push(y)}}))}),await Promise.all(l),r.Ca.d_(i),await async function(f,p){const v=_e(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(p,w=>Y.forEach(w.$i,E=>v.persistence.referenceDelegate.addReference(y,w.targetId,E)).next(()=>Y.forEach(w.Ui,E=>v.persistence.referenceDelegate.removeReference(y,w.targetId,E)))))}catch(y){if(!Ou(y))throw y;se("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const w=y.targetId;if(!y.fromCache){const E=v.os.get(w),j=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(j);v.os=v.os.insert(w,S)}}}(r.localStore,o))}async function lj(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await eE(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(f=>{f.reject(new re(K.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fu(n,r.hs)}}function uj(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let i=Ie();const o=n.Ma.get(e);if(!o)return i;for(const l of o){const h=n.Fa.get(l);i=i.unionWith(h.view.Va)}return i}}function vE(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ij.bind(null,e),e.Ca.d_=qR.bind(null,e.eventManager),e.Ca.$a=GR.bind(null,e.eventManager),e}function cj(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oj.bind(null,e),e}class od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ef(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return gR(this.persistence,new pR,e.initialUser,this.serializer)}Ga(e){return new hR(av.Zr,this.serializer)}Wa(e){return new ER}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}od.provider={build:()=>new od};class Am{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lj.bind(null,this.syncEngine),await $R(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HR}()}createDatastore(e){const n=ef(e.databaseInfo.databaseId),r=function(o){return new IR(o)}(e.databaseInfo);return function(o,l,h,f){return new CR(o,l,h,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,l,h){return new RR(r,i,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>I0(this.syncEngine,n,0),function(){return b0.D()?new b0:new TR}())}createSyncEngine(e,n){return function(i,o,l,h,f,p,v){const y=new YR(i,o,l,h,f,p);return v&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=_e(i);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await zu(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Am.provider={build:()=>new Am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zt.UNAUTHENTICATED,this.clientId=x1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{se("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(se("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function op(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function P0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dj(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>E0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>E0(e.remoteStore,i)),t._onlineComponents=e}async function dj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await op(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ua("Error using user provided cache. Falling back to memory cache: "+n),await op(t,new od)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await op(t,new od);return t._offlineComponents}async function _E(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await P0(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await P0(t,new Am))),t._onlineComponents}function fj(t){return _E(t).then(e=>e.syncEngine)}async function ad(t){const e=await _E(t),n=e.eventManager;return n.onListen=JR.bind(null,e.syncEngine),n.onUnlisten=tj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nj.bind(null,e.syncEngine),n}function pj(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,f,p){const v=new xv({next:w=>{v.Za(),l.enqueueAndForget(()=>gv(o,y));const E=w.docs.has(h);!E&&w.fromCache?p.reject(new re(K.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&f&&f.source==="server"?p.reject(new re(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),y=new _v(Gd(h.path),v,{includeMetadataChanges:!0,_a:!0});return mv(o,y)}(await ad(t),t.asyncQueue,e,n,r)),r.promise}function mj(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,f,p){const v=new xv({next:w=>{v.Za(),l.enqueueAndForget(()=>gv(o,y)),w.fromCache&&f.source==="server"?p.reject(new re(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),y=new _v(h,v,{includeMetadataChanges:!0,_a:!0});return mv(o,y)}(await ad(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e,n){if(!n)throw new re(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gj(t,e,n,r){if(e===!0&&r===!0)throw new re(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function A0(t){if(!ae.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R0(t){if(ae.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me()}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(t);throw new re(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LC;switch(r.type){case"firstParty":return new VC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=C0.get(n);r&&(se("ComponentProvider","Removing Datastore"),C0.delete(n),r.terminate())}(this),Promise.resolve()}}function vj(t,e,n,r={}){var i;const o=(t=Yt(t,sf))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=zt.MOCK_USER;else{h=cP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new re(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new zt(p)}t._authCredentials=new DC(new y1(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class Vi extends ei{constructor(e,n,r){super(e,n,Gd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new ae(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function zi(t,e,...n){if(t=ot(t),xE("collection","path",e),t instanceof sf){const r=qe.fromString(e,...n);return R0(r),new Vi(t,null,r)}{if(!(t instanceof Bt||t instanceof Vi))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return R0(r),new Vi(t.firestore,null,r)}}function et(t,e,...n){if(t=ot(t),arguments.length===1&&(e=x1.newId()),xE("doc","path",e),t instanceof sf){const r=qe.fromString(e,...n);return A0(r),new Bt(t,null,new ae(r))}{if(!(t instanceof Bt||t instanceof Vi))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return A0(r),new Bt(t.firestore,t instanceof Vi?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nE(this,"async_queue_retry"),this.Vu=()=>{const r=sp();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ur;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ou(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(r);throw Kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=fv.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&me()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function D0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class vr extends sf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new L0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L0(e),this._firestoreClient=void 0,await e}}}function _j(t,e){const n=typeof t=="object"?t:c1(),r=typeof t=="string"?t:"(default)",i=Zg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=lP("firestore");o&&vj(i,...o)}return i}function Uu(t){if(t._terminated)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yj(t),t._firestoreClient}function yj(t){var e,n,r;const i=t._freezeSettings(),o=function(h,f,p,v){return new YC(h,f,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,yE(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new hj(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga(Dt.fromBase64String(e))}catch(n){throw new re(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ga(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=/^__.*__$/;class wj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mu(e,this.data,n,this.fieldTransforms)}}class wE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class of{constructor(e,n,r,i,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ld(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bE(this.Cu)&&xj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ef(e)}Qu(e,n,r,i=!1){return new of({Cu:e,methodName:n,qu:r,path:Ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wu(t){const e=t._freezeSettings(),n=ef(t._databaseId);return new bj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ev(t,e,n,r,i,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);Nv("Data must be an object, but it was:",l,r);const h=kE(r,l);let f,p;if(o.merge)f=new vn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const y of o.mergeFields){const w=Rm(e,y,n);if(!l.contains(w))throw new re(K.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);IE(v,w)||v.push(w)}f=new vn(v),p=l.fieldTransforms.filter(y=>f.covers(y.field))}else f=null,p=l.fieldTransforms;return new wj(new sn(h),f,p)}class af extends $u{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof af}}function Ej(t,e,n){return new of({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tv extends $u{_toFieldTransform(e){return new U1(e.path,new wu)}isEqual(e){return e instanceof Tv}}class kv extends $u{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Ej(this,e,!0),r=this.Ku.map(o=>Sa(o,n)),i=new fa(r);return new U1(e.path,i)}isEqual(e){return e instanceof kv&&pu(this.Ku,e.Ku)}}function EE(t,e,n,r){const i=t.Qu(1,e,n);Nv("Data must be an object, but it was:",i,r);const o=[],l=sn.empty();qs(r,(f,p)=>{const v=Iv(e,f,n);p=ot(p);const y=i.Nu(v);if(p instanceof af)o.push(v);else{const w=Sa(p,y);w!=null&&(o.push(v),l.set(v,w))}});const h=new vn(o);return new wE(l,h,i.fieldTransforms)}function TE(t,e,n,r,i,o){const l=t.Qu(1,e,n),h=[Rm(e,r,n)],f=[i];if(o.length%2!=0)throw new re(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)h.push(Rm(e,o[w])),f.push(o[w+1]);const p=[],v=sn.empty();for(let w=h.length-1;w>=0;--w)if(!IE(p,h[w])){const E=h[w];let j=f[w];j=ot(j);const S=l.Nu(E);if(j instanceof af)p.push(E);else{const M=Sa(j,S);M!=null&&(p.push(E),v.set(E,M))}}const y=new vn(p);return new wE(v,y,l.fieldTransforms)}function Tj(t,e,n,r=!1){return Sa(n,t.Qu(r?4:3,e))}function Sa(t,e){if(NE(t=ot(t)))return Nv("Unsupported field value:",e,t),kE(t,e);if(t instanceof $u)return function(r,i){if(!bE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const h of r){let f=Sa(h,i.Lu(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=xt.fromDate(r);return{timestampValue:id(i.serializer,o)}}if(r instanceof xt){const o=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:id(i.serializer,o)}}if(r instanceof wv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ga)return{bytesValue:G1(i.serializer,r._byteString)};if(r instanceof Bt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bv)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return nv(h.serializer,f)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rf(r)}`)}(t,e)}function kE(t,e){const n={};return w1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(t,(r,i)=>{const o=Sa(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function NE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof wv||t instanceof ga||t instanceof Bt||t instanceof $u||t instanceof bv)}function Nv(t,e,n){if(!NE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=rf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Rm(t,e,n){if((e=ot(e))instanceof Bu)return e._internalPath;if(typeof e=="string")return Iv(t,e);throw ld("Field path arguments must be of type string or ",t,!1,void 0,n)}const kj=new RegExp("[~\\*/\\[\\]]");function Iv(t,e,n){if(e.search(kj)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bu(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ld(t,e,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new re(K.INVALID_ARGUMENT,h+t+f)}function IE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Nj extends SE{data(){return super.data()}}function lf(t,e){return typeof e=="string"?Iv(t,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sv{}class Pv extends Sv{}function Eu(t,e,...n){let r=[];e instanceof Sv&&r.push(e),r=r.concat(n),function(o){const l=o.filter(f=>f instanceof Cv).length,h=o.filter(f=>f instanceof uf).length;if(l>1||l>0&&h>0)throw new re(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class uf extends Pv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uf(e,n,r)}_apply(e){const n=this._parse(e);return AE(e._query,n),new ei(e.firestore,e.converter,Em(e._query,n))}_parse(e){const n=Wu(e.firestore);return function(o,l,h,f,p,v,y){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new re(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){M0(y,v);const E=[];for(const j of y)E.push(O0(f,o,j));w={arrayValue:{values:E}}}else w=O0(f,o,y)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||M0(y,v),w=Tj(h,l,y,v==="in"||v==="not-in");return mt.create(p,v,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jm(t,e,n){const r=e,i=lf("where",t);return uf._create(i,r,n)}class Cv extends Sv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let l=i;const h=o.getFlattenedFilters();for(const f of h)AE(l,f),l=Em(l,f)}(e._query,n),new ei(e.firestore,e.converter,Em(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Av extends Pv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Av(e,n)}_apply(e){const n=function(i,o,l){if(i.startAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(o,l)}(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new ka(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function CE(t,e="asc"){const n=e,r=lf("orderBy",t);return Av._create(r,n)}class Rv extends Pv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rv(e,n,r)}_apply(e){return new ei(e.firestore,e.converter,nd(e._query,this._limit,this._limitType))}}function Ij(t){return Rv._create("limit",t,"F")}function O0(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new re(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C1(e)&&n.indexOf("/")!==-1)throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!ae.isDocumentKey(r))throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return r0(t,new ae(r))}if(n instanceof Bt)return r0(t,n._key);throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function M0(t,e){if(!Array.isArray(t)||t.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AE(t,e){const n=function(i,o){for(const l of i)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sj{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qs(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>lt(l.doubleValue));return new bv(o)}convertGeoPoint(e){return new wv(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const n=qi(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Ve(X1(r));const i=new _u(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(n)||Kr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RE extends SE{constructor(e,n,r,i,o,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wh extends RE{data(e={}){return super.data(e)}}class jE{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wh(this._firestore,this._userDataWriter,r.key,r,new Cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(h=>{const f=new wh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Cl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new wh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Cl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,v=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:Pj(h.type),doc:f,oldIndex:p,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Pj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){t=Yt(t,Bt);const e=Yt(t.firestore,vr);return pj(Uu(e),t._key).then(n=>DE(e,t,n))}class Lv extends Sj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function Lm(t){t=Yt(t,ei);const e=Yt(t.firestore,vr),n=Uu(e),r=new Lv(e);return PE(t._query),mj(n,t._query).then(i=>new jE(e,r,t,i))}function Dv(t,e,n){t=Yt(t,Bt);const r=Yt(t.firestore,vr),i=jv(t.converter,e,n);return Hu(r,[Ev(Wu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Qt.none())])}function jn(t,e,n,...r){t=Yt(t,Bt);const i=Yt(t.firestore,vr),o=Wu(i);let l;return l=typeof(e=ot(e))=="string"||e instanceof Bu?TE(o,"updateDoc",t._key,e,n,r):EE(o,"updateDoc",t._key,e),Hu(i,[l.toMutation(t._key,Qt.exists(!0))])}function Cj(t){return Hu(Yt(t.firestore,vr),[new Jd(t._key,Qt.none())])}function Dm(t,e){const n=Yt(t.firestore,vr),r=et(t),i=jv(t.converter,e);return Hu(n,[Ev(Wu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function ud(t,...e){var n,r,i;t=ot(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||D0(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(D0(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[l+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let f,p,v;if(t instanceof Bt)p=Yt(t.firestore,vr),v=Gd(t._key.path),f={next:y=>{e[l]&&e[l](DE(p,t,y))},error:e[l+1],complete:e[l+2]};else{const y=Yt(t,ei);p=Yt(y.firestore,vr),v=y._query;const w=new Lv(p);f={next:E=>{e[l]&&e[l](new jE(p,w,y,E))},error:e[l+1],complete:e[l+2]},PE(t._query)}return function(w,E,j,S){const M=new xv(S),C=new _v(E,M,j);return w.asyncQueue.enqueueAndForget(async()=>mv(await ad(w),C)),()=>{M.Za(),w.asyncQueue.enqueueAndForget(async()=>gv(await ad(w),C))}}(Uu(p),v,h,f)}function Hu(t,e){return function(r,i){const o=new Ur;return r.asyncQueue.enqueueAndForget(async()=>rj(await fj(r),i,o)),o.promise}(Uu(t),e)}function DE(t,e,n){const r=n.docs.get(e._key),i=new Lv(t);return new RE(t,i,e._key,r,new Cl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wu(e)}set(e,n,r){this._verifyNotCommitted();const i=ap(e,this._firestore),o=jv(i.converter,n,r),l=Ev(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,Qt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=ap(e,this._firestore);let l;return l=typeof(n=ot(n))=="string"||n instanceof Bu?TE(this._dataReader,"WriteBatch.update",o._key,n,r,i):EE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Qt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ap(e,this._firestore);return this._mutations=this._mutations.concat(new Jd(n._key,Qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ap(t,e){if((t=ot(t)).firestore!==e)throw new re(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Tu(){return new Tv("serverTimestamp")}function Rj(...t){return new kv("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){return Uu(t=Yt(t,vr)),new Aj(t,e=>Hu(t,e))}(function(e,n=!0){(function(i){Ta=i})(Ea),la(new Os("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),h=new vr(new OC(r.getProvider("auth-internal")),new FC(r.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new re(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(p.options.projectId,v)}(l,i),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Mi(Jy,"4.7.3",e),Mi(Jy,"4.7.3","esm2017")})();var Lj="firebase",Dj="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(Lj,Dj,"app");function Ov(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oj=OE,ME=new ju("auth","Firebase",OE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new qg("@firebase/auth");function Mj(t,...e){cd.logLevel<=Se.WARN&&cd.warn(`Auth (${Ea}): ${t}`,...e)}function bh(t,...e){cd.logLevel<=Se.ERROR&&cd.error(`Auth (${Ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw Vv(t,...e)}function Yn(t,...e){return Vv(t,...e)}function Mv(t,e,n){const r=Object.assign(Object.assign({},Oj()),{[e]:n});return new ju("auth","Firebase",r).create(e,{appName:t.name})}function Br(t){return Mv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vj(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mn(t,"argument-error"),Mv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ME.create(t,...e)}function de(t,e,...n){if(!t)throw Vv(e,...n)}function Mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function Yr(t,e){t||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zj(){return V0()==="http:"||V0()==="https:"}function V0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zj()||pP()||"connection"in navigator)?navigator.onLine:!0}function Uj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=hP()||mP()}get(){return Fj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=new qu(3e4,6e4);function es(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ti(t,e,n,r,i={}){return zE(t,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const h=Lu(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},o);return fP()||(p.referrerPolicy="no-referrer"),VE.fetch()(FE(t,t.config.apiHost,n,h),p)})}async function zE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Bj),e);try{const i=new Hj(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw eh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw eh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw eh(t,"user-disabled",l);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Mv(t,v,p);Mn(t,v)}}catch(i){if(i instanceof Xr)throw i;Mn(t,"network-request-failed",{message:String(i)})}}async function Gu(t,e,n,r,i={}){const o=await ti(t,e,n,r,i);return"mfaPendingCredential"in o&&Mn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function FE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?zv(t.config,i):`${t.config.apiScheme}://${i}`}function Wj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),$j.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function eh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yn(t,e,r);return i.customData._tokenResponse=n,i}function z0(t){return t!==void 0&&t.enterprise!==void 0}class qj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Wj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Gj(t,e){return ti(t,"GET","/v2/recaptchaConfig",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(t,e){return ti(t,"POST","/v1/accounts:delete",e)}async function UE(t,e){return ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kj(t,e=!1){const n=ot(t),r=await n.getIdToken(e),i=Fv(r);de(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Wl(lp(i.auth_time)),issuedAtTime:Wl(lp(i.iat)),expirationTime:Wl(lp(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function lp(t){return Number(t)*1e3}function Fv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const i=r1(n);return i?JSON.parse(i):(bh("Failed to decode base64 JWT payload"),null)}catch(i){return bh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function F0(t){const e=Fv(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xr&&Qj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Qj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await va(t,UE(n,{idToken:r}));de(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BE(o.providerUserInfo):[],h=Xj(t.providerData,l),f=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=f?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Mm(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,y)}async function Jj(t){const e=ot(t);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BE(t){return t.map(e=>{var{providerId:n}=e,r=Ov(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e){const n=await zE(t,{},async()=>{const r=Lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,l=FE(t,i,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",VE.fetch()(l,{method:"POST",headers:h,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tL(t,e){return ti(t,"POST","/v2/accounts:revokeToken",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=F0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await eL(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,l=new Yo;return r&&(de(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(de(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ov(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await va(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Kj(this,e)}reload(){return Jj(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await va(this,Zj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,l,h,f,p,v;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,j=(l=n.photoURL)!==null&&l!==void 0?l:void 0,S=(h=n.tenantId)!==null&&h!==void 0?h:void 0,M=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,C=(p=n.createdAt)!==null&&p!==void 0?p:void 0,N=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:R,emailVerified:U,isAnonymous:q,providerData:G,stsTokenManager:k}=n;de(R&&k,e,"internal-error");const T=Yo.fromJSON(this.name,k);de(typeof R=="string",e,"internal-error"),mi(y,e.name),mi(w,e.name),de(typeof U=="boolean",e,"internal-error"),de(typeof q=="boolean",e,"internal-error"),mi(E,e.name),mi(j,e.name),mi(S,e.name),mi(M,e.name),mi(C,e.name),mi(N,e.name);const A=new Vr({uid:R,auth:e,email:w,emailVerified:U,displayName:y,isAnonymous:q,photoURL:j,phoneNumber:E,tenantId:S,stsTokenManager:T,createdAt:C,lastLoginAt:N});return G&&Array.isArray(G)&&(A.providerData=G.map(P=>Object.assign({},P))),M&&(A._redirectEventId=M),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Yo;i.updateFromServerResponse(n);const o=new Vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hd(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];de(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?BE(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),h=new Yo;h.updateFromIdToken(r);const f=new Vr({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Map;function zr(t){Yr(t instanceof Function,"Expected a class definition");let e=U0.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$E.type="NONE";const B0=$E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t,e,n){return`firebase:${t}:${e}:${n}`}class Jo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Eh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Eh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Jo(zr(B0),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||zr(B0);const l=Eh(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const v=await p._get(l);if(v){const y=Vr._fromJSON(e,v);p!==o&&(h=y),o=p;break}}catch{}const f=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Jo(o,e,r):(o=f[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Jo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KE(e))return"Blackberry";if(QE(e))return"Webos";if(HE(e))return"Safari";if((e.includes("chrome/")||qE(e))&&!e.includes("edge/"))return"Chrome";if(ZE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WE(t=Wt()){return/firefox\//i.test(t)}function HE(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qE(t=Wt()){return/crios\//i.test(t)}function GE(t=Wt()){return/iemobile/i.test(t)}function ZE(t=Wt()){return/android/i.test(t)}function KE(t=Wt()){return/blackberry/i.test(t)}function QE(t=Wt()){return/webos/i.test(t)}function Uv(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nL(t=Wt()){var e;return Uv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rL(){return gP()&&document.documentMode===10}function YE(t=Wt()){return Uv(t)||ZE(t)||QE(t)||KE(t)||/windows phone/i.test(t)||GE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t,e=[]){let n;switch(t){case"Browser":n=$0(Wt());break;case"Worker":n=`${$0(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,h)=>{try{const f=e(o);l(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e={}){return ti(t,"GET","/v2/passwordPolicy",es(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=6;class aL{constructor(e){var n,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:oL,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,l,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W0(this),this.idTokenSubscription=new W0(this),this.beforeStateQueue=new iL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ME,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await UE(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&(f!=null&&f.user)&&(i=f.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Br(this));const n=e?ot(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sL(this),n=new aL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zr(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Mj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ts(t){return ot(t)}class W0{constructor(e){this.auth=e,this.observer=null,this.addObserver=TP(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uL(t){cf=t}function XE(t){return cf.loadJS(t)}function cL(){return cf.recaptchaEnterpriseScript}function hL(){return cf.gapiScript}function dL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const fL="recaptcha-enterprise",pL="NO_RECAPTCHA";class mL{constructor(e){this.type=fL,this.auth=ts(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{Gj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new qj(f);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(f=>{h(f)})})}function i(o,l,h){const f=window.grecaptcha;z0(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(pL)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(h=>{if(!n&&z0(window.grecaptcha))i(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=cL();f.length!==0&&(f+=h),XE(f).then(()=>{i(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function H0(t,e,n,r=!1){const i=new mL(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Vm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await H0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await H0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e){const n=Zg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(pu(o,e??{}))return i;Mn(i,"already-initialized")}return n.initialize({options:e})}function vL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _L(t,e,n){const r=ts(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=eT(e),{host:l,port:h}=yL(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${o}//${l}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),xL()}function eT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yL(t){const e=eT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:q0(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:q0(l)}}}function q0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,n){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function wL(t,e){return ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(t,e){return Gu(t,"POST","/v1/accounts:signInWithPassword",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(t,e){return Gu(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}async function TL(t,e){return Gu(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Bv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ku(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ku(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,n,"signInWithPassword",bL);case"emailLink":return EL(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,r,"signUpPassword",wL);case"emailLink":return TL(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t,e){return Gu(t,"POST","/v1/accounts:signInWithIdp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="http://localhost";class Fs extends Bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Ov(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Fs(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}buildRequest(){const e={requestUri:kL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IL(t){const e=kl(Nl(t)).link,n=e?kl(Nl(e)).deep_link_id:null,r=kl(Nl(t)).deep_link_id;return(r?kl(Nl(r)).link:null)||r||n||e||t}class $v{constructor(e){var n,r,i,o,l,h;const f=kl(Nl(e)),p=(n=f.apiKey)!==null&&n!==void 0?n:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,y=NL((i=f.mode)!==null&&i!==void 0?i:null);de(p&&v&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=v,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=f.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=IL(e);try{return new $v(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.providerId=Pa.PROVIDER_ID}static credential(e,n){return ku._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$v.parseLink(n);return de(r,"argument-error"),ku._fromEmailAndCode(e,r.code,r.tenantId)}}Pa.PROVIDER_ID="password";Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends Wv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Zu{constructor(){super("facebook.com")}static credential(e){return Fs._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Zu{constructor(){super("github.com")}static credential(e){return Fs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Zu{constructor(){super("twitter.com")}static credential(e,n){return Fs._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return bi.credential(n,r)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e){return Gu(t,"POST","/v1/accounts:signUp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Vr._fromIdTokenResponse(e,r,i),l=G0(r);return new Us({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=G0(r);return new Us({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function G0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends Xr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,dd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new dd(e,n,r,i)}}function tT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?dd._fromErrorAndOperation(t,o,e,r):o})}async function PL(t,e,n=!1){const r=await va(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Us._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(Br(r));const i="reauthenticate";try{const o=await va(t,tT(r,i,e,t),n);de(o.idToken,r,"internal-error");const l=Fv(o.idToken);de(l,r,"internal-error");const{sub:h}=l;return de(t.uid===h,r,"user-mismatch"),Us._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Mn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(t,e,n=!1){if(Zn(t.app))return Promise.reject(Br(t));const r="signIn",i=await tT(t,r,e),o=await Us._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function AL(t,e){return nT(ts(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(t){const e=ts(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RL(t,e,n){if(Zn(t.app))return Promise.reject(Br(t));const r=ts(t),l=await Vm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SL).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&rT(t),f}),h=await Us._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function jL(t,e,n){return Zn(t.app)?Promise.reject(Br(t)):AL(ot(t),Pa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t,e){return ti(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ot(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await va(r,LL(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function OL(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function ML(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function VL(t,e,n,r){return ot(t).onAuthStateChanged(e,n,r)}function Z0(t){return ot(t).signOut()}const fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fd,"1"),this.storage.removeItem(fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=1e3,FL=10;class sT extends iT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);rL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,FL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sT.type="LOCAL";const UL=sT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends iT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oT.type="SESSION";const aT=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new hf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async p=>p(n.origin,o)),f=await BL(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((h,f)=>{const p=Hv("",20);i.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const w=y;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(w.data.response);break;default:clearTimeout(v),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function WL(t){pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function HL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GL(){return lT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="firebaseLocalStorageDb",ZL=1,pd="firebaseLocalStorage",cT="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function df(t,e){return t.transaction([pd],e?"readwrite":"readonly").objectStore(pd)}function KL(){const t=indexedDB.deleteDatabase(uT);return new Ku(t).toPromise()}function zm(){const t=indexedDB.open(uT,ZL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pd,{keyPath:cT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pd)?e(r):(r.close(),await KL(),e(await zm()))})})}async function K0(t,e,n){const r=df(t,!0).put({[cT]:e,value:n});return new Ku(r).toPromise()}async function QL(t,e){const n=df(t,!1).get(e),r=await new Ku(n).toPromise();return r===void 0?null:r.value}function Q0(t,e){const n=df(t,!0).delete(e);return new Ku(n).toPromise()}const YL=800,JL=3;class hT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hf._getInstance(GL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HL(),!this.activeServiceWorker)return;this.sender=new $L(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zm();return await K0(e,fd,"1"),await Q0(e,fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>K0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=df(i,!1).getAll();return new Ku(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hT.type="LOCAL";const XL=hT;new qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e){return e?zr(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eD(t){return nT(t.auth,new qv(t),t.bypassAuthState)}function tD(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),CL(n,new qv(t),t.bypassAuthState)}async function nD(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),PL(n,new qv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eD;case"linkViaPopup":case"linkViaRedirect":return nD;case"reauthViaPopup":case"reauthViaRedirect":return tD;default:Mn(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new qu(2e3,1e4);async function iD(t,e,n){if(Zn(t.app))return Promise.reject(Yn(t,"operation-not-supported-in-this-environment"));const r=ts(t);Vj(t,e,Wv);const i=dT(r,n);return new Ts(r,"signInViaPopup",e,i).executeNotNull()}class Ts extends fT{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ts.currentPopupAction&&Ts.currentPopupAction.cancel(),Ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Hv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rD.get())};e()}}Ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="pendingRedirect",Th=new Map;class oD extends fT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const r=await aD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aD(t,e){const n=cD(e),r=uD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function lD(t,e){Th.set(t._key(),e)}function uD(t){return zr(t._redirectPersistence)}function cD(t){return Eh(sD,t.config.apiKey,t.name)}async function hD(t,e,n=!1){if(Zn(t.app))return Promise.reject(Br(t));const r=ts(t),i=dT(r,e),l=await new oD(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=10*60*1e3;class fD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y0(e))}saveEventToCache(e){this.cachedEventUids.add(Y0(e)),this.lastProcessedEventTime=Date.now()}}function Y0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(t,e={}){return ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vD=/^https?/;async function _D(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mD(t);for(const n of e)try{if(yD(n))return}catch{}Mn(t,"unauthorized-domain")}function yD(t){const e=Om(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!vD.test(n))return!1;if(gD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new qu(3e4,6e4);function J0(){const t=pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wD(t){return new Promise((e,n)=>{var r,i,o;function l(){J0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J0(),n(Yn(t,"network-request-failed"))},timeout:xD.get()})}if(!((i=(r=pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=pr().gapi)===null||o===void 0)&&o.load)l();else{const h=dL("iframefcb");return pr()[h]=()=>{gapi.load?l():n(Yn(t,"network-request-failed"))},XE(`${hL()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw kh=null,e})}let kh=null;function bD(t){return kh=kh||wD(t),kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new qu(5e3,15e3),TD="__/auth/iframe",kD="emulator/auth/iframe",ND={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ID=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SD(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zv(e,kD):`https://${t.config.authDomain}/${TD}`,r={apiKey:e.apiKey,appName:t.name,v:Ea},i=ID.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Lu(r).slice(1)}`}async function PD(t){const e=await bD(t),n=pr().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:SD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ND,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Yn(t,"network-request-failed"),h=pr().setTimeout(()=>{o(l)},ED.get());function f(){pr().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AD=500,RD=600,jD="_blank",LD="http://localhost";class X0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DD(t,e,n,r=AD,i=RD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},CD),{width:r.toString(),height:i.toString(),top:o,left:l}),p=Wt().toLowerCase();n&&(h=qE(p)?jD:n),WE(p)&&(e=e||LD,f.scrollbars="yes");const v=Object.entries(f).reduce((w,[E,j])=>`${w}${E}=${j},`,"");if(nL(p)&&h!=="_self")return OD(e||"",h),new X0(null);const y=window.open(e||"",h,v);de(y,t,"popup-blocked");try{y.focus()}catch{}return new X0(y)}function OD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="__/auth/handler",VD="emulator/auth/handler",zD=encodeURIComponent("fac");async function ex(t,e,n,r,i,o){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ea,eventId:i};if(e instanceof Wv){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",EP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,y]of Object.entries({}))l[v]=y}if(e instanceof Zu){const v=e.getScopes().filter(y=>y!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await t._getAppCheckToken(),p=f?`#${zD}=${encodeURIComponent(f)}`:"";return`${FD(t)}?${Lu(h).slice(1)}${p}`}function FD({config:t}){return t.emulator?zv(t,VD):`https://${t.authDomain}/${MD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="webStorageSupport";class UD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aT,this._completeRedirectFn=hD,this._overrideRedirectResult=lD}async _openPopup(e,n,r,i){var o;Yr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await ex(e,n,r,Om(),i);return DD(e,l,Hv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await ex(e,n,r,Om(),i);return WL(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Yr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PD(e),r=new fD(e);return n.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(up,{type:up},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[up];l!==void 0&&n(!!l),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_D(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YE()||HE()||Uv()}}const BD=UD;var tx="@firebase/auth",nx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HD(t){la(new Os("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;de(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JE(t)},p=new lL(r,i,o,f);return vL(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),la(new Os("auth-internal",e=>{const n=ts(e.getProvider("auth").getImmediate());return(r=>new $D(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(tx,nx,WD(t)),Mi(tx,nx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=5*60,GD=o1("authIdTokenMaxAge")||qD;let rx=null;const ZD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GD)return;const i=n==null?void 0:n.token;rx!==i&&(rx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function KD(t=c1()){const e=Zg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gL(t,{popupRedirectResolver:BD,persistence:[XL,UL,aT]}),r=o1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=ZD(o.toString());ML(n,l,()=>l(n.currentUser)),OL(n,h=>l(h))}}const i=i1("auth");return i&&_L(n,`http://${i}`),n}function QD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}uL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Yn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",QD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HD("Browser");const YD={apiKey:"AIzaSyDhHixkLeoyOAhiR2M-fk-ZKHkCX-7Oi6w",authDomain:"autodirect-5320e.firebaseapp.com",projectId:"autodirect-5320e",storageBucket:"autodirect-5320e.firebasestorage.app",messagingSenderId:"88578597656",appId:"1:88578597656:web:184fc8e29b515a0a71b46d",measurementId:"G-T0L41Q58VX"},mT=u1(YD),Le=_j(mT),Ps=KD(mT),JD=new Lr;new jr;const gT=F.createContext(),XD=()=>F.useContext(gT),eO=({children:t})=>{const[e,n]=F.useState([]),[r,i]=F.useState(0),[o,l]=F.useState(null);F.useEffect(()=>{const v=Ps.onAuthStateChanged(y=>l(y));return()=>v()},[]),F.useEffect(()=>{if(!o){n([]);return}const v=Eu(zi(Le,"users",o.uid,"notifications"),CE("createdAt","desc"),Ij(20)),y=ud(v,w=>{const E=w.docs.map(j=>({id:j.id,...j.data()}));n(E),i(E.filter(j=>!j.read).length)});return()=>y()},[o]);const h=async(v,y,w,E,j={})=>{try{await Dm(zi(Le,"users",v,"notifications"),{type:y,title:w,message:E,data:j,read:!1,createdAt:Tu()}),j.sendEmail&&await Dm(zi(Le,"mail"),{to:[j.email],message:{subject:w,text:E,html:`<p>${E}</p>`},createdAt:Tu()})}catch(S){console.error("Error sending notification:",S),dm.error("Failed to send alert")}},f=async v=>{if(o)try{await jn(et(Le,"users",o.uid,"notifications",v),{read:!0})}catch(y){console.error("Error marking read:",y)}},p=async()=>{o&&e.filter(v=>!v.read).forEach(v=>f(v.id))};return u.jsx(gT.Provider,{value:{notifications:e,unreadCount:r,triggerNotification:h,markAsRead:f,markAllRead:p},children:t})},tO=()=>{const{notifications:t,unreadCount:e,markAsRead:n,markAllRead:r}=XD(),[i,o]=F.useState(!1),l=F.useRef(null);F.useEffect(()=>{const p=v=>{l.current&&!l.current.contains(v.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const h=p=>{if(!p)return"Just now";const v=p.toDate?p.toDate():new Date(p),y=Math.floor((new Date-v)/1e3);let w=y/31536e3;return w>1?Math.floor(w)+"y ago":(w=y/2592e3,w>1?Math.floor(w)+"mo ago":(w=y/86400,w>1?Math.floor(w)+"d ago":(w=y/3600,w>1?Math.floor(w)+"h ago":(w=y/60,w>1?Math.floor(w)+"m ago":Math.floor(y)+"s ago"))))},f=p=>{switch(p){case"success":return u.jsx(mr,{className:"w-4 h-4 text-green-500"});case"warning":return u.jsx(Md,{className:"w-4 h-4 text-amber-500"});case"error":return u.jsx(Au,{className:"w-4 h-4 text-red-500"});default:return u.jsx(P2,{className:"w-4 h-4 text-blue-500"})}};return u.jsxs("div",{className:"relative",ref:l,children:[u.jsxs("button",{onClick:()=>o(!i),className:"p-2 rounded-full hover:bg-slate-100 transition-colors relative",children:[u.jsx(Ly,{className:`w-6 h-6 ${e>0?"text-slate-800":"text-slate-400"}`}),e>0&&u.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full ring-2 ring-white animate-pulse"})]}),i&&u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden z-50 animate-in fade-in slide-in-from-top-2",children:[u.jsxs("div",{className:"p-3 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[u.jsx("h3",{className:"text-xs font-black uppercase text-slate-500 tracking-wider",children:"Notifications"}),e>0&&u.jsx("button",{onClick:r,className:"text-[10px] font-bold text-blue-600 hover:underline",children:"Mark all read"})]}),u.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:t.length===0?u.jsxs("div",{className:"p-8 text-center text-slate-400",children:[u.jsx(Ly,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),u.jsx("p",{className:"text-xs font-bold",children:"No new notifications"})]}):t.map(p=>u.jsxs("div",{className:`p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors cursor-pointer group flex gap-3 ${p.read?"":"bg-blue-50/30"}`,onClick:()=>n(p.id),children:[u.jsx("div",{className:"mt-1",children:f(p.type)}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsx("p",{className:`text-sm ${p.read?"font-medium text-slate-600":"font-bold text-slate-800"}`,children:p.title}),u.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase whitespace-nowrap ml-2",children:h(p.createdAt)})]}),u.jsx("p",{className:"text-xs text-slate-500 leading-snug",children:p.message})]}),!p.read&&u.jsx("div",{className:"flex items-center",children:u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]},p.id))})]})]})};function Fm(){return Fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fm.apply(null,arguments)}function nO(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rO(t,e){if(t==null)return{};var n,r,i=nO(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Um(t){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Um(t)}function iO(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function sO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bm(t,e){return Bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Bm(t,e)}function oO(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bm(t,e)}function md(t){return md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},md(t)}function vT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vT=function(){return!!t})()}function aO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lO(t,e){if(e&&(Um(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aO(t)}function uO(t){var e=vT();return function(){var n,r=md(t);if(e){var i=md(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lO(this,n)}}var _T={exports:{}},cO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hO=cO,dO=hO;function yT(){}function xT(){}xT.resetWarningCache=yT;var fO=function(){function t(r,i,o,l,h,f){if(f!==dO){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xT,resetWarningCache:yT};return n.PropTypes=n,n};_T.exports=fO();var pO=_T.exports;const pn=gd(pO);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function Bs(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}Bs.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};Bs.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};Bs.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function Gv(t,e,n,r){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=r}Gv.prototype.length=function(){for(var t=10,e=0,n=void 0,r=void 0,i=0;i<=t;i+=1){var o=i/t,l=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),h=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var f=l-n,p=h-r;e+=Math.sqrt(f*f+p*p)}n=l,r=h}return e};Gv.prototype._point=function(t,e,n,r,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*r*(1-t)*t*t+i*t*t*t};function mO(t,e,n){var r,i,o,l=null,h=0;n||(n={});var f=function(){h=n.leading===!1?0:Date.now(),l=null,o=t.apply(r,i),l||(r=i=null)};return function(){var p=Date.now();!h&&n.leading===!1&&(h=p);var v=e-(p-h);return r=this,i=arguments,v<=0||v>e?(l&&(clearTimeout(l),l=null),h=p,o=t.apply(r,i),l||(r=i=null)):!l&&n.trailing!==!1&&(l=setTimeout(f,v)),o}}function Be(t,e){var n=this,r=e||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=mO(Be.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Be.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(i){i.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(i))},this._handleMouseMove=function(i){n._mouseButtonDown&&n._strokeMoveUpdate(i)},this._handleMouseUp=function(i){i.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(i))},this._handleTouchStart=function(i){if(i.targetTouches.length===1){var o=i.changedTouches[0];n._strokeBegin(o)}},this._handleTouchMove=function(i){i.preventDefault();var o=i.targetTouches[0];n._strokeMoveUpdate(o)},this._handleTouchEnd=function(i){var o=i.target===n._canvas;o&&(i.preventDefault(),n._strokeEnd(i))},this.on()}Be.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Be.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Image,i=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/i,l=n.height||this._canvas.height/i;this._reset(),r.src=t,r.onload=function(){e._ctx.drawImage(r,0,0,o,l)},this._isEmpty=!1};Be.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this._canvas).toDataURL.apply(e,[t].concat(r))}};Be.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Be.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Be.prototype.isEmpty=function(){return this._isEmpty};Be.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};Be.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,r=this._createPoint(e,n),i=this._data[this._data.length-1],o=i&&i[i.length-1],l=o&&r.distanceTo(o)<this.minDistance;if(!(o&&l)){var h=this._addPoint(r),f=h.curve,p=h.widths;f&&p&&this._drawCurve(f,p.start,p.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}};Be.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],i=r[r.length-1];n.equals(i)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};Be.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Be.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Be.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Be.prototype._createPoint=function(t,e,n){var r=this._canvas.getBoundingClientRect();return new Bs(t-r.left,e-r.top,n||new Date().getTime())};Be.prototype._addPoint=function(t){var e=this.points,n=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),n=this._calculateCurveControlPoints(e[0],e[1],e[2]);var r=n.c2;n=this._calculateCurveControlPoints(e[1],e[2],e[3]);var i=n.c1,o=new Gv(e[1],r,i,e[2]),l=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:l}}return{}};Be.prototype._calculateCurveControlPoints=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=e.x-n.x,l=e.y-n.y,h={x:(t.x+e.x)/2,y:(t.y+e.y)/2},f={x:(e.x+n.x)/2,y:(e.y+n.y)/2},p=Math.sqrt(r*r+i*i),v=Math.sqrt(o*o+l*l),y=h.x-f.x,w=h.y-f.y,E=v/(p+v),j={x:f.x+y*E,y:f.y+w*E},S=e.x-j.x,M=e.y-j.y;return{c1:new Bs(h.x+S,h.y+M),c2:new Bs(f.x+S,f.y+M)}};Be.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,r={start:null,end:null},i=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(i);return r.start=this._lastWidth,r.end=o,this._lastVelocity=i,this._lastWidth=o,r};Be.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};Be.prototype._drawPoint=function(t,e,n){var r=this._ctx;r.moveTo(t,e),r.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1};Be.prototype._drawCurve=function(t,e,n){var r=this._ctx,i=n-e,o=Math.floor(t.length());r.beginPath();for(var l=0;l<o;l+=1){var h=l/o,f=h*h,p=f*h,v=1-h,y=v*v,w=y*v,E=w*t.startPoint.x;E+=3*y*h*t.control1.x,E+=3*v*f*t.control2.x,E+=p*t.endPoint.x;var j=w*t.startPoint.y;j+=3*y*h*t.control1.y,j+=3*v*f*t.control2.y,j+=p*t.endPoint.y;var S=e+p*i;this._drawPoint(E,j,S)}r.closePath(),r.fill()};Be.prototype._drawDot=function(t){var e=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()};Be.prototype._fromData=function(t,e,n){for(var r=0;r<t.length;r+=1){var i=t[r];if(i.length>1)for(var o=0;o<i.length;o+=1){var l=i[o],h=new Bs(l.x,l.y,l.time),f=l.color;if(o===0)this.penColor=f,this._reset(),this._addPoint(h);else if(o!==i.length-1){var p=this._addPoint(h),v=p.curve,y=p.widths;v&&y&&e(v,y,f)}}else{this._reset();var w=i[0];n(w)}}};Be.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),i=0,o=0,l=n.width/r,h=n.height/r,f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS(null,"width",n.width),f.setAttributeNS(null,"height",n.height),this._fromData(e,function(C,N,R){var U=document.createElement("path");if(!isNaN(C.control1.x)&&!isNaN(C.control1.y)&&!isNaN(C.control2.x)&&!isNaN(C.control2.y)){var q="M "+C.startPoint.x.toFixed(3)+","+C.startPoint.y.toFixed(3)+" "+("C "+C.control1.x.toFixed(3)+","+C.control1.y.toFixed(3)+" ")+(C.control2.x.toFixed(3)+","+C.control2.y.toFixed(3)+" ")+(C.endPoint.x.toFixed(3)+","+C.endPoint.y.toFixed(3));U.setAttribute("d",q),U.setAttribute("stroke-width",(N.end*2.25).toFixed(3)),U.setAttribute("stroke",R),U.setAttribute("fill","none"),U.setAttribute("stroke-linecap","round"),f.appendChild(U)}},function(C){var N=document.createElement("circle"),R=typeof t.dotSize=="function"?t.dotSize():t.dotSize;N.setAttribute("r",R),N.setAttribute("cx",C.x),N.setAttribute("cy",C.y),N.setAttribute("fill",C.color),f.appendChild(N)});var p="data:image/svg+xml;base64,",v='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+i+" "+o+" "+l+" "+h+'"')+(' width="'+l+'"')+(' height="'+h+'"')+">",y=f.innerHTML;if(y===void 0){var w=document.createElement("dummy"),E=f.childNodes;w.innerHTML="";for(var j=0;j<E.length;j+=1)w.appendChild(E[j].cloneNode(!0));y=w.innerHTML}var S="</svg>",M=v+y+S;return p+btoa(M)};Be.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(n,r){return e._drawCurve(n,r.start,r.end)},function(n){return e._drawDot(n)}),this._data=t};Be.prototype.toData=function(){return this._data};var wT={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(ox,function(){return function(n){function r(o){if(i[o])return i[o].exports;var l=i[o]={exports:{},id:o,loaded:!1};return n[o].call(l.exports,l,l.exports,r),l.loaded=!0,l.exports}var i={};return r.m=n,r.c=i,r.p="",r(0)}([function(n,r){function i(p){var v=p.getContext("2d"),y=p.width,w=p.height,E=v.getImageData(0,0,y,w).data,j=h(!0,y,w,E),S=h(!1,y,w,E),M=f(!0,y,w,E),C=f(!1,y,w,E),N=C-M+1,R=S-j+1,U=v.getImageData(M,j,N,R);return p.width=N,p.height=R,v.clearRect(0,0,N,R),v.putImageData(U,0,0),p}function o(p,v,y,w){return{red:w[4*(y*v+p)],green:w[4*(y*v+p)+1],blue:w[4*(y*v+p)+2],alpha:w[4*(y*v+p)+3]}}function l(p,v,y,w){return o(p,v,y,w).alpha}function h(p,v,y,w){for(var E=p?1:-1,j=p?0:y-1,S=j;p?S<y:S>-1;S+=E)for(var M=0;M<v;M++)if(l(M,S,v,w))return S;return null}function f(p,v,y,w){for(var E=p?1:-1,j=p?0:v-1,S=j;p?S<v:S>-1;S+=E)for(var M=0;M<y;M++)if(l(S,M,v,w))return S;return null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i}])})})(wT);var gO=wT.exports;const vO=gd(gO);var _O=["canvasProps","clearOnResize"],ff=function(t){oO(n,t);var e=uO(n);function n(){var r;sO(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o)),r.staticThis=r.constructor,r._sigPad=null,r._canvas=null,r.setRef=function(h){r._canvas=h,r._canvas===null&&(r._sigPad=null)},r._excludeOurProps=function(){var h=r.props;h.canvasProps,h.clearOnResize;var f=rO(h,_O);return f},r.componentDidMount=function(){var h=r.getCanvas();r._sigPad=new Be(h,r._excludeOurProps()),r._resizeCanvas(),r.on()},r.componentWillUnmount=function(){r.off()},r.componentDidUpdate=function(){Object.assign(r._sigPad,r._excludeOurProps())},r.getCanvas=function(){if(r._canvas===null)throw r.staticThis.refNullError;return r._canvas},r.getTrimmedCanvas=function(){var h=r.getCanvas(),f=document.createElement("canvas");return f.width=h.width,f.height=h.height,f.getContext("2d").drawImage(h,0,0),vO(f)},r.getSignaturePad=function(){if(r._sigPad===null)throw r.staticThis.refNullError;return r._sigPad},r._checkClearOnResize=function(){r.props.clearOnResize&&r._resizeCanvas()},r._resizeCanvas=function(){var h,f,p=(h=r.props.canvasProps)!==null&&h!==void 0?h:{},v=p.width,y=p.height;if(!(typeof v<"u"&&typeof y<"u")){var w=r.getCanvas(),E=Math.max((f=window.devicePixelRatio)!==null&&f!==void 0?f:1,1);typeof v>"u"&&(w.width=w.offsetWidth*E),typeof y>"u"&&(w.height=w.offsetHeight*E),w.getContext("2d").scale(E,E),r.clear()}},r.render=function(){var h=r.props.canvasProps;return nn.createElement("canvas",Fm({ref:r.setRef},h))},r.on=function(){return window.addEventListener("resize",r._checkClearOnResize),r.getSignaturePad().on()},r.off=function(){return window.removeEventListener("resize",r._checkClearOnResize),r.getSignaturePad().off()},r.clear=function(){return r.getSignaturePad().clear()},r.isEmpty=function(){return r.getSignaturePad().isEmpty()},r.fromDataURL=function(h,f){return r.getSignaturePad().fromDataURL(h,f)},r.toDataURL=function(h,f){return r.getSignaturePad().toDataURL(h,f)},r.fromData=function(h){return r.getSignaturePad().fromData(h)},r.toData=function(){return r.getSignaturePad().toData()},r}return iO(n)}(F.Component);ff.propTypes={velocityFilterWeight:pn.number,minWidth:pn.number,maxWidth:pn.number,minDistance:pn.number,dotSize:pn.oneOfType([pn.number,pn.func]),penColor:pn.string,throttle:pn.number,onEnd:pn.func,onBegin:pn.func,canvasProps:pn.object,clearOnResize:pn.bool};ff.defaultProps={clearOnResize:!0};ff.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const yO=(t,e,n,r)=>{var i=6371,o=th(n-t),l=th(r-e),h=Math.sin(o/2)*Math.sin(o/2)+Math.cos(th(t))*Math.cos(th(n))*Math.sin(l/2)*Math.sin(l/2),f=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),p=i*f;return p*1e3},th=t=>t*(Math.PI/180),xO=({job:t,onClose:e,onSuccess:n})=>{const[r,i]=F.useState("validating"),[o,l]=F.useState(null),[h,f]=F.useState(null),[p,v]=F.useState(null),[y,w]=F.useState(null),E=F.useRef({}),[j,S]=F.useState(300),M=F.useRef(null);F.useEffect(()=>{M.current&&S(M.current.offsetWidth)},[r]),F.useEffect(()=>{if(r==="validating"){if(!navigator.geolocation){v("Geolocation is not supported by this browser."),i("warning");return}navigator.geolocation.getCurrentPosition(k=>{const T=k.coords.latitude,A=k.coords.longitude;l({lat:T,lng:A});let P=fu(t.destination);if(P){const V=yO(T,A,P[0],P[1]);f(V),setTimeout(()=>{V>500?i("warning"):i("signature")},1e3)}else v("Could not resolve destination coordinates."),i("warning")},k=>{v("Unable to retrieve your location. Ensure GPS is enabled."),i("warning")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},[r,t.destination]);const C=()=>E.current.clear(),N=k=>{if(k.target.files[0]){const T=new FileReader;T.onloadend=()=>{w(T.result)},T.readAsDataURL(k.target.files[0])}},[R,U]=F.useState(null),q=()=>{E.current.isEmpty()||(U(E.current.toDataURL()),i("photo"))},G=async()=>{i("submitting");try{const k=jj(Le),T=et(Le,"transportJobs",t.id);k.update(T,{status:"delivered",completedAt:Tu()});const A=et(Le,"transportJobs",t.id,"delivery_proof","final");k.set(A,{timestamp:Tu(),geolocation:o,distance_deviation:h,signature:R,photo:y||null,photo_skipped:!y}),await k.commit(),n()}catch(k){console.error("Submission failed: ",k),alert("Failed to submit proof. Try again."),i("photo")}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-primary w-full max-w-md rounded-2xl shadow-2xl border border-slate-700 overflow-hidden text-white flex flex-col",children:[u.jsxs("div",{className:"p-4 bg-slate-800 border-b border-slate-700 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-black text-secondary uppercase tracking-widest",children:"Digital ePOD"}),u.jsxs("p",{className:"text-[10px] text-slate-400",children:["Order #",t.id?t.id.slice(-6):"..."]})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",children:u.jsx(Au,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 flex-1 flex flex-col items-center justify-center min-h-[300px]",children:[r==="validating"&&u.jsxs("div",{className:"text-center space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(hr,{className:"w-12 h-12 text-secondary animate-bounce mx-auto"}),u.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-8 h-1 bg-secondary/30 rounded-full blur-sm animate-pulse"})]}),u.jsx("h3",{className:"text-xl font-bold",children:"Verifying Location"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Matching GPS with Delivery Point..."})]}),r==="warning"&&u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto border border-red-500/20",children:u.jsx(Md,{className:"w-8 h-8 text-red-500"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-lg font-bold text-white",children:"Location Mismatch"}),u.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed max-w-[250px] mx-auto",children:["You are ",u.jsxs("span",{className:"text-white font-bold",children:[Math.round(h),"m"]})," away from the destination. Standard limit is 500m."]})]}),p&&u.jsx("p",{className:"text-[10px] text-red-400",children:p}),u.jsx("button",{onClick:()=>i("signature"),className:"w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl text-sm transition-colors mt-4",children:"Override & Continue"})]}),r==="signature"&&u.jsxs("div",{className:"w-full space-y-4",ref:M,children:[u.jsxs("div",{className:"text-center space-y-1 mb-2",children:[u.jsx("h3",{className:"text-lg font-bold",children:"Receiver Signature"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Please sign below to confirm receipt"})]}),u.jsx("div",{className:"bg-white rounded-xl overflow-hidden border-2 border-slate-600",children:u.jsx(ff,{ref:E,penColor:"black",canvasProps:{width:j||300,height:200,className:"sigCanvas"}})}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:C,className:"flex-1 py-3 bg-slate-800 text-slate-300 font-bold rounded-xl text-xs hover:bg-slate-700 hover:text-white transition-colors",children:"Clear"}),u.jsxs("button",{onClick:q,className:"flex-[2] py-3 bg-secondary text-primary font-black rounded-xl text-xs hover:bg-yellow-400 transition-colors flex items-center justify-center",children:["Confirm Signature ",u.jsx(Zo,{className:"w-4 h-4 ml-2"})]})]})]}),r==="photo"&&u.jsxs("div",{className:"w-full space-y-4",children:[u.jsxs("div",{className:"text-center space-y-1 mb-2",children:[u.jsx("h3",{className:"text-lg font-bold",children:"Proof of Cargo"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Optional: Take a photo of the offloaded goods"})]}),u.jsxs("div",{className:"relative w-full aspect-video bg-slate-800 rounded-xl border border-dashed border-slate-600 flex flex-col items-center justify-center overflow-hidden group hover:border-secondary/50 transition-colors cursor-pointer",children:[y?u.jsx("img",{src:y,alt:"Cargo Preview",className:"w-full h-full object-cover"}):u.jsxs(u.Fragment,{children:[u.jsx(Ab,{className:"w-8 h-8 text-slate-500 mb-2 group-hover:text-secondary transition-colors"}),u.jsx("span",{className:"text-xs font-bold text-slate-500 group-hover:text-slate-300",children:"Tap to Capture"})]}),u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:N})]}),u.jsxs("div",{className:"space-y-3 pt-2",children:[u.jsxs("button",{onClick:G,className:"w-full py-3 bg-secondary text-primary font-black rounded-xl text-sm hover:bg-yellow-400 transition-colors flex items-center justify-center shadow-lg shadow-yellow-500/20",children:[y?"Submit Proof":"Skip & Complete Delivery",y?u.jsx(mr,{className:"w-4 h-4 ml-2"}):u.jsx(O2,{className:"w-4 h-4 ml-2"})]}),y&&u.jsx("button",{onClick:()=>w(null),className:"w-full text-[10px] font-bold text-red-400 hover:text-red-300 uppercase tracking-wider",children:"Remove Photo"})]})]}),r==="submitting"&&u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx(Ug,{className:"w-10 h-10 text-secondary animate-spin mx-auto"}),u.jsx("h3",{className:"text-lg font-bold",children:"Finalizing Job..."}),u.jsx("p",{className:"text-xs text-slate-400",children:"Securing blockchain-ready proof"})]})]}),u.jsx("div",{className:"p-4 bg-slate-800 flex justify-center space-x-2",children:["validating","signature","photo"].map((k,T)=>u.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${["validating","warning"].includes(r)&&T===0||r==="signature"&&T===1||r==="photo"&&T===2?"bg-secondary":r==="submitting"?"bg-green-500":"bg-slate-600"}`},k))})]})})},wO=({activeTab:t,setActiveTab:e,availableJobs:n,myJobs:r,onAcceptJob:i,onUpdateStatus:o,onExpireJob:l,userProfile:h})=>{const[f,p]=nn.useState(null),[v,y]=nn.useState(null),[w,E]=nn.useState([]),[j,S]=nn.useState(null),[M,C]=nn.useState([]);nn.useEffect(()=>{(async()=>{if(h!=null&&h.organizationId&&["admin","dispatcher","owner"].includes(h.role))try{const D=Eu(zi(Le,"users"),jm("organizationId","==",h.organizationId)),cn=(await Lm(D)).docs.map(We=>({id:We.id,...We.data()})).filter(We=>We.role==="driver"||We.role==="owner");C(cn)}catch(D){console.error("Error fetching drivers",D)}})()},[h]);const N=async(O,D)=>{try{const Ae=M.find(cn=>cn.id===D);await jn(et(Le,"transportJobs",O),{assignedDriverId:D,assignedDriverName:(Ae==null?void 0:Ae.displayName)||"Unknown Driver",assignedBy:h.uid})}catch(Ae){console.error("Error assigning driver:",Ae)}},R=O=>{E(D=>D.includes(O)?D.filter(Ae=>Ae!==O):[...D,O])},U=async(O,D,Ae)=>{y(O),await Ae(),y(null)},q=O=>!O||!O.destination?[]:n.filter(D=>D.departure&&(D.departure.toLowerCase().includes(O.destination.toLowerCase())||O.destination.toLowerCase().includes(D.departure.toLowerCase()))),G=r.filter(O=>["assigned","transit"].includes(O.status)),k=r.filter(O=>["delivered","cancelled"].includes(O.status)),T=k.filter(O=>O.status==="delivered").reduce((O,D)=>O+Number(D.budget||0),0),A=k.filter(O=>O.status==="delivered").length,P=G.length,V=n.length;return u.jsxs("div",{className:"space-y-10 pb-16",children:[f&&u.jsx(Gb,{job:f,onClose:()=>p(null)}),u.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 text-white shadow-premium relative overflow-hidden group",children:[u.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[500px] h-[500px] bg-primary/20 rounded-full blur-[120px] animate-pulse-slow"}),u.jsx("div",{className:"absolute bottom-[-20%] left-[-10%] w-[400px] h-[400px] bg-indigo-500/10 rounded-full blur-[100px]"}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"px-3 py-1 bg-primary text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-full border border-white/10 flex items-center shadow-lg shadow-primary/20",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mr-2 animate-ping"}),"Network Live"]}),u.jsx("span",{className:"text-slate-500 font-black text-[10px] uppercase tracking-widest",children:"Global Ops v2.4"})]}),u.jsxs("h1",{className:"text-5xl font-black tracking-tighter leading-tight",children:["Hauler ",u.jsx("span",{className:"gradient-text",children:"Command Center."})]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"glass-effect p-1 rounded-2xl border-white/5",children:u.jsx(tO,{dark:!0})}),u.jsx("button",{className:"w-12 h-12 glass-effect flex items-center justify-center rounded-2xl border-white/5 hover:bg-white/10 transition-all border border-white/10",children:u.jsx(Ds,{className:"w-6 h-6 text-white"})})]})]}),u.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:[{label:"Market Loads",val:V,icon:ys,color:"text-primary"},{label:"Active Runs",val:P,icon:Vd,color:"text-amber-400"},{label:"Successful",val:A,icon:mr,color:"text-green-400"},{label:"Net Revenue",val:`$${T.toLocaleString()}`,icon:Fg,color:"text-blue-400"}].map((O,D)=>u.jsxs("div",{className:"glass-effect p-6 rounded-3xl border-white/5 hover:bg-white/[0.08] transition-all group/stat",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[u.jsx("div",{className:`p-2.5 bg-white/5 rounded-xl border border-white/10 group-hover/stat:border-white/20 transition-colors ${O.color}`,children:u.jsx(O.icon,{className:"w-6 h-6"})}),u.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:O.label})]}),u.jsx("p",{className:"text-3xl font-black tracking-tight",children:O.val})]},D))})]})]}),u.jsxs("div",{className:"flex p-1.5 glass-effect rounded-[1.5rem] border border-slate-200/50 w-fit backdrop-blur-md",children:[u.jsx(Qh,{active:t==="board",onClick:()=>e("board"),icon:k2,label:"Load Board"}),u.jsx(Qh,{active:t==="active",onClick:()=>e("active"),icon:At,label:"My Fleet Ops"})]}),t==="board"&&u.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-8 duration-700",children:n.length===0?u.jsx(am,{icon:$i,title:"Market Scanning...",desc:"Tracking regional suppliers for new load requirements..."}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(O=>u.jsxs("div",{className:"premium-card group flex flex-col h-full hover:-translate-y-2 transition-all duration-500 overflow-hidden border-slate-100",children:[u.jsxs("div",{className:"bg-slate-900 p-8 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),u.jsx("div",{className:"absolute top-5 right-5 z-10",children:u.jsx("div",{className:"bg-primary text-white text-[9px] font-black px-3 py-1.5 rounded-full shadow-lg border border-white/10 uppercase tracking-widest animate-pulse",children:"Live Listing"})}),u.jsxs("div",{className:"relative z-10 space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-primary",children:[u.jsx(At,{className:"w-4 h-4"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] opacity-80",children:O.fleetType})]}),u.jsxs("h3",{className:"text-white font-black text-2xl tracking-tighter leading-tight pr-6 uppercase",children:[O.departure.split(",")[0],u.jsx(zg,{className:"w-5 h-5 inline mx-1 text-slate-500"}),O.destination.split(",")[0]]})]})]}),u.jsxs("div",{className:"p-8 flex-1 flex flex-col justify-between",children:[u.jsxs("div",{className:"space-y-4 mb-8",children:[u.jsxs("div",{className:"flex justify-between items-center text-xs pb-3 border-b border-slate-50",children:[u.jsx("span",{className:"font-black text-slate-400 uppercase tracking-widest",children:"Commodity"}),u.jsx("span",{className:"font-bold text-slate-900 uppercase",children:O.goodsType})]}),u.jsxs("div",{className:"flex justify-between items-center text-xs pb-3 border-b border-slate-50",children:[u.jsx("span",{className:"font-black text-slate-400 uppercase tracking-widest",children:"Cargo Weight"}),u.jsxs("span",{className:"font-bold text-slate-900",children:[O.tonnage," Metric Tons"]})]}),u.jsxs("div",{className:"flex justify-between items-center text-xs",children:[u.jsx("span",{className:"font-black text-slate-400 uppercase tracking-widest",children:"Dispatch"}),u.jsx("span",{className:"font-bold text-primary bg-primary/5 px-2.5 py-1 rounded-full border border-primary/10 uppercase",children:"Instant"})]})]}),u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest block",children:"Contract Value"}),u.jsxs("div",{className:"text-3xl font-black text-slate-900 flex items-start",children:[u.jsx("span",{className:"text-sm text-primary mt-1 mr-0.5",children:"$"}),Number(O.budget).toLocaleString()]})]}),u.jsx("button",{disabled:v===O.id,onClick:()=>U(O.id,"accept",()=>i(O.id)),className:`h-12 px-8 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl transition-all active:scale-95 ${v===O.id?"bg-slate-100 text-slate-400":"bg-primary text-white hover:bg-primary-hover hover:shadow-primary/30"}`,children:v===O.id?"Securing...":"Claim Job"})]})]})]},O.id))})}),t==="active"&&u.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[G.length===0&&k.length===0&&u.jsx(am,{icon:At,title:"No Active Jobs",desc:"No active jobs currently in progress."}),G.length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 px-2",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),u.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Active Runs"})]}),G.map(O=>u.jsx(ix,{job:O,expanded:!0,actionLoading:v,handleAction:U,onUpdateStatus:o,onAcceptJob:i,getReturnLoads:q,onInitiateDelivery:S,onExpireJob:l,userProfile:h,orgDrivers:M,onAssignDriver:N,onViewBOL:()=>p(O)},O.id))]}),k.length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest px-2",children:"Past Runs"}),k.map(O=>u.jsx(ix,{job:O,expanded:w.includes(O.id),onToggleExpand:()=>R(O.id),readOnly:!0},O.id))]})]}),j&&u.jsx(xO,{job:j,onClose:()=>S(null),onSuccess:()=>S(null)})]})},ix=({job:t,expanded:e,onToggleExpand:n,readOnly:r,actionLoading:i,onUpdateStatus:o,onAcceptJob:l,getReturnLoads:h,onInitiateDelivery:f,userProfile:p,orgDrivers:v,onAssignDriver:y,onViewBOL:w})=>{var C,N;const[E,j]=nn.useState(""),S=async()=>{if(E)try{await y(t.id,E),ne.success("Driver assigned successfully")}catch{ne.error("Failed to assign driver")}};if(!e)return u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex items-center justify-between group hover:border-primary/30 hover:shadow-md transition-all cursor-pointer",onClick:n,children:[u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${t.status==="delivered"?"bg-green-100 text-green-600":"bg-slate-100 text-slate-500"}`,children:t.status==="delivered"?u.jsx(mr,{className:"w-6 h-6"}):u.jsx(Vd,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[u.jsxs("h4",{className:"font-black text-slate-900 text-base tracking-tight",children:["$",Number(t.budget).toLocaleString()," Earned"]}),u.jsxs("span",{className:"text-[10px] font-black text-slate-400 bg-slate-50 px-2 py-0.5 rounded border border-slate-200 uppercase tracking-widest",children:["ID: ",t.id.slice(-6).toUpperCase()]})]}),u.jsxs("p",{className:"text-[11px] text-slate-500 font-bold uppercase tracking-tight flex items-center",children:[(C=t.departure)==null?void 0:C.split(",")[0],u.jsx(zg,{className:"w-3 h-3 mx-2 text-slate-300"}),(N=t.destination)==null?void 0:N.split(",")[0]]})]})]}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"hidden md:block text-right",children:[u.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-0.5",children:"Finalized On"}),u.jsx("p",{className:"text-xs font-bold text-slate-700",children:t.completedAt?new Date(t.completedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[["assigned","transit","delivered"].includes(t.status)&&u.jsx("button",{onClick:R=>{R.stopPropagation(),w()},className:"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-primary hover:bg-primary/5 rounded-xl transition-all border border-transparent hover:border-primary/10",children:u.jsx(aa,{className:"w-5 h-5"})}),u.jsx(du,{status:t.status}),u.jsx("div",{className:"p-2 rounded-xl group-hover:bg-primary/5 transition-colors",children:u.jsx(Ko,{className:"w-5 h-5 text-slate-300 group-hover:text-primary transition-transform duration-300"})})]})]})]});const M=h?h(t):[];return u.jsxs("div",{className:"premium-card p-10 animate-in slide-in-from-top-4 duration-500 border-slate-100 flex flex-col bg-white relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10 pb-8 border-b border-slate-50",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(du,{status:t.status}),u.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:["Reference: ",t.id.slice(-8).toUpperCase()]})]}),u.jsx("h4",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:t.goodsType||"General Cargo"}),u.jsxs("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:[t.fleetType,"  ",t.tonnage," Metric Tons"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:w,className:"h-12 px-6 rounded-2xl bg-slate-50 flex items-center justify-center text-slate-500 font-black text-[10px] uppercase tracking-widest hover:text-primary hover:bg-primary/5 transition-all border border-slate-200/50",children:[u.jsx(aa,{className:"w-5 h-5 mr-2"})," Document Vault"]}),r&&u.jsx("button",{onClick:n,className:"h-12 px-6 rounded-2xl bg-primary/5 text-primary font-black text-[10px] uppercase tracking-widest border border-primary/10 hover:bg-primary/10 transition-all",children:"Collapse view"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10 mb-10",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Route Intelligence"}),u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"p-6 bg-slate-50/50 rounded-[2rem] border border-slate-100 relative group transition-all hover:bg-white hover:shadow-xl hover:shadow-primary/5",children:[u.jsx("div",{className:"absolute left-0 top-6 bottom-6 w-1.5 bg-primary rounded-full"}),u.jsxs("p",{className:"text-[10px] font-black text-primary uppercase tracking-widest mb-2 flex items-center",children:[u.jsx(hr,{className:"w-3.5 h-3.5 mr-2"})," Origin Point"]}),u.jsx("p",{className:"text-sm font-black text-slate-800 uppercase leading-relaxed",children:t.departure})]}),u.jsxs("div",{className:"p-6 bg-slate-50/50 rounded-[2rem] border border-slate-100 relative group transition-all hover:bg-white hover:shadow-xl hover:shadow-green-500/5",children:[u.jsx("div",{className:"absolute left-0 top-6 bottom-6 w-1.5 bg-green-500 rounded-full"}),u.jsxs("p",{className:"text-[10px] font-black text-green-500 uppercase tracking-widest mb-2 flex items-center",children:[u.jsx(Bg,{className:"w-3.5 h-3.5 mr-2"})," Destination Target"]}),u.jsx("p",{className:"text-sm font-black text-slate-800 uppercase leading-relaxed",children:t.destination})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"Operator Status"}),["assigned","transit","delivered"].includes(t.status)?u.jsx("div",{className:"p-8 bg-blue-50/50 rounded-[2rem] border border-blue-100/50 animate-in fade-in zoom-in-95",children:u.jsxs("div",{className:"flex items-center space-x-5",children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary flex items-center justify-center text-white shadow-xl shadow-primary/20",children:u.jsx(Ds,{className:"w-8 h-8"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"Active Unit"}),u.jsx("p",{className:"text-xl font-black text-slate-900",children:t.assignedDriverName||"Primary Asset Assigned"}),u.jsxs("div",{className:"flex items-center text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-2"}),"Communications Link Stable"]})]})]})}):u.jsx("div",{className:"p-8 bg-amber-50/50 rounded-[2rem] border border-amber-100/50",children:u.jsxs("div",{className:"flex items-center space-x-5",children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl bg-amber-100 flex items-center justify-center text-amber-600",children:u.jsx(Md,{className:"w-8 h-8"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-black text-amber-600 uppercase tracking-widest",children:"Awaiting Assignment"}),u.jsx("p",{className:"text-lg font-black text-slate-900 uppercase tracking-tight leading-none mt-1",children:"Standby Mode"})]})]})}),u.jsxs("div",{className:"p-8 bg-slate-900 rounded-[2.5rem] text-white overflow-hidden relative",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/20 rounded-full blur-2xl"}),u.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 relative z-10",children:"Contract Value"}),u.jsxs("div",{className:"text-5xl font-black tracking-tighter relative z-10 flex items-center",children:[u.jsx("span",{className:"text-2xl text-primary mr-1",children:"$"}),Number(t.budget).toLocaleString()]})]})]})]}),!r&&u.jsxs("div",{className:"pt-8 border-t border-slate-50 space-y-6",children:[t.status==="open"&&u.jsxs("div",{className:"space-y-4 p-8 bg-slate-50 rounded-[2.5rem] border border-slate-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Fleet Operations Command"}),u.jsx("span",{className:"text-[9px] font-bold text-slate-400 bg-white px-2 py-1 rounded-full border border-slate-100",children:"Auth: Level 2 Dispatcher"})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("select",{className:"flex-1 h-14 px-6 bg-white border border-slate-200 rounded-2xl text-xs font-black uppercase tracking-widest focus:ring-4 focus:ring-primary/5 outline-none transition-all appearance-none",value:E,onChange:R=>j(R.target.value),children:[u.jsx("option",{value:"",children:"Select Command Unit..."}),v==null?void 0:v.map(R=>u.jsx("option",{value:R.id,children:R.displayName||R.email},R.id))]}),u.jsx("button",{onClick:S,disabled:!E,className:"h-14 px-10 bg-primary text-white rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-primary-hover disabled:bg-slate-200 disabled:text-slate-400 transition-all shadow-xl shadow-primary/20 active:scale-95",children:"Deploy Asset"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.status==="assigned"&&u.jsx("button",{disabled:i===t.id,onClick:()=>o(t.id,"transit"),className:`h-16 rounded-[1.5rem] font-black uppercase text-[11px] tracking-[0.2em] flex items-center justify-center transition-all shadow-xl shadow-primary/20 hover:-translate-y-1 ${i===t.id?"bg-slate-100 text-slate-400":"bg-primary text-white hover:bg-primary-hover"}`,children:i===t.id?"Establishing link...":u.jsxs(u.Fragment,{children:[u.jsx(At,{className:"w-5 h-5 mr-3"})," Initiate Transit"]})}),t.status==="transit"&&u.jsx("button",{disabled:i===t.id,onClick:()=>f(t),className:`h-16 rounded-[1.5rem] font-black uppercase text-[11px] tracking-[0.2em] flex items-center justify-center transition-all shadow-xl shadow-green-600/20 hover:-translate-y-1 ${i===t.id?"bg-slate-100 text-slate-400":"bg-green-600 text-white hover:bg-green-700"}`,children:i===t.id?"Syncing Hub...":u.jsxs(u.Fragment,{children:[u.jsx(mr,{className:"w-5 h-5 mr-3"})," Confirm Delivery"]})})]}),t.status!=="delivered"&&M.length>0&&u.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-50",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:u.jsx(Fg,{className:"w-4 h-4"})}),u.jsx("span",{className:"text-[11px] font-black text-slate-900 uppercase tracking-[0.2em]",children:"Market Intelligence: Return Loads"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map(R=>u.jsxs("div",{className:"flex justify-between items-center bg-slate-50/50 p-6 rounded-[2rem] border border-slate-100 hover:bg-white hover:shadow-xl hover:shadow-primary/5 transition-all group",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-xl font-black text-slate-900 flex items-start",children:[u.jsx("span",{className:"text-xs text-primary mt-1 mr-0.5",children:"$"}),Number(R.budget).toLocaleString()]}),u.jsxs("div",{className:"text-[9px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["To ",R.destination.split(",")[0]]})]}),u.jsx("button",{onClick:()=>l(R.id),className:"h-10 px-5 bg-white border border-slate-200 text-primary text-[10px] font-black uppercase tracking-widest rounded-xl shadow-sm hover:border-primary group-hover:bg-primary group-hover:text-white transition-all",children:"Secure"})]},R.id))})]})]})]})},bO=()=>{const t=["LIVE: 48 New Loads Available","DISPATCH: Harare  Bulawayo Assigned","NETWORK: Regional Coverage 100%","SECURE: Instant Digital Payouts"],[e,n]=F.useState(0);return F.useEffect(()=>{const r=setInterval(()=>{n(i=>(i+1)%t.length)},3e3);return()=>clearInterval(r)},[]),u.jsxs("div",{className:"flex items-center space-x-2 bg-slate-900 text-white px-5 py-2 rounded-full shadow-2xl shadow-slate-900/20 animate-in fade-in zoom-in duration-700 mx-auto w-fit mb-10 border border-white/10",children:[u.jsx(Db,{className:"w-3.5 h-3.5 text-primary fill-primary animate-pulse"}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:t[e]}),u.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-ping ml-1"})]})},EO=()=>{const[t,e]=F.useState("options"),[n,r]=F.useState(!1),[i,o]=F.useState(""),[l,h]=F.useState(""),[f,p]=F.useState(""),[v,y]=F.useState(""),[w,E]=F.useState(""),j=async()=>{try{await iD(Ps,JD)}catch(M){E(M.message)}},S=async M=>{M.preventDefault(),E("");try{if(n){const N=(await RL(Ps,i,l)).user;await DL(N,{displayName:f}),await Dv(et(Le,"users",N.uid),{uid:N.uid,displayName:f,email:i,phoneNumber:v,createdAt:new Date().toISOString(),role:"user"})}else await jL(Ps,i,l)}catch(C){console.error(C),E(C.message)}};return u.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col items-center justify-center p-6 relative overflow-hidden font-sans text-slate-900 selection:bg-primary/10",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[80%] h-[80%] bg-blue-100/30 rounded-full blur-[120px] animate-pulse-slow"}),u.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[80%] h-[80%] bg-indigo-100/30 rounded-full blur-[120px]"})]}),u.jsxs("div",{className:"w-full max-w-md relative z-10 flex flex-col items-center",children:[u.jsxs("div",{className:"text-center mb-10 w-full",children:[u.jsx(bO,{}),u.jsx("div",{className:"relative inline-block mb-8 shadow-premium rounded-[2.5rem] group cursor-pointer hover:scale-105 transition-all duration-700",children:u.jsx("div",{className:"relative bg-white rounded-[2rem] w-28 h-28 flex items-center justify-center border border-slate-100 overflow-hidden shadow-inner",children:u.jsx("img",{src:"/app-logo.png",alt:"AutoDirect",className:"w-full h-full object-cover p-2"})})}),u.jsxs("h1",{className:"text-4xl font-black tracking-tighter text-slate-900 mb-2 uppercase",children:["Auto",u.jsx("span",{className:"text-primary tracking-[-0.05em]",children:"Direct"})]}),u.jsx("p",{className:"text-slate-400 font-black text-[10px] tracking-[0.3em] uppercase opacity-80",children:"Logistics Operating System"})]}),u.jsxs("div",{className:"w-full bg-white/70 backdrop-blur-2xl border border-white rounded-[2.5rem] p-10 shadow-premium",children:[w&&u.jsxs("div",{className:"mb-8 p-4 bg-red-50 text-red-600 text-xs font-bold text-center rounded-2xl border border-red-100 animate-in shake duration-500",children:[u.jsx(b2,{className:"w-4 h-4 inline mr-2"}),w]}),u.jsxs("div",{className:"space-y-5",children:[u.jsxs("button",{onClick:j,className:"w-full py-4 bg-white text-slate-900 rounded-2xl font-black border border-slate-200 flex items-center justify-center hover:bg-slate-50 transition-all active:scale-95 shadow-sm group",children:[u.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"G",className:"w-4 h-4 mr-4 group-hover:scale-110 transition-transform"}),u.jsx("span",{className:"tracking-wide text-sm whitespace-nowrap",children:"Continue with Google"})]}),t==="options"&&u.jsxs("div",{className:"relative py-4",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-slate-100"})}),u.jsx("div",{className:"relative flex justify-center text-[10px] uppercase tracking-[0.3em]",children:u.jsx("span",{className:"bg-white px-4 text-slate-300 font-bold",children:"Security Pass"})})]}),t==="options"&&u.jsxs("button",{onClick:()=>e("email"),className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black shadow-xl shadow-slate-900/20 hover:bg-black transition-all active:scale-95 flex items-center justify-center group",children:[u.jsx(om,{className:"w-4 h-4 mr-3 group-hover:rotate-12 transition-transform"}),u.jsx("span",{className:"text-sm",children:"Access with Email"})]}),t==="email"&&u.jsxs("form",{onSubmit:S,className:"space-y-5 animate-in slide-in-from-bottom-6 fade-in duration-500",children:[u.jsxs("div",{className:"space-y-3",children:[n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"group relative",children:[u.jsx(Ds,{className:"absolute left-5 top-5 w-4 h-4 text-slate-400 group-focus-within:text-primary transition-colors"}),u.jsx("input",{type:"text",placeholder:"Full Name",value:f,onChange:M=>p(M.target.value),className:"w-full pl-12 pr-5 py-5 bg-slate-50/50 border border-slate-200 rounded-2xl text-black placeholder-slate-400 focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all font-bold text-sm",required:!0})]}),u.jsxs("div",{className:"group relative",children:[u.jsx(M2,{className:"absolute left-5 top-5 w-4 h-4 text-slate-400 group-focus-within:text-primary transition-colors"}),u.jsx("input",{type:"tel",placeholder:"Phone Number",value:v,onChange:M=>y(M.target.value),className:"w-full pl-12 pr-5 py-5 bg-slate-50/50 border border-slate-200 rounded-2xl text-black placeholder-slate-400 focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all font-bold text-sm",required:!0})]})]}),u.jsxs("div",{className:"group relative",children:[u.jsx(om,{className:"absolute left-5 top-5 w-4 h-4 text-slate-400 group-focus-within:text-primary transition-colors"}),u.jsx("input",{type:"email",placeholder:"Email Address",value:i,onChange:M=>o(M.target.value),className:"w-full pl-12 pr-5 py-5 bg-slate-50/50 border border-slate-200 rounded-2xl text-black placeholder-slate-400 focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all font-bold text-sm",required:!0})]}),u.jsxs("div",{className:"group relative",children:[u.jsx(jb,{className:"absolute left-5 top-5 w-4 h-4 text-slate-400 group-focus-within:text-primary transition-colors"}),u.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:M=>h(M.target.value),className:"w-full pl-12 pr-5 py-5 bg-slate-50/50 border border-slate-200 rounded-2xl text-black placeholder-slate-400 focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all font-bold text-sm",required:!0})]})]}),u.jsxs("button",{type:"submit",className:"w-full py-5 bg-primary text-white rounded-2xl font-black uppercase tracking-widest shadow-2xl shadow-primary/30 hover:bg-primary-hover hover:-translate-y-1 active:scale-95 flex items-center justify-center group transition-all",children:[u.jsx("span",{children:n?"Create Corporate ID":"Authorize Access"}),u.jsx(Zo,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]}),u.jsxs("div",{className:"flex items-center justify-between pt-4",children:[u.jsxs("button",{type:"button",onClick:()=>e("options"),className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] hover:text-primary transition-colors",children:[u.jsx(zg,{className:"w-3 h-3 inline rotate-180 mr-1"}),"Methods"]}),u.jsx("button",{type:"button",onClick:()=>r(!n),className:"text-primary text-[10px] font-black uppercase tracking-[0.2em] bg-primary/5 px-4 py-2 rounded-full hover:bg-primary/10 transition-all border border-primary/10",children:n?"Log In Instead":"Register New ID"})]})]})]})]}),u.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-6",children:[u.jsxs("div",{className:"flex items-center px-4 py-2 rounded-full bg-white border border-slate-100 shadow-sm opacity-60 hover:opacity-100 transition-opacity cursor-default",children:[u.jsx(Wi,{className:"w-3 h-3 text-primary mr-2"}),u.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"ISO 27001 Secure"})]}),u.jsxs("div",{className:"flex items-center px-4 py-2 rounded-full bg-white border border-slate-100 shadow-sm opacity-60 hover:opacity-100 transition-opacity cursor-default",children:[u.jsx(T2,{className:"w-3 h-3 text-primary mr-2"}),u.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Regional Network"})]})]})]})]})},TO=({user:t,onClose:e})=>{const[n,r]=F.useState(!0),[i,o]=F.useState(!1),[l,h]=F.useState("universal"),[f,p]=F.useState("hauler"),[v,y]=F.useState({universal:{displayName:t.displayName||"",email:t.email||"",phoneNumber:t.phoneNumber||"",photoURL:t.photoURL||"",verified:!1,rating:5,reviewsCount:0,memberSince:new Date().getFullYear()},hauler:{fleetType:"Flatbed",maxTonnage:"",bedLength:"",equipmentTags:[],licenseStatus:"Valid",insuranceStatus:!0,onTimeRate:100,totalDistance:0,cancelRate:0},supplier:{companyName:"",industry:"General Logistics",paymentTerms:"Net 30",isEscrowFunded:!1,loadingHours:"08:00 - 17:00",facilities:[]}});F.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{const M=et(Le,"users",t.uid),C=await LE(M);if(C.exists()){const N=C.data();y(R=>({universal:{...R.universal,...N.universal},hauler:{...R.hauler,...N.hauler},supplier:{...R.supplier,...N.supplier}})),N.role&&p(N.role)}}catch(M){console.error("Error fetching profile:",M)}finally{r(!1)}})()},[t]);const w=async()=>{o(!0);const S=ne.loading("Updating your secure profile...");try{const M=et(Le,"users",t.uid);await Dv(M,{uid:t.uid,email:t.email,role:f,universal:v.universal,hauler:v.hauler,supplier:v.supplier,updatedAt:new Date().toISOString()},{merge:!0}),ne.success("Profile credentials synchronized!",{id:S})}catch(M){console.error("Error saving profile:",M),ne.error("Security synchronization failed. Try again.",{id:S})}finally{o(!1)}},E=(S,M,C)=>{y(N=>({...N,[S]:{...N[S],[M]:C}}))},j=(S,M,C)=>{y(N=>{const R=N[S][M]||[],U=R.includes(C)?R.filter(q=>q!==C):[...R,C];return{...N,[S]:{...N[S],[M]:U}}})};return n?u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading Profile..."}):u.jsxs("div",{className:"fixed inset-0 z-40 bg-slate-50 overflow-y-auto animate-in fade-in duration-300",children:[u.jsxs("div",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200 px-4 py-3 flex justify-between items-center shadow-sm",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-500",children:[u.jsx(Od,{className:"w-5 h-5 rotate-180"})," "]}),u.jsx("h1",{className:"text-lg font-black uppercase text-slate-800 tracking-tight",children:"Edit Profile"})]}),u.jsx("button",{onClick:async()=>{window.confirm("DEBUG: This will clear your Org ID and reset your account setup status. Reload?")&&(await jn(et(Le,"users",t.uid),{organizationId:null,isCompanySetupComplete:!1}),window.location.reload())},className:"mr-2 px-3 py-2 bg-red-100 text-red-600 rounded-xl font-bold uppercase text-[10px] hover:bg-red-200 transition-colors",children:"Reset Setup"}),u.jsx("button",{onClick:w,disabled:i,className:"px-6 py-2 bg-primary text-white rounded-xl font-bold uppercase text-xs shadow-lg hover:bg-slate-800 transition-all flex items-center",children:i?"Saving...":u.jsxs(u.Fragment,{children:["Save Changes ",u.jsx(j2,{className:"w-4 h-4 ml-2"})]})})]}),u.jsxs("div",{className:"max-w-5xl mx-auto p-4 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u.jsx("div",{className:"flex space-x-1 bg-white p-1 rounded-xl border border-slate-200 shadow-sm overflow-x-auto",children:["universal","hauler","supplier"].map(S=>u.jsx("button",{onClick:()=>h(S),className:`flex-1 py-2 px-4 rounded-lg text-xs font-black uppercase tracking-wider transition-all whitespace-nowrap ${l===S?"bg-slate-100 text-primary shadow-sm":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:S==="universal"?"Identity & Base":S==="hauler"?"Hauler Asset":"Supplier Biz"},S))}),l==="universal"&&u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm space-y-6 animate-in fade-in slide-in-from-left-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx(Ds,{className:"w-5 h-5 text-primary"}),u.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Identity Verification"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(Hn,{label:"Full Legal Name",icon:Ds,value:v.universal.displayName,onChange:S=>E("universal","displayName",S)}),u.jsx(Hn,{label:"Phone Number",icon:ys,value:v.universal.phoneNumber,onChange:S=>E("universal","phoneNumber",S)}),u.jsx(Hn,{label:"Public Photo URL",icon:Ab,value:v.universal.photoURL,onChange:S=>E("universal","photoURL",S),placeholder:"https://..."})]}),u.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase",children:"Verification Status"}),u.jsx("p",{className:"text-[10px] text-slate-500",children:"Government ID & Face Match"})]}),v.universal.verified?u.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-[10px] font-black uppercase rounded-full border border-green-200 flex items-center",children:[u.jsx(mr,{className:"w-3 h-3 mr-1"})," Verified"]}):u.jsx("button",{className:"px-3 py-1 bg-slate-200 text-slate-500 text-[10px] font-black uppercase rounded-full border border-slate-300 hover:bg-slate-300 transition-colors",children:"Request Check"})]})})]}),l==="hauler"&&u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm space-y-6 animate-in fade-in slide-in-from-left-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(At,{className:"w-5 h-5 text-amber-500"}),u.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Fleet & Equipment"})]}),u.jsx("button",{onClick:()=>p("hauler"),className:"text-[10px] font-bold text-amber-600 uppercase hover:underline",children:"Preview Card"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Vehicle Class"}),u.jsx("select",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm text-slate-900 outline-none focus:ring-2 focus:ring-primary",value:v.hauler.fleetType,onChange:S=>E("hauler","fleetType",S.target.value),children:["Flatbed","Box Truck","Refrigerated","Tanker","Lowboy","Van"].map(S=>u.jsx("option",{value:S,children:S},S))})]}),u.jsx(Hn,{label:"Max Tonnage",icon:ys,type:"number",value:v.hauler.maxTonnage,onChange:S=>E("hauler","maxTonnage",S)}),u.jsx(Hn,{label:"Bed Length (Meters)",icon:ys,type:"number",value:v.hauler.bedLength,onChange:S=>E("hauler","bedLength",S)})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Equipment Tags"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:["Straps","Tarps","Chains","Liftgate","Pallet Jack","Ramps"].map(S=>u.jsx("button",{onClick:()=>j("hauler","equipmentTags",S),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase transition-all ${v.hauler.equipmentTags.includes(S)?"bg-amber-500 text-white shadow-md shadow-amber-500/20":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:S},S))})]}),u.jsxs("div",{className:"p-4 bg-slate-800 rounded-xl text-white space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 border-b border-white/10 pb-2",children:[u.jsx(D2,{className:"w-4 h-4 text-green-400"}),u.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider",children:"Compliance Wallet"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Driver License"}),u.jsx("span",{className:"text-[10px] text-green-400 font-bold uppercase",children:v.hauler.licenseStatus})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Cargo Insurance"}),u.jsx("span",{className:`text-[10px] font-bold uppercase ${v.hauler.insuranceStatus?"text-green-400":"text-red-400"}`,children:v.hauler.insuranceStatus?"Active":"Missing"})]})]}),u.jsxs("button",{onClick:()=>ne("Vault access restricted. Enterprise credentials required.",{icon:""}),className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded-lg text-[10px] font-bold uppercase transition-colors flex items-center justify-center",children:[u.jsx(Lb,{className:"w-3 h-3 mr-2"})," Manage Documents"]})]})]}),l==="supplier"&&u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm space-y-6 animate-in fade-in slide-in-from-left-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cu,{className:"w-5 h-5 text-blue-600"}),u.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Business Identity"})]}),u.jsx("button",{onClick:()=>p("supplier"),className:"text-[10px] font-bold text-blue-600 uppercase hover:underline",children:"Preview Card"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(Hn,{label:"Company Name",icon:cu,value:v.supplier.companyName,onChange:S=>E("supplier","companyName",S)}),u.jsx(Hn,{label:"Industry Type",icon:ys,value:v.supplier.industry,onChange:S=>E("supplier","industry",S)}),u.jsx(Hn,{label:"Loading Hours",icon:ys,value:v.supplier.loadingHours,onChange:S=>E("supplier","loadingHours",S)}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Payment Terms"}),u.jsx("select",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm text-slate-900 outline-none focus:ring-2 focus:ring-primary",value:v.supplier.paymentTerms,onChange:S=>E("supplier","paymentTerms",S.target.value),children:["Instant (Escrow)","Net 7","Net 15","Net 30","COD"].map(S=>u.jsx("option",{value:S,children:S},S))})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Facility Amenities"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:["Forklift","Loading Dock","Overnight Parking","Restrooms","Crane","24/7 Access"].map(S=>u.jsx("button",{onClick:()=>j("supplier","facilities",S),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase transition-all ${v.supplier.facilities.includes(S)?"bg-blue-600 text-white shadow-md shadow-blue-500/20":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:S},S))})]}),u.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl flex items-center justify-between",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("h4",{className:"text-xs font-black text-blue-900 uppercase",children:"Escrow Status"}),u.jsx("p",{className:"text-[10px] text-blue-700 max-w-[200px]",children:"Drivers prioritize 100% funded loads. Verify your payment method."})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"checkbox",checked:v.supplier.isEscrowFunded,onChange:S=>E("supplier","isEscrowFunded",S.target.checked),className:"w-5 h-5 accent-blue-600"})})]})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"sticky top-24 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h4",{className:"text-xs font-black uppercase text-slate-400 tracking-widest",children:"Live Preview"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>p("hauler"),className:`w-3 h-3 rounded-full ${f==="hauler"?"bg-amber-500":"bg-slate-200"}`,title:"Trucker View"}),u.jsx("button",{onClick:()=>p("supplier"),className:`w-3 h-3 rounded-full ${f==="supplier"?"bg-blue-600":"bg-slate-200"}`,title:"Supplier View"})]})]}),u.jsx(qb,{profileData:v,role:f,expanded:!0}),u.jsx("div",{className:"pt-6 border-t border-slate-100",children:u.jsx("button",{onClick:async()=>{if(window.confirm("RESET SETUP: This will clear your organization and force you through onboarding. Continue?")){const S=ne.loading("Clearing operational links...");try{const M=et(Le,"users",t.uid);await jn(M,{organizationId:null,isCompanySetupComplete:!1}),ne.success("Identity Reset. Reloading...",{id:S}),setTimeout(()=>window.location.reload(),1e3)}catch{ne.error("Wipe failed.")}}},className:"w-full py-2 bg-rose-50 text-rose-500 border border-rose-100 rounded-xl text-[10px] font-black uppercase hover:bg-rose-500 hover:text-white transition-all shadow-sm",children:"Reset Operational Setup"})})]})})]})]})};function sx(){var w;const{jobId:t}=e2(),e=JI(),[n,r]=F.useState(t||""),[i,o]=F.useState(null),[l,h]=F.useState(!1),[f,p]=F.useState(null);F.useEffect(()=>{if(!t){o(null),h(!1);return}h(!0),p(null);const E=et(Le,"transportJobs",t),j=ud(E,S=>{h(!1),S.exists()?(o({id:S.id,...S.data()}),p(null)):(p("Tracking ID not found. Please check and try again."),o(null))},S=>{console.error(S),h(!1),p("Unable to fetch shipment data. Please try again later.")});return()=>j()},[t]);const v=E=>{E.preventDefault(),n.trim()&&e(`/track/${n.trim()}`)},y=E=>{if(!i)return"idle";const j=["open","assigned","in_transit","delivered"],S=j.indexOf(i.status),M=j.indexOf(E);return S>M?"completed":S===M?"active":"pending"};return u.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-800",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-20",children:u.jsx("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>e("/"),children:[u.jsx("div",{className:"bg-amber-100 p-1.5 rounded-lg border border-amber-200",children:u.jsx(At,{className:"w-5 h-5 text-amber-600"})}),u.jsxs("div",{className:"leading-none",children:[u.jsxs("h1",{className:"font-black text-lg uppercase tracking-tight text-slate-900",children:["Auto",u.jsx("span",{className:"text-amber-600",children:"Direct"})]}),u.jsx("span",{className:"text-[9px] font-bold uppercase text-slate-400 tracking-widest block",children:"Recipient Portal"})]})]})})}),u.jsxs("main",{className:"max-w-3xl mx-auto p-4 md:p-8 space-y-8",children:[!t&&u.jsxs("div",{className:"text-center py-16 space-y-6",children:[u.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Track your shipment"}),u.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:"Enter your tracking ID below to see the real-time status of your delivery."}),u.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto flex gap-2 relative",children:[u.jsx("input",{type:"text",placeholder:"Enter Job ID (e.g. 8x9d...)",className:"w-full pl-4 pr-12 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 shadow-sm transition-all",value:n,onChange:E=>r(E.target.value)}),u.jsx("button",{type:"submit",className:"absolute right-1.5 top-1.5 bottom-1.5 bg-slate-900 hover:bg-slate-800 text-white px-4 rounded-lg font-bold transition-colors",children:u.jsx($i,{className:"w-4 h-4"})})]})]}),t&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3 px-2",children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Tracking ID"}),u.jsx("code",{className:"text-sm font-mono font-bold text-slate-700 bg-slate-100 px-2 py-0.5 rounded",children:t})]}),u.jsxs("form",{onSubmit:v,className:"flex",children:[u.jsx("input",{className:"text-sm border-none focus:ring-0 text-right text-slate-600 placeholder:text-slate-300 w-32 md:w-48",placeholder:"Track another...",value:n,onChange:E=>r(E.target.value)}),u.jsx("button",{className:"bg-slate-100 hover:bg-slate-200 text-slate-600 p-2 rounded-lg ml-2 transition-colors",children:u.jsx($i,{className:"w-4 h-4"})})]})]}),l&&u.jsxs("div",{className:"text-center py-20",children:[u.jsx(Ug,{className:"w-8 h-8 text-amber-500 animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"Locating shipment data..."})]}),f&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center space-y-4",children:[u.jsx("div",{className:"bg-red-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto",children:u.jsx(Od,{className:"w-6 h-6 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-red-900",children:"Shipment Not Found"}),u.jsx("p",{className:"text-red-600",children:f})]}),u.jsx("button",{onClick:()=>e("/track"),className:"text-sm font-bold underline hover:no-underline text-red-800",children:"Try a different ID"})]}),i&&u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 md:p-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-8",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider mb-1",children:"Status"}),u.jsxs("h2",{className:"text-2xl md:text-3xl font-black text-slate-800 capitalize flex items-center gap-3",children:[i.status.replace("_"," "),u.jsx(du,{status:i.status})]})]}),i.haulerProfile&&u.jsxs("div",{className:"text-right hidden md:block",children:[u.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:"Carrier"}),u.jsx("p",{className:"font-bold text-slate-700",children:((w=i.haulerProfile.universal)==null?void 0:w.displayName)||"Unknown Hauler"})]})]}),u.jsxs("div",{className:"relative flex justify-between items-center mb-4",children:[u.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-full h-1 bg-slate-100 rounded-full -z-0"}),u.jsx(nh,{icon:Bi,label:"Posted",status:y("open"),activeColor:"bg-blue-500"}),u.jsx(nh,{icon:At,label:"Assigned",status:y("assigned"),activeColor:"bg-amber-500"}),u.jsx(nh,{icon:hr,label:"In Transit",status:y("in_transit"),activeColor:"bg-primary"}),u.jsx(nh,{icon:mr,label:"Delivered",status:y("delivered"),activeColor:"bg-emerald-500"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx("div",{className:"md:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden h-[400px]",children:i.originLocation&&i.destinationLocation?u.jsx(Hb,{startPos:[i.originLocation.lat,i.originLocation.lng],endPos:[i.destinationLocation.lat,i.destinationLocation.lng],driverPos:i.driverLocation?[i.driverLocation.lat,i.driverLocation.lng]:null}):u.jsx("div",{className:"h-full flex items-center justify-center bg-slate-50 text-slate-400",children:u.jsx("p",{children:"Map data unavailable"})})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[u.jsxs("h3",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[u.jsx(Bi,{className:"w-4 h-4 text-amber-500"})," Shipment Details"]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative pl-6 border-l-2 border-slate-100 pb-4",children:[u.jsx("div",{className:"absolute -left-[5px] top-0 w-2 h-2 rounded-full bg-blue-500"}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"From"}),u.jsx("p",{className:"font-semibold text-slate-700",children:i.origin})]}),u.jsxs("div",{className:"relative pl-6 border-l-2 border-slate-100",children:[u.jsx("div",{className:"absolute -left-[5px] top-0 w-2 h-2 rounded-full bg-emerald-500"}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"To"}),u.jsx("p",{className:"font-semibold text-slate-700",children:i.destination})]})]}),i.cargoType&&u.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-100 text-sm",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("span",{className:"text-slate-500",children:"Cargo"}),u.jsx("span",{className:"font-medium text-slate-800",children:i.cargoType})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-slate-500",children:"Weight"}),u.jsxs("span",{className:"font-medium text-slate-800",children:[i.weight,"kg"]})]})]})]}),i.status==="delivered"&&u.jsxs("div",{className:"bg-emerald-50 rounded-2xl border border-emerald-100 p-6",children:[u.jsxs("h3",{className:"font-bold text-emerald-900 mb-2 flex items-center gap-2",children:[u.jsx(mr,{className:"w-4 h-4"})," Proof of Delivery"]}),u.jsxs("p",{className:"text-xs text-emerald-700 mb-4",children:["Delivered on ",i.completedAt?new Date(i.completedAt.seconds*1e3).toLocaleString():"N/A"]})]})]})]})]})]})]})]})}function nh({icon:t,label:e,status:n,activeColor:r}){const i=n==="completed",o=n==="active";let l="bg-white border-2 border-slate-200 text-slate-300";return i&&(l=`${r} border-transparent text-white`),o&&(l="bg-white border-4 border-amber-400 text-amber-600 shadow-lg scale-110"),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 ${l}`,children:u.jsx(t,{className:"w-5 h-5"})}),u.jsx("span",{className:`text-[10px] md:text-xs font-bold uppercase mt-2 transition-colors duration-300 ${o||i?"text-slate-800":"text-slate-300"}`,children:e})]})}function kO({user:t,onComplete:e,role:n}){const[r,i]=F.useState("select"),[o,l]=F.useState(""),[h,f]=F.useState(t.email||""),[p,v]=F.useState(!1),y=async(j,S,M)=>{v(!0);const C=ne.loading("Configuring your organization...");try{const N=et(Le,"organizations",`org_${t.uid}_${Date.now()}`),R={name:j,type:S,email:M,adminUserId:t.uid,createdAt:Tu(),members:[t.uid]};await Dv(N,R);const U=et(Le,"users",t.uid);await jn(U,{organizationId:N.id,role:S==="personal"?"owner":"admin",isCompanySetupComplete:!0}),ne.success("Organization setup successfully!",{id:C}),e()}catch(N){console.error("Error creating org:",N),ne.error("Initialization failed. Please try again.",{id:C})}finally{v(!1)}},w=async j=>{j.preventDefault(),!((h.includes("gmail.com")||h.includes("yahoo.com"))&&!window.confirm("Pro Tip: Using a generic email (Gmail/Yahoo) is not recommended for official Companies. Continue anyway?"))&&await y(o,"company",h)},E=async()=>{const j=t.displayName?`${t.displayName}'s Practice`:"My Logistics Practice";await y(j,"personal",t.email)};return r==="select"?u.jsxs("div",{className:"max-w-xl mx-auto mt-10 md:mt-20 p-6 md:p-10 bg-white rounded-[2.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 text-center animate-in zoom-in duration-500",children:[u.jsxs("div",{className:"relative inline-block mb-8",children:[u.jsx("div",{className:"absolute -inset-4 bg-blue-100 rounded-full blur-2xl opacity-40 animate-pulse"}),u.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl rotate-3",children:u.jsx(ys,{className:"w-10 h-10 text-white"})})]}),u.jsx("h2",{className:"text-4xl font-black text-slate-900 mb-3 tracking-tighter",children:"Onboarding Terminal"}),u.jsx("p",{className:"text-slate-500 font-medium mb-10 max-w-sm mx-auto",children:"Select your operational model to configure your marketplace profile."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("button",{onClick:()=>i("create_company"),className:"flex flex-col items-center p-8 bg-slate-50 border-2 border-transparent rounded-[2rem] hover:border-blue-500 hover:bg-white hover:shadow-xl transition-all group text-center",children:[u.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-6 transition-transform",children:u.jsx(cu,{className:"w-7 h-7 text-blue-600"})}),u.jsx("div",{className:"font-black text-slate-900 text-xl mb-2 tracking-tight",children:"Organization"}),u.jsx("p",{className:"text-xs text-slate-500 font-medium leading-relaxed",children:"Team-based operation with multiple units, drivers, or centralized dispatch."})]}),u.jsxs("button",{onClick:E,className:"flex flex-col items-center p-8 bg-slate-50 border-2 border-transparent rounded-[2rem] hover:border-amber-500 hover:bg-white hover:shadow-xl transition-all group text-center",children:[u.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-6 group-hover:scale-110 group-hover:-rotate-6 transition-transform",children:u.jsx(Ds,{className:"w-7 h-7 text-amber-600"})}),u.jsx("div",{className:"font-black text-slate-900 text-xl mb-2 tracking-tight",children:"Solo Operator"}),u.jsx("p",{className:"text-xs text-slate-500 font-medium leading-relaxed",children:"Freelance driver or individual broker. Ideal for fast, simple setup."})]})]}),u.jsx("div",{className:"mt-12 pt-8 border-t border-slate-100",children:u.jsxs("button",{onClick:()=>ne("Contact your Administrator for an invite link.",{icon:""}),className:"flex items-center justify-center mx-auto text-xs font-black uppercase tracking-widest text-slate-400 hover:text-slate-900 transition-colors py-2 px-4 rounded-full border border-transparent hover:border-slate-200",children:[u.jsx(hu,{className:"w-4 h-4 mr-2"}),"Joining an existing team?"]})})]}):r==="create_company"?u.jsxs("div",{className:"max-w-md mx-auto mt-10 md:mt-20 p-8 bg-white rounded-[2.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 animate-in slide-in-from-bottom-6 duration-500",children:[u.jsxs("button",{onClick:()=>i("select"),className:"flex items-center text-[10px] font-black uppercase text-slate-400 hover:text-slate-900 mb-8 tracking-widest transition-colors",children:[u.jsx(Zo,{className:"w-3 h-3 mr-2 rotate-180"})," Back to Terminal"]}),u.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[u.jsx("div",{className:"p-4 bg-blue-50 rounded-2xl",children:u.jsx(cu,{className:"w-8 h-8 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Workspace Build"}),u.jsx("p",{className:"text-[10px] text-blue-600 font-bold uppercase tracking-[0.2em] mt-2",children:"Establish Identity"})]})]}),u.jsxs("form",{onSubmit:w,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-2 tracking-widest ml-1",children:"Legal Entity Name"}),u.jsx("input",{type:"text",required:!0,value:o,onChange:j=>l(j.target.value),className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 font-bold text-slate-900 placeholder:font-medium transition-all",placeholder:"e.g. Skyline Logistics LLC"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-500 mb-2 tracking-widest ml-1",children:"Corporate Email"}),u.jsx("input",{type:"email",required:!0,value:h,onChange:j=>f(j.target.value),className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 font-bold text-slate-900 placeholder:font-medium transition-all",placeholder:"ops@company.com"}),(h.includes("gmail")||h.includes("yahoo"))&&u.jsxs("div",{className:"mt-3 flex items-start space-x-3 text-amber-600 text-[10px] font-bold bg-amber-50 p-3 rounded-2xl border border-amber-100",children:[u.jsx(Md,{className:"w-4 h-4 shrink-0 mt-0.5"}),u.jsx("span",{className:"uppercase tracking-tight leading-normal",children:"Notice: Business domains (e.g., @fasttrack.com) receive higher visibility in the marketplace."})]})]}),u.jsx("button",{type:"submit",disabled:p,className:"w-full py-5 bg-slate-900 text-white rounded-2xl font-black uppercase text-xs tracking-[0.2em] hover:bg-black transition-all active:scale-[0.98] disabled:opacity-50 flex items-center justify-center shadow-xl shadow-slate-900/20",children:p?"Initializing...":"Construct Workspace"})]})]}):null}function NO({user:t}){const[e,n]=F.useState([]),[r,i]=F.useState(!0),[o,l]=F.useState(""),[h,f]=F.useState(!1);F.useEffect(()=>{p()},[t.organizationId]);const p=async()=>{try{if(!t.organizationId)return;const w=Eu(zi(Le,"users"),jm("organizationId","==",t.organizationId)),j=(await Lm(w)).docs.map(S=>({id:S.id,...S.data()}));n(j)}catch(w){console.error("Error fetching members:",w),ne.error("Failed to load team members")}finally{i(!1)}},v=async w=>{w.preventDefault(),f(!0);const E=ne.loading(`Searching for ${o}...`);try{const j=Eu(zi(Le,"users"),jm("email","==",o)),S=await Lm(j);if(S.empty)ne(`Invite request created for ${o}. (Simulation)`,{id:E,icon:""}),l("");else{const M=S.docs[0],C=M.data();if(C.organizationId===t.organizationId){ne.error("User is already in your organization.",{id:E});return}window.confirm(`Found user ${C.displayName||C.email}. Add them to your team?`)?(await jn(et(Le,"users",M.id),{organizationId:t.organizationId,role:"driver"}),await jn(et(Le,"organizations",t.organizationId),{members:Rj(M.id)}),ne.success(`${C.displayName||o} added!`,{id:E}),p(),l("")):ne.dismiss(E)}}catch(j){console.error("Invite error:",j),ne.error("Operation failed.",{id:E})}finally{f(!1)}},y=async(w,E)=>{const j=ne.loading("Updating permissions...");try{await jn(et(Le,"users",w),{role:E}),n(S=>S.map(M=>M.id===w?{...M,role:E}:M)),ne.success("Role updated successfully!",{id:j})}catch(S){console.error("Error updating role:",S),ne.error("Failed to update permissions.",{id:j})}};return r?u.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4",children:[u.jsx(I2,{className:"w-8 h-8 text-primary animate-spin"}),u.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Scanning Network..."})]}):u.jsxs("div",{className:"max-w-5xl mx-auto space-y-10 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter flex items-center",children:[u.jsx(hu,{className:"w-10 h-10 mr-4 text-primary"}),"Command Team"]}),u.jsx("p",{className:"text-slate-500 font-medium mt-2",children:"Scale your operations by adding dispatchers and drivers."})]}),u.jsxs("div",{className:"px-4 py-2 bg-slate-100 rounded-full text-[10px] font-black text-slate-500 border border-slate-200 uppercase tracking-widest",children:[e.length," Active Personnel"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/50 sticky top-24",children:[u.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center mb-6",children:u.jsx(F2,{className:"w-6 h-6 text-primary"})}),u.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Recruit Member"}),u.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter an email address to add a member to your organization."}),u.jsxs("form",{onSubmit:v,className:"space-y-4",children:[u.jsxs("div",{className:"relative group",children:[u.jsx(om,{className:"absolute left-4 top-4.5 w-4 h-4 text-slate-400 group-focus-within:text-primary transition-colors"}),u.jsx("input",{type:"email",required:!0,placeholder:"email@company.com",value:o,onChange:w=>l(w.target.value),className:"w-full pl-12 pr-4 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-primary/10 focus:border-primary font-bold text-sm transition-all"})]}),u.jsx("button",{type:"submit",disabled:h,className:"w-full py-4 bg-slate-900 text-white font-black rounded-2xl hover:bg-black transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center text-[10px] uppercase tracking-[0.2em]",children:"Send Direct Invite"})]}),u.jsxs("div",{className:"mt-8 p-4 bg-amber-50 rounded-2xl border border-amber-100",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx(Od,{className:"w-3.5 h-3.5 text-amber-600"}),u.jsx("span",{className:"text-[10px] font-black uppercase text-amber-700 uppercase",children:"Prototype Note"})]}),u.jsx("p",{className:"text-[10px] leading-relaxed text-amber-600 font-medium",children:"In this environment, adding an existing user's email will instantly move them into your organization for testing purposes."})]})]})}),u.jsx("div",{className:"lg:col-span-2",children:u.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-200 shadow-xl shadow-slate-200/30 overflow-hidden",children:[u.jsx("div",{className:"p-6 md:p-8 border-b border-slate-100 flex items-center justify-between bg-slate-50/30",children:u.jsx("h3",{className:"font-black text-slate-900 uppercase text-xs tracking-widest",children:"Active Manifest"})}),u.jsx("div",{className:"divide-y divide-slate-100",children:e.length===0?u.jsxs("div",{className:"p-20 text-center",children:[u.jsx(hu,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),u.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No personnel found."})]}):e.map(w=>{var E;return u.jsxs("div",{className:"p-6 md:p-8 flex flex-col sm:flex-row sm:items-center justify-between gap-6 hover:bg-slate-50 transition-colors group",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-slate-400 font-black text-lg group-hover:bg-white group-hover:shadow-sm transition-all",children:((E=w.displayName)==null?void 0:E.charAt(0))||u.jsx(User,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-black text-slate-900 tracking-tight",children:w.displayName||"Unregistered Alias"}),u.jsx("div",{className:"text-xs text-slate-500 font-medium",children:w.email})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:`px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider border shadow-sm ${w.role==="admin"||w.role==="owner"?"bg-purple-50 text-purple-700 border-purple-200":w.role==="dispatcher"?"bg-amber-50 text-amber-700 border-amber-200":"bg-blue-50 text-blue-700 border-blue-200"}`,children:w.role||"Member"}),w.id!==t.uid&&u.jsxs("div",{className:"relative group/select",children:[u.jsxs("select",{className:"pl-4 pr-10 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest outline-none focus:ring-2 focus:ring-primary focus:border-primary appearance-none hover:bg-white transition-all cursor-pointer",value:w.role||"driver",onChange:j=>y(w.id,j.target.value),children:[u.jsx("option",{value:"driver",children:"Driver"}),u.jsx("option",{value:"dispatcher",children:"Dispatcher"}),u.jsx("option",{value:"accountant",children:"Accountant"}),u.jsx("option",{value:"admin",children:"Admin"})]}),u.jsx(ChevronRight,{className:"w-3.5 h-3.5 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2 rotate-90 pointer-events-none"})]})]})]},w.id)})})]})})]})]})}function IO(){const[t,e]=F.useState(null),[n,r]=F.useState(null),[i,o]=F.useState(!0),[l,h]=F.useState(null),[f,p]=F.useState("board"),[v,y]=F.useState([]),[w,E]=F.useState(!0);F.useEffect(()=>{const k=VL(Ps,async T=>{if(e(T),T){const A=et(Le,"users",T.uid),P=ud(A,V=>{if(V.exists()){const O=V.data();r(O),!l&&O.role&&O.role!=="user"&&(h(O.role==="supplier"?"supplier":"hauler"),p(O.role==="supplier"?"history":"board"))}else r({organizationId:null});o(!1)},V=>{console.error("Profile Subscription Error:",V),ne.error("Failed to sync profile"),o(!1)});return()=>P()}else r(null),o(!1)});return()=>k()},[l]),F.useEffect(()=>{if(!t)return;const k=Eu(zi(Le,"transportJobs"),CE("createdAt","desc")),T=ud(k,A=>{const P=A.docs.map(V=>({id:V.id,...V.data()}));y(P),E(!1)},A=>{console.error("Firebase Jobs Error:",A),ne.error("Connection interrupted. Retrying..."),E(!1)});return()=>T()},[t]);const j=async k=>{const T=ne.loading("Posting load to network...");try{const A=await LE(et(Le,"users",t.uid)),P=A.exists()?A.data():{universal:{displayName:t.displayName}};await Dm(zi(Le,"transportJobs"),{...k,status:"open",supplierId:t.uid,supplierEmail:t.email,supplierProfile:P,supplierOrgId:(n==null?void 0:n.organizationId)||null,haulerId:null,createdAt:Date.now()}),ne.success("Load posted successfully!",{id:T}),p("history")}catch(A){console.error("Error adding document: ",A),ne.error("Failed to post load. Try again.",{id:T})}},S=async(k,T)=>{const A=ne.loading("Updating load...");try{const P=et(Le,"transportJobs",k);await jn(P,T),ne.success("Load updated!",{id:A}),p("history")}catch(P){console.error("Error editing document: ",P),ne.error("Update failed.",{id:A})}},M=async k=>{try{if(window.confirm("Are you sure you want to delete this job?")){const T=ne.loading("Removing load...");await Cj(et(Le,"transportJobs",k)),ne.success("Load removed.",{id:T})}}catch(T){console.error("Error deleting document: ",T),ne.error("Deletion failed.")}},C=async k=>{const T=ne.loading("Accepting load...");try{const A=n==null?void 0:n.organizationId;if(!A){ne.error("Subscription required: Join a company to accept loads.",{id:T});return}const P=et(Le,"transportJobs",k);await jn(P,{status:"assigned",haulerId:t.uid,haulerOrgId:A,haulerEmail:t.email,haulerProfile:n,acceptedAt:Date.now()}),ne.success("Job accepted! Drive safe.",{id:T})}catch(A){console.error("Error accepting job:",A),ne.error("This load is no longer available.",{id:T})}},N=async(k,T)=>{try{const A=et(Le,"transportJobs",k);await jn(A,{status:T}),ne.success(`Status updated to ${T}`)}catch{ne.error("Status update failed.")}},R=async k=>{try{const T=et(Le,"transportJobs",k);await jn(T,{status:"open",haulerId:null,haulerOrgId:null,haulerEmail:null,haulerProfile:null,acceptedAt:null}),ne.error("Job assignment expired.")}catch(T){console.error("Error expiring job:",T)}},U=v.filter(k=>k.supplierId===(t==null?void 0:t.uid)),q=v.filter(k=>k.status==="open"),G=v.filter(k=>k.haulerId===(t==null?void 0:t.uid)||k.haulerOrgId&&(n==null?void 0:n.organizationId)&&k.haulerOrgId===n.organizationId);return i?u.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col items-center justify-center p-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-slate-200 rounded-full"}),u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin absolute top-0 left-0"})]}),u.jsx("p",{className:"mt-4 text-xs font-black uppercase tracking-widest text-slate-400 animate-pulse",children:"Syncing AutoDirect..."})]}):l?t?n&&!n.organizationId?u.jsxs("div",{className:"min-h-screen bg-slate-50",children:[u.jsxs("header",{className:"p-4 bg-white border-b border-slate-100 flex justify-between items-center shadow-sm sticky top-0 z-50",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:u.jsx(At,{className:"w-5 h-5 text-white"})}),u.jsxs("span",{className:"font-black text-lg uppercase tracking-tighter",children:["Auto",u.jsx("span",{className:"text-primary",children:"Direct"})]})]}),u.jsx("button",{onClick:()=>Z0(Ps),className:"px-4 py-2 bg-red-50 text-red-600 rounded-xl text-xs font-bold uppercase hover:bg-red-100 transition-colors",children:"Sign Out"})]}),u.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-10",children:u.jsx(kO,{user:t,role:l,onComplete:()=>window.location.reload()})})]}):w?u.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col items-center justify-center p-6",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),u.jsx("p",{className:"text-xs font-black uppercase text-slate-400 tracking-widest",children:"Bridging Supply & Demand..."})]}):u.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] pb-24 font-sans text-slate-900 selection:bg-primary/10",children:[f==="profile_editor"&&u.jsx(TO,{user:t,onClose:()=>p(l==="supplier"?"history":"board")}),f==="team_management"&&u.jsx("div",{className:"fixed inset-0 bg-slate-50 z-50 overflow-y-auto animate-in fade-in duration-300",children:u.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[u.jsxs("button",{onClick:()=>p("board"),className:"mb-6 flex items-center text-xs font-black uppercase text-slate-400 hover:text-primary transition-colors",children:[u.jsx(Au,{className:"w-4 h-4 mr-2"})," Close Team View"]}),u.jsx(NO,{user:{...t,...n}})]})}),u.jsx("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-xl border-b border-slate-200/60 shadow-[0_1px_2px_rgba(0,0,0,0.02)]",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"relative group cursor-pointer lg:hover:scale-105 transition-transform",onClick:()=>p(l==="supplier"?"history":"board"),children:[u.jsx("div",{className:"absolute -inset-1 bg-gradient-to-tr from-primary to-blue-400 rounded-xl blur opacity-20 group-hover:opacity-40 transition duration-500"}),u.jsx("div",{className:"relative w-10 h-10 bg-white rounded-xl border border-slate-100 shadow-sm flex items-center justify-center overflow-hidden",children:u.jsx("img",{src:"/app-logo.png",alt:"AutoDirect",className:"w-full h-full object-cover"})})]}),u.jsxs("div",{className:"flex flex-col leading-none",children:[u.jsxs("span",{className:"font-black text-xl uppercase tracking-tighter text-slate-900",children:["Auto",u.jsx("span",{className:"text-primary",children:"Direct"})]}),u.jsx("span",{className:"text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] mt-0.5",children:"Logistics OS"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:`hidden md:flex items-center text-[10px] font-black uppercase px-3 py-1.5 rounded-full border shadow-sm transition-all ${l==="supplier"?"bg-amber-50 text-amber-700 border-amber-200 shadow-amber-100/50":"bg-blue-50 text-blue-700 border-blue-200 shadow-blue-100/50"}`,children:[l==="supplier"?u.jsx(Bi,{className:"w-3.5 h-3.5 mr-2"}):u.jsx(At,{className:"w-3.5 h-3.5 mr-2"}),l==="supplier"?"Supplier Portal":"Hauler Network"]}),u.jsx("div",{className:"h-6 w-px bg-slate-200 mx-2 hidden sm:block"}),u.jsxs("div",{className:"flex items-center space-x-1.5 bg-slate-50 p-1 rounded-2xl border border-slate-200/60",children:[(n==null?void 0:n.role)==="admin"&&u.jsx("button",{onClick:()=>p("team_management"),className:`p-2.5 rounded-xl transition-all ${f==="team_management"?"bg-white text-primary shadow-sm border border-slate-100":"text-slate-500 hover:text-slate-900"}`,title:"Team Management",children:u.jsx(hu,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>p("profile_editor"),className:`p-2.5 rounded-xl transition-all ${f==="profile_editor"?"bg-white text-primary shadow-sm border border-slate-100":"text-slate-500 hover:text-slate-900"}`,title:"Settings",children:u.jsx(L2,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>{h(null),ne.success("Switched to role selection")},className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-xl transition-all items-center flex",title:"Switch Identity",children:u.jsx(hu,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>{Z0(Ps),ne.success("Signed out successfully")},className:"p-2.5 text-slate-500 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",title:"Secure Logout",children:u.jsx(S2,{className:"w-4 h-4"})})]})]})]})}),u.jsxs("main",{className:"max-w-7xl mx-auto p-4 md:p-6 lg:p-8 space-y-8 min-h-[calc(100vh-140px)] animate-in fade-in duration-500",children:[l==="supplier"&&u.jsx(eP,{activeTab:f,setActiveTab:p,onPostJob:j,onEditJob:S,onDeleteJob:M,myJobs:U}),l==="hauler"&&u.jsx(wO,{activeTab:f,setActiveTab:p,availableJobs:q,myJobs:G,onAcceptJob:C,onUpdateStatus:N,onExpireJob:R,userProfile:n})]}),u.jsxs("div",{className:"fixed bottom-6 right-6 z-30 group",children:[u.jsx("button",{onClick:()=>window.location.href="/track",className:"w-14 h-14 bg-slate-900 text-white rounded-full flex items-center justify-center shadow-2xl shadow-slate-900/40 hover:scale-110 active:scale-95 transition-all group-hover:rotate-12",children:u.jsx($i,{className:"w-6 h-6"})}),u.jsx("div",{className:"absolute bottom-full right-0 mb-4 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap bg-white px-4 py-2 rounded-xl border border-slate-200 shadow-xl text-[10px] font-black uppercase tracking-wider text-slate-600",children:"Track Any Shipment"})]})]}):u.jsx(EO,{}):u.jsx(B2,{onSelectRole:k=>{h(k),p(k==="supplier"?"post":"board")}})}function SO(){return u.jsxs(eO,{children:[u.jsx(JS,{position:"top-right",toastOptions:{className:"font-sans text-xs font-bold uppercase tracking-wider",duration:3e3,style:{borderRadius:"12px",background:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",padding:"12px 16px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"}}}),u.jsx(y2,{children:u.jsxs(g2,{children:[u.jsx(mh,{path:"/track",element:u.jsx(sx,{})}),u.jsx(mh,{path:"/track/:jobId",element:u.jsx(sx,{})}),u.jsx(mh,{path:"/*",element:u.jsx(IO,{})})]})})]})}class PO extends nn.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.state.errorInfo=n}render(){return this.state.hasError?u.jsxs("div",{style:{padding:"2rem",fontFamily:"system-ui, sans-serif",maxWidth:"800px",margin:"0 auto"},children:[u.jsx("h1",{style:{color:"#ef4444",fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"Application Error"}),u.jsx("p",{style:{color:"#374151",marginBottom:"1rem"},children:"Something went wrong rendering the application."}),u.jsx("div",{style:{backgroundColor:"#f3f4f6",padding:"1rem",borderRadius:"0.5rem",overflow:"auto"},children:u.jsx("code",{style:{color:"#dc2626",fontSize:"0.875rem"},children:this.state.error&&this.state.error.toString()})}),u.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"bold"},children:"Reload Application"})]}):this.props.children}}cp.createRoot(document.getElementById("root")).render(u.jsx(nn.StrictMode,{children:u.jsx(PO,{children:u.jsx(SO,{})})}));
